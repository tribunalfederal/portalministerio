<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Jur√≠dico Completo - Brasil√¢ndia RP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
    /* Calculadora de Penas - Visual Moderno */
    #calculadora .responsive-grid-2 > div:first-child {
        background: linear-gradient(135deg, #1e293b 80%, #dc2626 20%);
        border-radius: 1.5rem;
        border: 2px solid #dc2626;
        box-shadow: 0 4px 32px #dc2626a0;
        padding: 2rem 1.5rem;
        margin-bottom: 1.5rem;
        transition: box-shadow 0.2s, transform 0.2s;
    }
    #calculadora .responsive-grid-2 > div:first-child:hover {
        box-shadow: 0 8px 40px #dc2626cc;
        transform: scale(1.01);
    }
    #calculadora .crime-btn {
        background: #222;
        color: #fff;
        border: 1px solid #444;
        border-radius: 0.75rem;
        padding: 0.7rem 1rem;
        margin: 0.2rem 0;
        font-size: 1rem;
        transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        cursor: pointer;
        width: 100%;
        text-align: left;
        box-shadow: 0 2px 8px #0002;
    }
    #calculadora .crime-btn.bg-gradient-to-r {
        background: linear-gradient(90deg, #22c55e 60%, #bbf7d0 100%);
        color: #222;
        font-weight: bold;
        border: 2px solid #22c55e;
        box-shadow: 0 4px 24px #22c55e80;
    }
    #calculadora #lista-crimes .crime-tag {
        background: #22c55e;
        color: #fff;
        border-radius: 0.5rem;
        padding: 0.3rem 0.7rem;
        margin: 0.2rem;
        font-weight: bold;
        font-size: 0.9rem;
        box-shadow: 0 2px 8px #22c55e40;
    }
    #calculadora #busca-crime {
        margin-bottom: 1rem;
        background: #111;
        border: 1px solid #dc2626;
        color: #fff;
        border-radius: 0.75rem;
        padding: 0.7rem 1rem;
        font-size: 1rem;
    }
    #calculadora .bg-green-900\/20 {
        background: linear-gradient(90deg, #14532d 80%, #22c55e 20%);
        border-radius: 1rem;
        border: 2px solid #22c55e;
        box-shadow: 0 2px 16px #22c55e40;
    }
    #calculadora .bg-gradient-to-r {
        border-radius: 1rem;
        box-shadow: 0 2px 16px #fbbf2440;
    }
    #calculadora .reducao-checkbox {
        accent-color: #22c55e;
        width: 1.2rem;
        height: 1.2rem;
    }
    #calculadora h3, #calculadora h4 {
        letter-spacing: 0.02em;
    }
    </style>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore, doc, setDoc, getDoc, collection, addDoc, query, where, getDocs, updateDoc, deleteDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        // üî• CONFIGURA√á√ïES DO FIREBASE - CONFIGURADO!
        const firebaseConfig = {
            apiKey: "AIzaSyD7zTi6HQlDmkA6guBTXGw87njm5fu4ImA",
            authDomain: "sistema-juridico-brasila-7c777.firebaseapp.com",
            projectId: "sistema-juridico-brasila-7c777",
            storageBucket: "sistema-juridico-brasila-7c777.firebasestorage.app",
            messagingSenderId: "566082705177",
            appId: "1:566082705177:web:9b1a7050e3b8c95c789788"
        };
        
        // Inicializar Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        
        // Tornar dispon√≠vel globalmente
        window.firebaseAuth = auth;
        window.firebaseDB = db;
        window.firebaseApp = app;
        window.firebaseModules = {
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            signOut,
            onAuthStateChanged,
            doc,
            setDoc,
            getDoc,
            collection,
            addDoc,
            query,
            where,
            getDocs,
            updateDoc,
            deleteDoc,
            onSnapshot
        };

        console.log('üî• Firebase inicializado com sucesso!');

        // ===== SISTEMA DE CONECTIVIDADE FIREBASE SEMPRE ONLINE =====
        
        let firebaseStatus = {
            isOnline: false,
            lastConnect: null,
            reconnectAttempts: 0,
            maxReconnectAttempts: 10,
            reconnectDelay: 1000, // 1 segundo inicial
            maxReconnectDelay: 30000, // 30 segundos m√°ximo
            heartbeatInterval: null,
            connectionMonitor: null
        };

        // Configurar persist√™ncia offline
        function configurarPersistenciaOffline() {
            try {
                // Habilitar cache offline do Firestore
                if (window.firebaseDB) {
                    // Firestore automaticamente mant√©m cache offline
                    console.log('üíæ Cache offline do Firestore habilitado');
                }
            } catch (error) {
                console.warn('‚ö†Ô∏è Erro ao configurar persist√™ncia offline:', error);
            }
        }

        // Monitor de conectividade em tempo real
        function iniciarMonitorConectividade() {
            // Monitor de conex√£o com internet
            window.addEventListener('online', () => {
                console.log('üåê Internet reconectada');
                firebaseStatus.isOnline = true;
                atualizarIndicadorStatus('conectado');
                tentarReconectarFirebase();
            });

            window.addEventListener('offline', () => {
                console.log('üì¥ Internet desconectada');
                firebaseStatus.isOnline = false;
                atualizarIndicadorStatus('desconectado');
            });

            // Iniciar heartbeat manual sempre
            iniciarHeartbeatManual();
        }

        // Heartbeat manual como fallback
        function iniciarHeartbeatManual() {
            if (firebaseStatus.heartbeatInterval) {
                clearInterval(firebaseStatus.heartbeatInterval);
            }

            firebaseStatus.heartbeatInterval = setInterval(async () => {
                await verificarConexaoFirebase();
            }, 5000); // Verificar a cada 5 segundos
        }

        // Verificar conex√£o Firebase manualmente
        async function verificarConexaoFirebase() {
            try {
                if (!window.firebaseDB) return false;

                const { doc, getDoc } = window.firebaseModules;
                const testRef = doc(window.firebaseDB, 'sistema', 'heartbeat');
                
                // Tentar ler um documento simples
                const testDoc = await getDoc(testRef);
                
                if (!firebaseStatus.isOnline) {
                    firebaseStatus.isOnline = true;
                    firebaseStatus.lastConnect = new Date();
                    firebaseStatus.reconnectAttempts = 0;
                    console.log('üî•‚úÖ Heartbeat: Firebase reconectado');
                    atualizarIndicadorStatus('conectado');
                }
                
                return true;
            } catch (error) {
                if (firebaseStatus.isOnline) {
                    firebaseStatus.isOnline = false;
                    console.log('üî•‚ùå Heartbeat: Firebase desconectado');
                    atualizarIndicadorStatus('desconectado');
                    agendarReconexao();
                }
                return false;
            }
        }

        // Agendar tentativa de reconex√£o
        function agendarReconexao() {
            if (firebaseStatus.reconnectAttempts >= firebaseStatus.maxReconnectAttempts) {
                console.log('üî•‚ö†Ô∏è M√°ximo de tentativas de reconex√£o atingido');
                atualizarIndicadorStatus('erro');
                return;
            }

            setTimeout(() => {
                tentarReconectarFirebase();
            }, firebaseStatus.reconnectDelay);

            // Aumentar delay exponencialmente
            firebaseStatus.reconnectDelay = Math.min(
                firebaseStatus.reconnectDelay * 2,
                firebaseStatus.maxReconnectDelay
            );
        }

        // Tentar reconectar Firebase
        async function tentarReconectarFirebase() {
            if (!navigator.onLine) {
                console.log('üåê Sem internet, aguardando...');
                return;
            }

            firebaseStatus.reconnectAttempts++;
            console.log(`üî•üîÑ Tentativa de reconex√£o ${firebaseStatus.reconnectAttempts}/${firebaseStatus.maxReconnectAttempts}`);
            
            atualizarIndicadorStatus('reconectando');

            try {
                // Verificar se Auth est√° funcionando
                if (window.firebaseAuth) {
                    const user = window.firebaseAuth.currentUser;
                    if (user) {
                        await user.reload();
                    }
                }

                // Verificar se Firestore est√° funcionando
                const isConnected = await verificarConexaoFirebase();
                
                if (isConnected) {
                    console.log('üî•‚úÖ Reconex√£o bem-sucedida!');
                    firebaseStatus.reconnectAttempts = 0;
                    firebaseStatus.reconnectDelay = 1000;
                    atualizarIndicadorStatus('conectado');
                    
                    // Reativar listeners
                    reativarListeners();
                } else {
                    agendarReconexao();
                }
            } catch (error) {
                console.warn(`üî•‚ùå Falha na reconex√£o (${firebaseStatus.reconnectAttempts}):`, error);
                agendarReconexao();
            }
        }

        // Reativar listeners ap√≥s reconex√£o
        function reativarListeners() {
            try {
                // Reativar listener de notifica√ß√µes
                if (typeof iniciarListenerNotificacoes === 'function') {
                    iniciarListenerNotificacoes();
                }

                // Reativar outros listeners espec√≠ficos
                console.log('üîÑ Listeners reativados');
            } catch (error) {
                console.warn('‚ö†Ô∏è Erro ao reativar listeners:', error);
            }
        }

        // Atualizar indicador visual de status
        function atualizarIndicadorStatus(status) {
            const indicator = document.getElementById('firebase-status');
            if (!indicator) return;

            const statusConfig = {
                'conectado': {
                    class: 'conectado',
                    icon: 'üü¢',
                    text: 'Firebase Online',
                    color: 'bg-green-500'
                },
                'desconectado': {
                    class: 'desconectado',
                    icon: 'üî¥',
                    text: 'Firebase Offline',
                    color: 'bg-red-500'
                },
                'reconectando': {
                    class: 'reconectando',
                    icon: 'üü°',
                    text: 'Reconectando...',
                    color: 'bg-yellow-500'
                },
                'erro': {
                    class: 'erro',
                    icon: '‚ö†Ô∏è',
                    text: 'Erro Conex√£o',
                    color: 'bg-orange-500'
                }
            };

            const config = statusConfig[status] || statusConfig['desconectado'];
            
            indicator.className = `firebase-status ${config.class}`;
            indicator.innerHTML = `
                <div class="w-2 h-2 ${config.color} rounded-full ${status === 'reconectando' ? 'animate-pulse' : ''}"></div>
                <span class="text-white text-xs">${config.icon} ${config.text}</span>
            `;
        }

        // Fun√ß√£o para for√ßar reconex√£o manual
        function forcarReconexaoFirebase() {
            console.log('üî•üîÑ For√ßando reconex√£o manual...');
            firebaseStatus.reconnectAttempts = 0;
            firebaseStatus.reconnectDelay = 1000;
            tentarReconectarFirebase();
        }

        // Configurar sistema de keepalive
        function configurarKeepAlive() {
            // Enviar ping peri√≥dico para manter conex√£o ativa
            setInterval(async () => {
                if (firebaseStatus.isOnline && window.firebaseDB) {
                    try {
                        const { doc, setDoc } = window.firebaseModules;
                        const keepAliveRef = doc(window.firebaseDB, 'sistema', 'keepalive');
                        
                        await setDoc(keepAliveRef, {
                            timestamp: new Date(),
                            client: navigator.userAgent.substring(0, 50)
                        }, { merge: true });
                        
                        console.log('üíì Keep-alive enviado');
                    } catch (error) {
                        console.warn('‚ö†Ô∏è Erro no keep-alive:', error);
                    }
                }
            }, 30000); // A cada 30 segundos
        }

        // Inicializar sistema de conectividade
        function inicializarSistemaConectividade() {
            console.log('üîß Inicializando sistema de conectividade Firebase...');
            
            // Definir status inicial como online
            firebaseStatus.isOnline = true;
            firebaseStatus.lastConnect = new Date();
            atualizarIndicadorStatus('conectado');
            
            configurarPersistenciaOffline();
            iniciarMonitorConectividade();
            configurarKeepAlive();
            
            // Verifica√ß√£o inicial
            setTimeout(() => {
                verificarConexaoFirebase();
            }, 2000);
            
            console.log('‚úÖ Sistema de conectividade inicializado - Firebase Online');
        }

        // Tornar fun√ß√µes dispon√≠veis globalmente
        window.firebaseConnectivity = {
            status: firebaseStatus,
            forcarReconexao: forcarReconexaoFirebase,
            verificarConexao: verificarConexaoFirebase,
            inicializar: inicializarSistemaConectividade
        };

        // ===== ESTRUTURAS DE DADOS DO SISTEMA JUR√çDICO =====

        // Registros de OAB liberados pelo administrador
        let registrosOAB = {
            "123456": {
                numero: "123456",
                ativo: true,
                utilizada: false,
                cargo: "advogado_criminal",
                cargoNome: "Advogado Criminal",
                nivel: 11,
                dominio: "@oab.org.br",
                liberadoPor: "Admin",
                dataLiberacao: "2025-01-07"
            },
            "234567": {
                numero: "234567", 
                ativo: true,
                utilizada: false,
                cargo: "promotor_justica",
                cargoNome: "Promotor de Justi√ßa",
                nivel: 8,
                dominio: "@mp.sp.gov.br",
                liberadoPor: "Admin",
                dataLiberacao: "2025-01-07"
            },
            "345678": {
                numero: "345678",
                ativo: true,
                utilizada: false,
                cargo: "juiz_direito",
                cargoNome: "Juiz de Direito",
                nivel: 4,
                dominio: "@tjsp.jus.br",
                liberadoPor: "Admin",
                dataLiberacao: "2025-01-07"
            },
            "456789": {
                numero: "456789",
                ativo: true,
                utilizada: false,
                cargo: "1_juiz_federal",
                cargoNome: "1¬∫ Juiz Federal",
                nivel: 1,
                dominio: "@stf.jus.br",
                liberadoPor: "Admin",
                dataLiberacao: "2025-01-07"
            }
        };

        // Estrutura judicial da cidade de BRASIL√ÇNDIA (GTA RP)
        let estruturaJudicial = {
            // SUPREMO TRIBUNAL FEDERAL (N√≠vel 1)
            "1_juiz_federal": {
                nome: "1¬∫ Juiz Federal",
                titulo: "1¬∫ Juiz Federal - Presidente do STF/STJ/STB",
                nivel: 1,
                icon: "üëë",
                permissoes: ["todas", "suprema_autoridade", "nomeacao_geral"],
                pode_nomear: ["2_juiz_federal", "3_juiz_federal", "1_desembargador", "2_desembargador", "3_desembargador", "1_juiz_estadual", "2_juiz_estadual", "3_juiz_estadual", "4_juiz_estadual", "1_procurador_geral_republica", "2_procurador_geral_justica", "3_procurador_geral_justica", "1_promotor", "2_promotor", "3_promotor", "4_promotor", "5_promotor", "6_promotor", "1_oficial_justica_2_instancia", "1_oficial_justica_1_instancia", "advogado", "defensor_publico"],
                dominio: "@stf.brasilandia.gov.br",
                salario: "R$ 9.500,00"
            },

            "2_juiz_federal": {
                nome: "2¬∫ Juiz Federal",
                titulo: "2¬∫ Juiz Federal",
                nivel: 2,
                icon: "üèõÔ∏è",
                permissoes: ["federal", "alta_instancia"],
                pode_nomear: [],
                dominio: "@stj.brasilandia.gov.br",
                salario: "R$ 8.500,00"
            },

            "3_juiz_federal": {
                nome: "3¬∫ Juiz Federal",
                titulo: "3¬∫ Juiz Federal",
                nivel: 3,
                icon: "üèõÔ∏è",
                permissoes: ["federal", "alta_instancia"],
                pode_nomear: [],
                dominio: "@stj.brasilandia.gov.br",
                salario: "R$ 8.000,00"
            },

            "1_desembargador": {
                nome: "1¬∫ Desembargador",
                titulo: "1¬∫ Desembargador - L√≠der do Tribunal",
                nivel: 4,
                icon: "‚öñÔ∏è",
                permissoes: ["segunda_instancia", "lideranca_tribunal"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 7.500,00"
            },

            "2_desembargador": {
                nome: "2¬∫ Desembargador",
                titulo: "2¬∫ Desembargador",
                nivel: 5,
                icon: "‚öñÔ∏è",
                permissoes: ["segunda_instancia"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 7.200,00"
            },

            "3_desembargador": {
                nome: "3¬∫ Desembargador",
                titulo: "3¬∫ Desembargador",
                nivel: 6,
                icon: "‚öñÔ∏è",
                permissoes: ["segunda_instancia"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 7.000,00"
            },

            "1_juiz_estadual": {
                nome: "1¬∫ Juiz Estadual",
                titulo: "1¬∫ Juiz Estadual - L√≠der da 1¬™ Inst√¢ncia",
                nivel: 7,
                icon: "üë®‚Äç‚öñÔ∏è",
                permissoes: ["primeira_instancia", "lideranca", "civil", "criminal"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 6.500,00"
            },

            "2_juiz_estadual": {
                nome: "2¬∫ Juiz Estadual",
                titulo: "2¬∫ Juiz Estadual - 1¬™ Inst√¢ncia",
                nivel: 8,
                icon: "üë®‚Äç‚öñÔ∏è",
                permissoes: ["primeira_instancia", "civil", "criminal"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 6.000,00"
            },

            "3_juiz_estadual": {
                nome: "3¬∫ Juiz Estadual",
                titulo: "3¬∫ Juiz Estadual - 1¬™ Inst√¢ncia",
                nivel: 8,
                icon: "üë®‚Äç‚öñÔ∏è",
                permissoes: ["primeira_instancia", "civil", "criminal"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 6.000,00"
            },

            "4_juiz_estadual": {
                nome: "4¬∫ Juiz Estadual",
                titulo: "4¬∫ Juiz Estadual - 1¬™ Inst√¢ncia",
                nivel: 8,
                icon: "üë®‚Äç‚öñÔ∏è",
                permissoes: ["primeira_instancia", "civil", "criminal"],
                pode_nomear: [],
                dominio: "@tj.brasilandia.gov.br",
                salario: "R$ 6.000,00"
            },

            // MINIST√âRIO P√öBLICO DA UNI√ÉO (N√≠vel 5)
            "1_procurador_geral_republica": {
                nome: "1¬∫ Procurador Geral da Rep√∫blica",
                titulo: "1¬∫ Procurador Geral da Rep√∫blica - Chefe do MP",
                nivel: 9,
                icon: "üõ°Ô∏è",
                permissoes: ["mp_geral", "lideranca_mp"],
                pode_nomear: [],
                dominio: "@mp.brasilandia.gov.br",
                salario: "R$ 5.000,00"
            },

            "2_procurador_geral_justica": {
                nome: "2¬∫ Procurador Geral de Justi√ßa",
                titulo: "2¬∫ Procurador Geral de Justi√ßa - 2¬™ Inst√¢ncia",
                nivel: 10,
                icon: "üõ°Ô∏è",
                permissoes: ["mp_segunda_instancia", "supervisao"],
                pode_nomear: [],
                dominio: "@mp.brasilandia.gov.br",
                salario: "R$ 4.500,00"
            },

            // MINIST√âRIO P√öBLICO ESTADUAL (N√≠vel 5)
            "procurador_geral_justica": {
                nome: "Procurador-Geral de Justi√ßa",
                titulo: "Procurador-Geral de Justi√ßa",
                nivel: 5,
                icon: "ÔøΩÔ∏è",
                permissoes: ["mp_estadual", "segunda_instancia", "recursos"],
                pode_nomear: ["procurador_justica", "promotor_justica"],
                dominio: "@mp.sp.gov.br"
            },

            "procurador_justica": {
                nome: "Procurador de Justi√ßa",
                titulo: "Procurador de Justi√ßa",
                nivel: 6,
                icon: "ÔøΩÔ∏è",
                permissoes: ["mp_estadual", "segunda_instancia", "recursos"],
                pode_nomear: ["promotor_justica"],
                dominio: "@mp.sp.gov.br"
            },

            "promotor_justica": {
                nome: "Promotor de Justi√ßa",
                titulo: "Promotor de Justi√ßa",
                nivel: 7,
                icon: "ÔøΩÔ∏è",
                permissoes: ["mp_estadual", "primeira_instancia", "denuncia", "investigacao"],
                pode_nomear: [],
                dominio: "@mp.sp.gov.br"
            },

            // DEFENSORIA P√öBLICA (N√≠vel 8)
            "defensor_publico_geral": {
                nome: "Defensor P√∫blico-Geral",
                titulo: "Defensor P√∫blico-Geral",
                nivel: 8,
                icon: "ÔøΩÔ∏è",
                permissoes: ["defensoria", "assistencia_juridica", "supervisao"],
                pode_nomear: ["defensor_publico"],
                dominio: "@defensoria.sp.gov.br"
            },

            "defensor_publico": {
                nome: "Defensor P√∫blico",
                titulo: "Defensor P√∫blico",
                nivel: 9,
                icon: "ÔøΩÔ∏è",
                permissoes: ["defensoria", "assistencia_juridica", "defesa_necessitados"],
                pode_nomear: [],
                dominio: "@defensoria.sp.gov.br"
            },

            // ADVOCACIA (N√≠vel 10)
            "advogado": {
                nome: "Advogado",
                titulo: "Advogado(a)",
                nivel: 10,
                icon: "ÔøΩ‚Äçüíº",
                permissoes: ["defesa", "peticoes", "representacao", "consultoria"],
                pode_nomear: [],
                dominio: "@oab.org.br"
            }
        };

        // Usu√°rios cadastrados no sistema
        let usuariosCadastrados = {};

        // Usu√°rio logado atualmente
        let usuarioLogado = null;        // ===== SISTEMA DE NOTIFICA√á√ïES EM TEMPO REAL =====
        let notificacoesAtivas = [];
        let contadorNotificacoes = 0;
        
        // Configurar listener para notifica√ß√µes em tempo real
        function iniciarListenerNotificacoes() {
            try {
                const { collection, query, where, onSnapshot } = window.firebaseModules;
                const db = window.firebaseDB;
                
                const notificacoesRef = collection(db, 'notificacoes');
                const q = query(notificacoesRef, where('ativo', '==', true));
                
                onSnapshot(q, (snapshot) => {
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            const notificacao = change.doc.data();
                            notificacao.id = change.doc.id;
                            mostrarNotificacaoTempo(notificacao);
                        }
                    });
                }, (error) => {
                    console.warn('Erro no listener de notifica√ß√µes:', error);
                });
                
                console.log('‚úÖ Listener de notifica√ß√µes iniciado');
            } catch (error) {
                console.error('‚ùå Erro ao iniciar listener:', error);
            }
        }
        
        // Mostrar notifica√ß√£o em tempo real
        function mostrarNotificacaoTempo(notificacao) {
            const container = document.getElementById('container-notificacoes') || criarContainerNotificacoes();
            
            const div = document.createElement('div');
            div.className = 'notification-toast transform translate-x-full';
            div.id = `notif-${Date.now()}`;
            
            div.innerHTML = `
                <div class="flex items-start gap-3">
                    <div class="notification-icon ${notificacao.tipo === 'urgente' ? 'bg-red-500' : notificacao.tipo === 'info' ? 'bg-blue-500' : 'bg-green-500'}">
                        <i class="fas ${notificacao.tipo === 'urgente' ? 'fa-exclamation-triangle' : notificacao.tipo === 'info' ? 'fa-info-circle' : 'fa-check-circle'} text-white"></i>
                    </div>
                    <div class="flex-1">
                        <div class="text-white font-semibold text-sm">${notificacao.titulo}</div>
                        <div class="text-gray-300 text-xs mt-1">${notificacao.mensagem}</div>
                        <div class="text-gray-400 text-xs mt-1">${new Date(notificacao.timestamp?.toDate()).toLocaleTimeString()}</div>
                    </div>
                    <button onclick="fecharNotificacao('${div.id}')" class="text-gray-400 hover:text-white text-sm">√ó</button>
                </div>
            `;
            
            container.appendChild(div);
            
            // Animar entrada
            setTimeout(() => {
                div.classList.remove('translate-x-full');
                div.classList.add('translate-x-0');
            }, 100);
            
            // Auto-remover ap√≥s 5 segundos
            setTimeout(() => {
                fecharNotificacao(div.id);
            }, 5000);
            
            // Tocar som se urgente
            if (notificacao.tipo === 'urgente') {
                tocarSomNotificacao();
            }
        }
        
        // Criar container de notifica√ß√µes
        function criarContainerNotificacoes() {
            const container = document.createElement('div');
            container.id = 'container-notificacoes';
            container.className = 'fixed top-4 right-4 z-50 space-y-2 max-w-sm';
            document.body.appendChild(container);
            return container;
        }
        
        // Fechar notifica√ß√£o
        function fecharNotificacao(id) {
            const notif = document.getElementById(id);
            if (notif) {
                notif.classList.add('translate-x-full', 'opacity-0');
                setTimeout(() => notif.remove(), 300);
            }
        }
        
        // Tocar som de notifica√ß√£o
        function tocarSomNotificacao() {
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTuG0vG6aygCHm3A7+OZURE8kdb2w3AlBTuR2O5bGgZChMny6rIcAzl+0fTQ');
                audio.play().catch(() => {}); // Ignorar erro se √°udio n√£o puder tocar
            } catch (e) {
                console.log('Som de notifica√ß√£o n√£o dispon√≠vel');
            }
        }
        
        // Fun√ß√£o para enviar notifica√ß√£o (para testes)
        async function enviarNotificacaoTeste(tipo = 'info') {
            console.log(`üß™ Testando notifica√ß√£o tipo: ${tipo}`);
            
            try {
                const { collection, addDoc } = window.firebaseModules;
                const db = window.firebaseDB;
                
                if (!db) {
                    throw new Error('Firebase n√£o inicializado');
                }
                
                const notificacaoData = {
                    titulo: tipo === 'urgente' ? 'üö® Alerta Urgente' : tipo === 'sucesso' ? '‚úÖ Opera√ß√£o Conclu√≠da' : '‚ÑπÔ∏è Informa√ß√£o',
                    mensagem: tipo === 'urgente' ? 'Situa√ß√£o cr√≠tica detectada no sistema!' : tipo === 'sucesso' ? 'Documento salvo com sucesso no Firebase' : 'Nova atualiza√ß√£o dispon√≠vel no sistema',
                    tipo: tipo,
                    timestamp: new Date(),
                    ativo: true,
                    usuario: 'Sistema de Teste'
                };
                
                await addDoc(collection(db, 'notificacoes'), notificacaoData);
                console.log('‚úÖ Notifica√ß√£o enviada ao Firebase:', tipo);
                console.log('üåê OUTROS USU√ÅRIOS online v√£o receber esta notifica√ß√£o!');
                
                // Tamb√©m mostrar notifica√ß√£o local imediatamente
                mostrarNotificacaoLocal(tipo);
                
            } catch (error) {
                console.error('‚ùå Erro ao enviar para Firebase:', error);
                console.log('üîÑ Mostrando notifica√ß√£o local como fallback');
                console.log('‚ö†Ô∏è ATEN√á√ÉO: Outros usu√°rios N√ÉO v√£o receber (Firebase offline)');
                // Fallback: mostrar notifica√ß√£o local se Firebase falhar
                mostrarNotificacaoLocal(tipo);
            }
        }
        
        // ===== NOTIFICA√á√ïES REAIS DO SISTEMA JUR√çDICO =====
        
        // Fun√ß√£o para enviar notifica√ß√µes globais do sistema jur√≠dico
        async function enviarNotificacaoGlobal(notificacao) {
            try {
                const { collection, addDoc } = window.firebaseModules;
                const db = window.firebaseDB;
                
                if (!db) {
                    console.warn('‚ö†Ô∏è Firebase offline - notifica√ß√£o n√£o ser√° enviada globalmente');
                    mostrarNotificacaoTempo(notificacao);
                    return false;
                }
                
                // Adicionar informa√ß√µes do sistema
                const notificacaoCompleta = {
                    ...notificacao,
                    sistema: 'Brasil√¢ndia RP - Sistema Jur√≠dico',
                    ativo: true,
                    lida: false,
                    timestampEnvio: new Date()
                };
                
                await addDoc(collection(db, 'notificacoes'), notificacaoCompleta);
                console.log('üåê Notifica√ß√£o jur√≠dica enviada globalmente:', notificacao.titulo);
                
                // Tamb√©m mostrar localmente
                mostrarNotificacaoTempo(notificacao);
                
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao enviar notifica√ß√£o global:', error);
                // Fallback: mostrar apenas localmente
                mostrarNotificacaoTempo(notificacao);
                return false;
            }
        }
        
        // Notificar quando documento √© salvo
        function notificarDocumentoSalvo(tipoDoc, nomeDoc) {
            const notificacao = {
                titulo: 'üìÑ Documento Salvo',
                mensagem: `${tipoDoc} "${nomeDoc}" foi salvo com sucesso no Firebase`,
                tipo: 'sucesso',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Notificar quando c√°lculo de pena √© feito
        function notificarCalculoPena(totalAnos, totalCrimes) {
            const notificacao = {
                titulo: '‚öñÔ∏è Pena Calculada',
                mensagem: `${totalCrimes} crime(s) ‚Ä¢ Pena total: ${totalAnos} anos`,
                tipo: 'info',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Notificar login de usu√°rio
        function notificarLogin(nomeUsuario, cargo) {
            const notificacao = {
                titulo: 'üëã Login Realizado',
                mensagem: `Bem-vindo, ${nomeUsuario} (${cargo})`,
                tipo: 'sucesso',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Notificar acesso a portal
        function notificarAcessoPortal(nomePortal) {
            const notificacao = {
                titulo: 'üèõÔ∏è Portal Acessado',
                mensagem: `Redirecionando para ${nomePortal}...`,
                tipo: 'info',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // ===== SISTEMA DE SINCRONIZA√á√ÉO ENTRE PORTAIS =====
        
        // Sincronizar processos entre diferentes portais do sistema jur√≠dico
        async function sincronizarProcessos(dadosProcesso) {
            try {
                const { collection, addDoc, doc, setDoc } = window.firebaseModules;
                const db = window.firebaseDB;
                
                if (!db) {
                    console.warn('‚ö†Ô∏è Firebase offline - processo n√£o sincronizado');
                    return false;
                }
                
                // Identificador √∫nico do processo
                const processoId = dadosProcesso.id || `PROC_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
                
                // Dados do processo para sincroniza√ß√£o
                const processoSincronizado = {
                    id: processoId,
                    tipo: dadosProcesso.tipo, // 'peticao', 'sentenca', 'denuncia', 'contrato', etc.
                    origem: dadosProcesso.origem, // portal que criou
                    destinatario: dadosProcesso.destinatario, // cargo/portal destinat√°rio
                    conteudo: dadosProcesso.conteudo,
                    status: dadosProcesso.status || 'pendente',
                    prioridade: dadosProcesso.prioridade || 'normal',
                    dataEnvio: new Date().toISOString(),
                    metadata: {
                        remetente: usuarioLogado ? usuarioLogado.nome : 'Sistema',
                        cargoRemetente: usuarioLogado ? usuarioLogado.cargo : 'sistema',
                        emailRemetente: usuarioLogado ? usuarioLogado.email : 'sistema@juridico.gov.br'
                    }
                };
                
                // Salvar na cole√ß√£o de processos sincronizados
                await setDoc(doc(db, 'processos_sincronizados', processoId), processoSincronizado);
                
                // Notificar todos os portais sobre o novo processo
                await enviarNotificacaoGlobal({
                    titulo: `üìÑ ${obterTituloProcesso(dadosProcesso.tipo)}`,
                    mensagem: `Novo processo de ${dadosProcesso.origem} para ${dadosProcesso.destinatario}`,
                    tipo: 'processo',
                    dados: {
                        processoId: processoId,
                        tipo: dadosProcesso.tipo,
                        origem: dadosProcesso.origem,
                        destinatario: dadosProcesso.destinatario
                    }
                });
                
                console.log('‚úÖ Processo sincronizado entre portais:', processoId);
                return true;
                
            } catch (error) {
                console.error('‚ùå Erro ao sincronizar processo:', error);
                return false;
            }
        }
        
        // Obter t√≠tulo apropriado para o tipo de processo
        function obterTituloProcesso(tipo) {
            const titulos = {
                'peticao': 'Peti√ß√£o Jur√≠dica',
                'sentenca': 'Senten√ßa Judicial',
                'denuncia': 'Den√∫ncia do MP',
                'contrato': 'Contrato Legal',
                'despacho': 'Despacho Judicial',
                'intimacao': 'Intima√ß√£o',
                'mandado': 'Mandado Judicial',
                'recurso': 'Recurso Legal',
                'habeas_corpus': 'Habeas Corpus',
                'acao_civil': 'A√ß√£o Civil'
            };
            return titulos[tipo] || 'Documento Jur√≠dico';
        }
        
        // Receber processos sincronizados
        async function receberProcessosSincronizados() {
            try {
                const { collection, onSnapshot, query, where, orderBy } = window.firebaseModules;
                const db = window.firebaseDB;
                
                if (!db) return;
                
                // Escutar novos processos para este portal
                const processosQuery = query(
                    collection(db, 'processos_sincronizados'),
                    where('destinatario', '==', usuarioLogado?.cargo || 'todos'),
                    orderBy('dataEnvio', 'desc')
                );
                
                const unsubscribe = onSnapshot(processosQuery, (snapshot) => {
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === 'added') {
                            const processo = change.doc.data();
                            mostrarProcessoRecebido(processo);
                        }
                    });
                });
                
                listeners.push(unsubscribe);
                
            } catch (error) {
                console.error('‚ùå Erro ao configurar listener de processos:', error);
            }
        }
        
        // Mostrar processo recebido na interface
        function mostrarProcessoRecebido(processo) {
            const notificacao = {
                titulo: `üì® ${obterTituloProcesso(processo.tipo)} Recebido`,
                mensagem: `De: ${processo.metadata.remetente} (${processo.origem})`,
                tipo: 'processo',
                processo: processo,
                timestamp: { toDate: () => new Date(processo.dataEnvio) }
            };
            
            mostrarNotificacaoTempo(notificacao);
            
            // Adicionar badge de processo pendente se n√£o estiver no portal correto
            if (processo.destinatario !== (usuarioLogado?.cargo || '')) {
                adicionarBadgeProcessoPendente();
            }
        }
        
        // Adicionar badge visual de processo pendente
        function adicionarBadgeProcessoPendente() {
            let badge = document.getElementById('badge-processo-pendente');
            if (!badge) {
                badge = document.createElement('div');
                badge.id = 'badge-processo-pendente';
                badge.className = 'fixed top-4 left-4 bg-red-500 text-white px-3 py-2 rounded-lg shadow-lg z-50 animate-pulse';
                badge.innerHTML = 'üì® Processos Pendentes';
                badge.onclick = () => abrirGerenciadorProcessos();
                document.body.appendChild(badge);
            }
        }
        
        // Abrir gerenciador de processos
        function abrirGerenciadorProcessos() {
            alert('üîÑ Sistema de Gerenciamento de Processos\n\nEsta funcionalidade permite visualizar e gerenciar todos os processos sincronizados entre os portais do sistema jur√≠dico.\n\nüìÑ Tipos de processos:\n‚Ä¢ Peti√ß√µes\n‚Ä¢ Senten√ßas\n‚Ä¢ Den√∫ncias\n‚Ä¢ Contratos\n‚Ä¢ Despachos\n‚Ä¢ Intima√ß√µes\n\nPara acessar, utilize o portal espec√≠fico do seu cargo.');
        }
        
        // Tornar fun√ß√µes dispon√≠veis globalmente
        window.sincronizarProcessos = sincronizarProcessos;
        window.receberProcessosSincronizados = receberProcessosSincronizados;
        
        // Notificar erro cr√≠tico
        function notificarErro(mensagemErro) {
            const notificacao = {
                titulo: 'üö® Erro do Sistema',
                mensagem: mensagemErro,
                tipo: 'urgente',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Notificar OAB liberada (para admins)
        function notificarOABLiberada(numeroOAB, nomeAdvogado) {
            const notificacao = {
                titulo: 'üÜî OAB Liberada',
                mensagem: `OAB ${numeroOAB} autorizada para ${nomeAdvogado}`,
                tipo: 'sucesso',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Notificar backup autom√°tico
        function notificarBackup() {
            const notificacao = {
                titulo: 'üíæ Backup Realizado',
                mensagem: 'Dados salvos automaticamente no Firebase',
                tipo: 'info',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Mostrar notifica√ß√£o local como fallback
        function mostrarNotificacaoLocal(tipo) {
            console.log(`üéØ Exibindo notifica√ß√£o local: ${tipo}`);
            
            const notificacao = {
                titulo: tipo === 'urgente' ? 'üö® Alerta Urgente' : tipo === 'sucesso' ? '‚úÖ Opera√ß√£o Conclu√≠da' : '‚ÑπÔ∏è Informa√ß√£o',
                mensagem: tipo === 'urgente' ? 'Situa√ß√£o cr√≠tica detectada!' : tipo === 'sucesso' ? 'Opera√ß√£o realizada com sucesso!' : 'Teste de notifica√ß√£o local',
                tipo: tipo,
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(notificacao);
        }
        
        // Fun√ß√£o de teste simplificada para debug
        function testeNotificacaoSimples(tipo) {
            console.log(`üöÄ Teste simples: ${tipo}`);
            console.log('üìç NOTIFICA√á√ÉO LOCAL: Aparece apenas no SEU computador');
            console.log('üåê Para notificar OUTROS usu√°rios, precisa Firebase online');
            mostrarNotificacaoLocal(tipo);
        }
        
        // Explica√ß√£o sobre notifica√ß√µes
        function explicarNotificacoes() {
            // Primeiro uma notifica√ß√£o visual simples
            const explicacao = {
                titulo: 'üéì Tutorial das Notifica√ß√µes',
                mensagem: 'Veja no console como funciona o sistema completo!',
                tipo: 'info',
                timestamp: { toDate: () => new Date() }
            };
            mostrarNotificacaoTempo(explicacao);
            
            // Explica√ß√£o detalhada no console
            console.log(`
üéì TUTORIAL COMPLETO DO SISTEMA DE NOTIFICA√á√ïES
================================================

ÔøΩ TIPOS DE NOTIFICA√á√ÉO:

1Ô∏è‚É£ NOTIFICA√á√ïES LOCAIS (üî¥ S√≥ Voc√™):
   ‚úÖ Funcionam SEMPRE (com ou sem internet)
   ‚úÖ Aparecem na SUA tela instantaneamente
   ‚úÖ N√ÉO precisam do Firebase
   ‚ùå Outros usu√°rios N√ÉO veem
   
   üìù Exemplos:
   ‚Ä¢ Teste Simples (bot√£o azul)
   ‚Ä¢ Teste Urgente Local (bot√£o vermelho)
   ‚Ä¢ Avisos de erro ou confirma√ß√£o

2Ô∏è‚É£ NOTIFICA√á√ïES GLOBAIS (üåê Para Todos):
   ‚úÖ Enviadas para TODOS online
   ‚úÖ Sincronizadas em tempo real
   ‚úÖ Salvas no banco Firebase
   ‚ùå S√ì funcionam com Firebase ONLINE
   
   üìù Exemplos:
   ‚Ä¢ OAB Liberada
   ‚Ä¢ Documento Salvo
   ‚Ä¢ Backup Realizado
   ‚Ä¢ Sistema Legal (calculadora, login)

üîÑ FUNCIONAMENTO PR√ÅTICO:

üì± Cen√°rio 1 - Firebase ONLINE:
   Seu PC ‚Üí Firebase ‚Üí Outros PCs ‚úÖ
   ‚ñ∂Ô∏è Voc√™ faz login = Todo mundo v√™
   ‚ñ∂Ô∏è Voc√™ salva doc = Todo mundo v√™
   ‚ñ∂Ô∏è Sistema faz backup = Todo mundo v√™

üì± Cen√°rio 2 - Firebase OFFLINE:
   Seu PC ‚Üí ‚ùå ‚Üí Outros PCs ‚ùå
   ‚ñ∂Ô∏è Notifica√ß√µes locais = S√ì voc√™ v√™
   ‚ñ∂Ô∏è Notifica√ß√µes globais = Falham
   ‚ñ∂Ô∏è Sistema continua funcionando

üéØ PARA RESPONDER SUA PERGUNTA:
"Se o Firebase estiver off, a pessoa no computador dela vai receber?"
‚ùå N√ÉO! Firebase off = sem comunica√ß√£o entre computadores

‚úÖ MAS: O sistema dela funciona normalmente, s√≥ n√£o recebe as notifica√ß√µes dos outros.

üß™ TESTE VOC√ä MESMO:
   ‚Ä¢ Use os bot√µes de teste para ver a diferen√ßa
   ‚Ä¢ Bot√µes azuis/vermelhos = local (sempre funciona)
   ‚Ä¢ Outros bot√µes = global (precisa Firebase)
            `);
            
            // Teste pr√°tico automatizado
            setTimeout(() => {
                console.log('üß™ DEMONSTRA√á√ÉO PR√ÅTICA:');
                console.log('‚è≥ Em 2 segundos: Notifica√ß√£o LOCAL (sempre funciona)');
                
                setTimeout(() => {
                    testeNotificacaoSimples();
                    console.log('‚úÖ ‚Üë Essa notifica√ß√£o SEMPRE aparece (local)');
                    
                    setTimeout(() => {
                        console.log('‚è≥ Em 2 segundos: Notifica√ß√£o GLOBAL (precisa Firebase)');
                        
                        setTimeout(() => {
                            if (window.firebaseDB) {
                                enviarNotificacaoTeste();
                                console.log('‚úÖ ‚Üë Essa notifica√ß√£o foi para TODOS online (global)');
                            } else {
                                console.log('‚ùå Firebase offline - notifica√ß√£o global falhou (como esperado)');
                            }
                        }, 2000);
                    }, 1000);
                }, 2000);
            }, 1000);
        }
        
        // Inicializar sistema de notifica√ß√µes quando a p√°gina carregar
        window.addEventListener('load', () => {
            console.log('üîÑ Inicializando sistema de notifica√ß√µes...');
            setTimeout(() => {
                iniciarListenerNotificacoes();
                console.log('‚úÖ Listener de notifica√ß√µes iniciado');
            }, 3000);
            
            setTimeout(() => {
                monitorarConexaoFirebase();
                console.log('‚úÖ Monitor Firebase iniciado');
            }, 1000);
            
            // Inicializar sistema de processos
            setTimeout(() => {
                inicializarSistemaProcessos();
                console.log('üèõÔ∏è Sistema de processos 24/7 iniciado');
            }, 2000);
        });
        
        // Tornar fun√ß√µes dispon√≠veis globalmente
        window.enviarNotificacaoTeste = enviarNotificacaoTeste;
        window.mostrarNotificacaoLocal = mostrarNotificacaoLocal;
        window.testeNotificacaoSimples = testeNotificacaoSimples;
        window.explicarNotificacoes = explicarNotificacoes;
        
        // Fun√ß√µes reais do sistema
        window.notificarDocumentoSalvo = notificarDocumentoSalvo;
        window.notificarCalculoPena = notificarCalculoPena;
        window.notificarLogin = notificarLogin;
        window.notificarAcessoPortal = notificarAcessoPortal;
        window.notificarErro = notificarErro;
        window.notificarOABLiberada = notificarOABLiberada;
        window.notificarBackup = notificarBackup;
        
        // Monitorar conex√£o Firebase
        function monitorarConexaoFirebase() {
            const statusEl = document.getElementById('firebase-status');
            
            // Fun√ß√£o para verificar status
            const verificarStatus = async () => {
                try {
                    const { doc, getDoc } = window.firebaseModules;
                    const db = window.firebaseDB;
                    
                    if (!db) {
                        throw new Error('Firebase DB n√£o dispon√≠vel');
                    }
                    
                    // Tentar ler um documento simples
                    const testRef = doc(db, 'system', 'status');
                    await getDoc(testRef);
                    
                    // Se chegou aqui, est√° conectado
                    if (statusEl) {
                        statusEl.className = 'firebase-status conectado';
                        statusEl.innerHTML = `
                            <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                            <span class="text-white text-xs">Firebase Online</span>
                        `;
                    }
                    console.log('‚úÖ Firebase conectado');
                } catch (error) {
                    // Erro de conex√£o
                    if (statusEl) {
                        statusEl.className = 'firebase-status desconectado';
                        statusEl.innerHTML = `
                            <div class="w-2 h-2 bg-red-400 rounded-full"></div>
                            <span class="text-white text-xs">Firebase Offline</span>
                        `;
                    }
                    console.warn('‚ö†Ô∏è Firebase desconectado:', error.message);
                }
            };
            
            // Verificar imediatamente
            verificarStatus();
            
            // Verificar a cada 15 segundos
            setInterval(verificarStatus, 15000);
        }
        
        // Log final de inicializa√ß√£o
        console.log('üî• Firebase inicializado com sucesso!');
        console.log('üìã Fun√ß√µes de teste dispon√≠veis globalmente');
        console.log('üß™ Use: enviarNotificacaoTeste("info"), enviarNotificacaoTeste("sucesso"), enviarNotificacaoTeste("urgente")');
        
        // Sistema de backup autom√°tico
        function iniciarBackupAutomatico() {
            // Backup a cada 10 minutos
            setInterval(() => {
                if (typeof notificarBackup === 'function') {
                    notificarBackup();
                }
                console.log('üíæ Backup autom√°tico realizado');
            }, 600000); // 10 minutos
        }
        
        // Iniciar backup autom√°tico
        setTimeout(iniciarBackupAutomatico, 30000); // Come√ßar ap√≥s 30 segundos
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        /* Reset e configura√ß√µes base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body { 
            font-family: 'Inter', sans-serif; 
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* Sistema de Notifica√ß√µes Firebase */
        .notification-toast {
            background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(31, 41, 55, 0.95));
            backdrop-filter: blur(12px);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            max-width: 320px;
            border-left: 4px solid #3b82f6;
        }
        
        .notification-toast:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        
        .notification-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        /* Indicador de status do Firebase */
        .firebase-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(17, 24, 39, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(75, 85, 99, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            z-index: 40;
        }
        
        .firebase-status.conectado {
            border-left: 4px solid #10b981;
        }
        
        .firebase-status.desconectado {
            border-left: 4px solid #ef4444;
        }
        
        /* Bot√£o de teste de notifica√ß√µes */
        .btn-teste-notif {
            position: fixed;
            right: 20px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            z-index: 40;
            font-weight: 500;
        }
        
        .btn-teste-notif:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        /* Responsividade para containers */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        @media (min-width: 640px) {
            .container { padding: 0 1.5rem; }
        }
        
        @media (min-width: 1024px) {
            .container { padding: 0 2rem; }
        }
        
        /* Header responsivo */
        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            text-align: center;
        }
        
        @media (min-width: 768px) {
            .header-content {
                flex-direction: row;
                justify-content: space-between;
                text-align: left;
            }
        }
        
        .header-logos {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        @media (min-width: 768px) {
            .header-logos {
                justify-content: flex-start;
            }
        }
        
        .header-logos img {
            height: 3rem;
            width: auto;
        }
        
        @media (min-width: 768px) {
            .header-logos img {
                height: 4rem;
            }
        }
        
        .header-title h1 {
            font-size: 1.5rem;
            line-height: 1.2;
        }
        
        @media (min-width: 640px) {
            .header-title h1 {
                font-size: 2rem;
            }
        }
        
        @media (min-width: 768px) {
            .header-title h1 {
                font-size: 2.5rem;
            }
        }
        
        .header-title p {
            font-size: 0.875rem;
        }
        
        @media (min-width: 640px) {
            .header-title p {
                font-size: 1rem;
            }
        }
        
        @media (min-width: 768px) {
            .header-title p {
                font-size: 1.125rem;
            }
        }
        
        .header-status {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }
        
        @media (min-width: 768px) {
            .header-status {
                align-items: flex-end;
            }
        }
        
        /* Login responsivo */
        .login-container {
            padding: 1rem;
            margin: 0.5rem;
            max-width: 95vw;
            width: 100%;
            max-height: 95vh;
            overflow-y: auto;
        }
        
        @media (min-width: 640px) {
            .login-container {
                padding: 2rem;
                margin: 1rem;
                max-width: 28rem;
                max-height: 90vh;
            }
        }
        
        .login-title {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }
        
        @media (min-width: 640px) {
            .login-title {
                font-size: 2.5rem;
            }
        }
        
        .login-subtitle {
            font-size: 1rem;
        }
        
        @media (min-width: 640px) {
            .login-subtitle {
                font-size: 1.25rem;
            }
        }
        
        .login-emoji {
            font-size: 4rem;
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 640px) {
            .login-emoji {
                font-size: 5rem;
            }
        }
        
        /* Menu principal responsivo */
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        @media (min-width: 640px) {
            .menu-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }
        }
        
        @media (min-width: 1024px) {
            .menu-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        .menu-item {
            padding: 1rem;
            min-height: 8rem;
        }
        
        @media (min-width: 640px) {
            .menu-item {
                padding: 1.5rem;
                min-height: 10rem;
            }
        }
        
        .menu-item-emoji {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        @media (min-width: 640px) {
            .menu-item-emoji {
                font-size: 3rem;
            }
        }
        
        .menu-item-title {
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }
        
        @media (min-width: 640px) {
            .menu-item-title {
                font-size: 1.25rem;
            }
        }
        
        .menu-item-description {
            font-size: 0.75rem;
        }
        
        @media (min-width: 640px) {
            .menu-item-description {
                font-size: 0.875rem;
            }
        }
        
        /* Se√ß√µes de conte√∫do responsivas */
        .content-section {
            padding: 1rem;
        }
        
        @media (min-width: 768px) {
            .content-section {
                padding: 2rem;
            }
        }
        
        .section-header {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .section-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }
        
        .section-title {
            font-size: 1.5rem;
        }
        
        @media (min-width: 640px) {
            .section-title {
                font-size: 1.875rem;
            }
        }
        
        /* Grids responsivos */
        .responsive-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        @media (min-width: 768px) {
            .responsive-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1.5rem;
            }
        }
        
        @media (min-width: 1024px) {
            .responsive-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 2rem;
            }
        }
        
        .responsive-grid-2 {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            max-height: min(600px, calc(100vh - 200px));
            overflow-y: auto;
            padding: 1rem;
        }
        
        /* Estilo da barra de rolagem para melhor visual */
        .responsive-grid-2::-webkit-scrollbar {
            width: 8px;
        }
        
        .responsive-grid-2::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }
        
        .responsive-grid-2::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }
        
        .responsive-grid-2::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        @media (min-width: 640px) {
            .responsive-grid-2 {
                gap: 1.5rem;
                padding: 1.5rem;
            }
        }
        
        @media (min-width: 1024px) {
            .responsive-grid-2 {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
                padding: 2rem;
            }
        }
        
        @media (max-height: 800px) {
            .responsive-grid-2 {
                max-height: calc(100vh - 150px);
            }
        }

        /* Tabelas responsivas */
        .responsive-table {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .responsive-table table {
            min-width: 100%;
            white-space: nowrap;
        }
        
        @media (max-width: 640px) {
            .responsive-table table {
                font-size: 0.875rem;
            }
            
            .responsive-table td,
            .responsive-table th {
                padding: 0.5rem !important;
            }
        }
        
        /* Formul√°rios responsivos */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        @media (min-width: 768px) {
            .form-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem;
            font-size: 1rem;
        }
        
        @media (min-width: 640px) {
            .form-input {
                padding: 1rem;
            }
        }
        
        /* Bot√µes responsivos */
        .btn {
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            width: 100%;
        }
        
        @media (min-width: 640px) {
            .btn {
                padding: 1rem 2rem;
                font-size: 1rem;
                width: auto;
            }
        }
        
        .btn-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        @media (min-width: 640px) {
            .btn-group {
                flex-direction: row;
                gap: 1rem;
            }
        }
        
        /* Cards responsivos */
        .card {
            padding: 1rem;
        }
        
        @media (min-width: 640px) {
            .card {
                padding: 1.5rem;
            }
        }
        
        /* Modais responsivos */
        .modal-content {
            margin: 1rem;
            max-width: calc(100vw - 2rem);
            max-height: calc(100vh - 2rem);
            overflow-y: auto;
        }
        
        @media (min-width: 640px) {
            .modal-content {
                margin: 2rem;
                max-width: 90vw;
            }
        }
        
        @media (min-width: 1024px) {
            .modal-content {
                max-width: 80vw;
            }
        }
        
        /* Documentos responsivos */
        .document-content {
            padding: 1rem;
            font-size: 0.875rem;
            line-height: 1.4;
        }
        
        @media (min-width: 640px) {
            .document-content {
                padding: 1.5rem;
                font-size: 1rem;
                line-height: 1.6;
            }
        }
        
        .document-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .document-header {
                flex-direction: row;
                justify-content: space-between;
            }
        }
        
        .document-logo {
            width: 60px;
            height: 60px;
        }
        
        @media (min-width: 640px) {
            .document-logo {
                width: 80px;
                height: 80px;
            }
        }
        
        /* Estat√≠sticas responsivas */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        @media (min-width: 640px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        /* Cron√¥metro responsivo */
        .cronometro-display {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 640px) {
            .cronometro-display {
                font-size: 3.75rem;
            }
        }
        
        /* Sistema mobile responsivo */
        .mobile-simulator {
            max-width: 20rem;
            margin: 0 auto;
        }
        
        @media (min-width: 1024px) {
            .mobile-simulator {
                max-width: 24rem;
            }
        }
        
        /* Painel admin responsivo */
        .admin-panel {
            margin-bottom: 2rem;
        }
        
        .admin-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        
        @media (min-width: 768px) {
            .admin-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .admin-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Anima√ß√µes */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .slide-in { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { transform: translateX(-100%); } to { transform: translateX(0); } }
        .pulse-glow { animation: pulseGlow 2s infinite; }
        @keyframes pulseGlow { 0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); } 50% { box-shadow: 0 0 40px rgba(255, 215, 0, 0.6); } }
        
        /* Anima√ß√µes do Login */
        .animate-pulse-glow { animation: pulseGlow 3s ease-in-out infinite; }
        .animate-slide-in { animation: slideInRight 0.5s ease-out; }
        @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        /* Efeitos de foco nos inputs */
        .login-input:focus { transform: scale(1.02); transition: all 0.3s ease; }
        
        /* Anima√ß√£o de loading */
        .animate-spin-slow { animation: spin 2s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        /* Utilit√°rios de responsividade */
        .hidden-mobile {
            display: none;
        }
        
        @media (min-width: 768px) {
            .hidden-mobile {
                display: block;
            }
        }
        
        .visible-mobile {
            display: block;
        }
        
        @media (min-width: 768px) {
            .visible-mobile {
                display: none;
            }
        }
        
        /* Scroll suave */
        html {
            scroll-behavior: smooth;
        }
        
        /* Melhorias para touch */
        @media (hover: none) and (pointer: coarse) {
            .menu-item:hover {
                transform: none;
            }
            
            .menu-item:active {
                transform: scale(0.98);
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-gray-800 to-slate-900 min-h-screen">
    <!-- Header Principal Moderno -->
    <div class="bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 text-white py-3 px-4 shadow-xl border-b border-slate-700/50 backdrop-blur-lg">
        <div class="container mx-auto">
            <div class="flex items-center justify-between">
                <!-- Logo e T√≠tulo -->
                <div class="flex items-center space-x-4">
                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center shadow-lg">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-white">Sistema Jur√≠dico</h1>
                        <p class="text-xs text-slate-400">Brasil√¢ndia RP</p>
                    </div>
                </div>

                <!-- Status e Controles -->
                <div class="flex items-center space-x-3">
                    <!-- Status Online -->
                    <div class="flex items-center space-x-2 bg-green-500/10 px-3 py-2.5 rounded-lg border border-green-500/20 h-12">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        <span class="text-xs text-green-400 font-medium">Online</span>
                    </div>

                    <!-- Informa√ß√µes do Usu√°rio -->
                    <div id="usuario-logado" class="flex items-center space-x-3 bg-slate-700/50 px-3 py-2.5 rounded-lg border border-slate-600/50 h-12 hidden">
                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center relative flex-shrink-0">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                            <div class="absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border border-slate-800"></div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="text-sm font-medium text-white truncate" id="nome-usuario"></div>
                            <div class="text-xs text-slate-400 truncate" id="cargo-usuario"></div>
                        </div>
                    </div>

                    <!-- Bot√£o Admin -->
                    <button onclick="mostrarPainelAdmin()" class="bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 px-3 py-2.5 rounded-lg border border-red-500/20 transition-all hidden text-sm h-12 flex items-center" id="btn-admin">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="hidden sm:inline">Admin</span>
                    </button>

                    <!-- Bot√£o Escolher Portais -->
                    <button onclick="mostrarEscolhaPortalUniversal()" class="bg-blue-500/10 hover:bg-blue-500/20 text-blue-400 hover:text-blue-300 px-3 py-2.5 rounded-lg border border-blue-500/20 transition-all hidden text-sm h-12 flex items-center" id="btn-portais">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M12 2l8 4v6c0 5.55-3.84 10.74-9 12-5.16-1.26-9-6.45-9-12V6l8-4m0 2.18L6 8.14v5.86c0 3.05 1.92 6.05 6 7.74 4.08-1.69 6-4.69 6-7.74V8.14l-6-4.96z"/>
                        </svg>
                        <span class="hidden sm:inline">Portais</span>
                    </button>

                    <!-- Bot√£o Logout -->
                    <button onclick="logout()" class="bg-slate-600/50 hover:bg-slate-600 text-slate-300 hover:text-white px-3 py-2.5 rounded-lg border border-slate-600/50 transition-all hidden text-sm h-12 flex items-center" id="btn-logout">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                        </svg>
                        <span class="hidden sm:inline">Sair</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sistema de Login -->
    <div id="login-sistema" class="fixed inset-0 bg-gradient-to-br from-slate-900 via-gray-800 to-slate-900 backdrop-blur-xl z-50 flex items-center justify-center p-1 sm:p-4 overflow-y-auto min-h-screen">
        <!-- Efeitos de fundo com gradientes -->
        <div class="absolute inset-0 overflow-hidden">
            <div class="absolute -top-20 sm:-top-40 -right-20 sm:-right-40 w-40 sm:w-80 h-40 sm:h-80 bg-gradient-to-br from-amber-500/20 via-yellow-500/15 to-amber-600/20 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute -bottom-20 sm:-bottom-40 -left-20 sm:-left-40 w-40 sm:w-80 h-40 sm:h-80 bg-gradient-to-tr from-gray-600/15 via-slate-600/10 to-gray-700/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 sm:w-96 h-48 sm:h-96 bg-gradient-to-r from-yellow-600/8 via-amber-500/5 to-gray-600/8 rounded-full blur-3xl animate-spin" style="animation-duration: 20s;"></div>
            <div class="absolute top-1/4 right-1/4 w-32 sm:w-64 h-32 sm:h-64 bg-gradient-to-bl from-amber-400/10 via-yellow-600/8 to-amber-700/12 rounded-full blur-2xl animate-pulse" style="animation-delay: 2s;"></div>
            <div class="absolute bottom-1/4 left-1/4 w-32 sm:w-64 h-32 sm:h-64 bg-gradient-to-tr from-slate-500/10 via-gray-600/8 to-slate-700/12 rounded-full blur-2xl animate-pulse" style="animation-delay: 3s;"></div>
        </div>
        
        <div class="relative w-full max-w-xs sm:max-w-md mx-auto my-4">
            <!-- Container principal com gradiente -->
            <div class="bg-gradient-to-br from-gray-800/90 via-slate-800/85 to-gray-900/90 backdrop-blur-2xl rounded-2xl sm:rounded-3xl border-2 border-amber-500/50 shadow-2xl p-4 sm:p-8 relative overflow-hidden">
                <!-- Brilhos e efeitos de gradiente -->
                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-16 sm:w-32 h-px bg-gradient-to-r from-transparent via-amber-400/60 to-transparent"></div>
                <div class="absolute inset-0 bg-gradient-to-br from-amber-500/5 via-transparent to-slate-600/5 rounded-2xl sm:rounded-3xl"></div>
                <div class="absolute -inset-1 bg-gradient-to-r from-amber-500/20 via-yellow-500/10 to-amber-600/20 rounded-2xl sm:rounded-3xl blur opacity-30"></div>
                
                <!-- Header do Login com gradientes -->
                <div class="text-center mb-4 sm:mb-6 relative z-10">
                    <div class="relative inline-block mb-3 sm:mb-4">
                        <div class="text-2xl sm:text-4xl mb-1 relative z-10">‚öñÔ∏è</div>
                        <div class="absolute inset-0 bg-gradient-to-r from-amber-500/40 via-yellow-500/30 to-amber-600/40 rounded-full blur-xl animate-pulse"></div>
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/20 to-amber-600/20 rounded-full blur-lg animate-pulse" style="animation-delay: 0.5s;"></div>
                    </div>
                    <h1 class="text-base sm:text-xl font-bold text-transparent bg-gradient-to-r from-amber-300 via-yellow-400 to-amber-500 bg-clip-text mb-1 sm:mb-2 drop-shadow-lg">
                        SISTEMA JUR√çDICO
                    </h1>
                    <p class="text-transparent bg-gradient-to-r from-gray-300 via-slate-200 to-gray-300 bg-clip-text font-medium text-xs sm:text-sm">Brasil√¢ndia RP</p>
                    <div class="w-10 sm:w-14 h-0.5 bg-gradient-to-r from-amber-500 via-yellow-500 to-amber-600 mx-auto mt-2 sm:mt-3 rounded-full shadow-lg shadow-amber-500/30"></div>
                </div>
                
                <!-- Formul√°rio de Login -->
                <form id="form-login" class="space-y-3 sm:space-y-4">
                    <div class="space-y-1 sm:space-y-2">
                        <label class="block text-white/90 font-medium text-xs sm:text-sm ml-1">Email</label>
                        <div class="relative group">
                            <div class="absolute inset-0 bg-gradient-to-r from-amber-500/15 via-yellow-500/10 to-amber-600/15 rounded-lg sm:rounded-xl blur opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            <input 
                                type="email" 
                                id="login-usuario" 
                                placeholder="Digite seu email..." 
                                class="relative w-full px-3 sm:px-4 py-3 sm:py-4 rounded-lg sm:rounded-xl bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-amber-500 focus:bg-gray-700/80 transition-all duration-300 text-sm backdrop-blur-sm hover:bg-gray-700/70 focus:shadow-lg focus:shadow-amber-500/20 focus:outline-none"
                                autocomplete="email"
                            >
                            <div class="absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-hover:text-yellow-500 transition-colors duration-300">
                                <svg class="w-4 sm:w-5 h-4 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-1 sm:space-y-2">
                        <label class="block text-white/90 font-medium text-xs sm:text-sm ml-1">Senha</label>
                        <div class="relative group">
                            <div class="absolute inset-0 bg-gradient-to-r from-amber-500/15 via-yellow-500/10 to-amber-600/15 rounded-lg sm:rounded-xl blur opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            <input 
                                type="password" 
                                id="login-senha" 
                                placeholder="Digite sua senha..." 
                                class="relative w-full px-3 sm:px-4 py-3 sm:py-4 rounded-lg sm:rounded-xl bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-amber-500 focus:bg-gray-700/80 transition-all duration-300 text-sm backdrop-blur-sm hover:bg-gray-700/70 focus:shadow-lg focus:shadow-amber-500/20 focus:outline-none"
                                autocomplete="current-password"
                            >
                            <div class="absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-gray-400 group-hover:text-yellow-500 transition-colors duration-300">
                                <svg class="w-4 sm:w-5 h-4 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bot√£o de Login com gradiente -->
                    <button 
                        type="submit"
                        id="btn-entrar"
                        class="relative w-full group overflow-hidden"
                    >
                        <div class="absolute inset-0 bg-gradient-to-r from-amber-600 via-yellow-600 to-amber-700 rounded-lg sm:rounded-xl shadow-lg shadow-amber-600/30"></div>
                        <div class="absolute inset-0 bg-gradient-to-r from-amber-500 via-yellow-500 to-amber-600 rounded-lg sm:rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-xl shadow-amber-500/40"></div>
                        <div class="absolute inset-0 bg-gradient-to-br from-yellow-400/20 to-transparent rounded-lg sm:rounded-xl"></div>
                        <div class="relative px-4 sm:px-6 py-3 sm:py-4 text-black font-bold text-xs sm:text-sm tracking-wide">
                            <span id="texto-botao" class="flex items-center justify-center space-x-1 sm:space-x-2">
                                <svg class="w-4 sm:w-5 h-4 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                                </svg>
                                <span class="hidden sm:inline">ENTRAR NO SISTEMA</span>
                                <span class="sm:hidden">ENTRAR</span>
                            </span>
                            <span id="loading-botao" class="hidden flex items-center justify-center space-x-1 sm:space-x-2">
                                <div class="w-3 sm:w-4 h-3 sm:h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                                <span class="hidden sm:inline">VERIFICANDO...</span>
                                <span class="sm:hidden">...</span>
                            </span>
                        </div>
                    </button>
                </form>
                
                <!-- Mensagem de Status -->
                <div id="mensagem-login" class="mt-4 sm:mt-6 p-3 sm:p-4 rounded-lg sm:rounded-xl hidden backdrop-blur-sm">
                    <p id="texto-mensagem" class="text-center font-medium text-xs sm:text-sm"></p>
                </div>
                
                <!-- Se√ß√£o de Informa√ß√µes -->
                <div class="mt-4 sm:mt-6 space-y-2 sm:space-y-3">
                    <div class="bg-green-600/20 rounded-lg sm:rounded-xl p-2 sm:p-3 border border-green-500/40 backdrop-blur-sm shadow-lg shadow-green-600/10">
                        <div class="flex items-center space-x-2 mb-1 sm:mb-2">
                            <div class="w-5 sm:w-6 h-5 sm:h-6 bg-green-600 rounded-md flex items-center justify-center shadow-md shadow-green-600/30">
                                <svg class="w-3 sm:w-4 h-3 sm:h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <h3 class="text-green-200 font-semibold text-xs sm:text-sm">Acesso Seguro</h3>
                        </div>
                        <p class="text-gray-300 text-xs">Sistema protegido com autentica√ß√£o avan√ßada</p>
                    </div>
                    
                    <div class="bg-amber-600/20 rounded-lg sm:rounded-xl p-2 sm:p-3 border border-amber-500/40 backdrop-blur-sm shadow-lg shadow-amber-600/10">
                        <div class="flex items-center space-x-2 mb-1 sm:mb-2">
                            <div class="w-5 sm:w-6 h-5 sm:h-6 bg-amber-600 rounded-md flex items-center justify-center shadow-md shadow-amber-600/30">
                                <svg class="w-3 sm:w-4 h-3 sm:h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path>
                                </svg>
                            </div>
                            <h3 class="text-amber-200 font-semibold text-xs sm:text-sm">Primeiro Acesso?</h3>
                        </div>
                        <p class="text-gray-300 text-xs mb-2">Cadastre-se com seu n√∫mero OAB</p>
                        <button 
                            onclick="mostrarPrimeiroAcesso()" 
                            class="w-full bg-amber-600 hover:bg-amber-500 text-black px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg transition-all duration-300 font-medium text-xs backdrop-blur-sm border border-amber-500/40 shadow-md shadow-amber-600/20 hover:shadow-lg hover:shadow-amber-500/30"
                        >
                            <span class="hidden sm:inline">Cadastrar Agora</span>
                            <span class="sm:hidden">Cadastrar</span>
                        </button>
                    </div>
                </div>
                
                <!-- Rodap√© -->
                <div class="mt-3 sm:mt-4 text-center border-t border-gray-600/30 pt-2 sm:pt-3">
                    <p class="text-gray-400 text-xs">Sistema Seguro v2025.1</p>
                    <p class="text-gray-500 text-xs">Tribunal de Justi√ßa - SP</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Sistema de Membros Online Lateral (estilo Discord) -->
    <div id="membros-online-sidebar" class="fixed top-0 right-0 h-full w-80 bg-gradient-to-b from-slate-800 to-slate-900 border-l border-slate-700/50 shadow-2xl transform translate-x-full transition-transform duration-300 z-40 hidden">
        <!-- Header do Sidebar -->
        <div class="flex items-center justify-between p-4 border-b border-slate-700/50">
            <div class="flex items-center space-x-2">
                <div class="w-6 h-6 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center">
                    <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-1c0-2.66 5.33-4 8-4s8 1.34 8 4v1H4zM12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/>
                    </svg>
                </div>
                <h3 class="text-white font-semibold">Membros Online</h3>
                <span class="bg-green-500/20 text-green-400 text-xs px-2 py-1 rounded-full font-medium" id="contador-membros">0</span>
            </div>
            <button onclick="fecharMembrosOnline()" class="text-slate-400 hover:text-white transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
            </button>
        </div>

        <!-- Lista de Membros -->
        <div class="flex-1 overflow-y-auto p-4" id="lista-membros-sidebar">
            <!-- Membros ser√£o inseridos aqui dinamicamente -->
        </div>

        <!-- Footer do Sidebar -->
        <div class="p-4 border-t border-slate-700/50">
            <div class="text-xs text-slate-400 text-center">
                <p>Atualizado automaticamente</p>
                <p>a cada 30 segundos</p>
            </div>
        </div>
    </div>

    <!-- Bot√£o Flutuante para Abrir Membros Online -->
    <div id="btn-membros-online" class="fixed top-20 right-4 z-30 hidden">
        <button onclick="abrirMembrosOnline()" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white p-3 rounded-full shadow-lg transition-all hover:scale-110 group">
            <div class="flex items-center space-x-2">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-1c0-2.66 5.33-4 8-4s8 1.34 8 4v1H4zM12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/>
                </svg>
                <span class="bg-green-400 text-green-900 text-xs px-2 py-1 rounded-full font-bold group-hover:bg-white group-hover:text-green-600 transition-colors" id="contador-btn">0</span>
            </div>
        </button>
    </div>

    <!-- Modal de Primeiro Acesso -->
    <div id="primeiro-acesso" class="fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto hidden">
        <div class="bg-gradient-to-br from-gray-800/90 via-slate-800/85 to-gray-900/90 backdrop-blur-2xl rounded-2xl sm:rounded-3xl border-2 border-amber-500/50 shadow-2xl p-4 sm:p-8 relative overflow-hidden max-w-xs sm:max-w-md mx-4 my-4">
            <!-- Efeitos de fundo -->
            <div class="absolute inset-0 bg-gradient-to-br from-amber-500/5 via-transparent to-slate-600/5 rounded-2xl sm:rounded-3xl"></div>
            <div class="absolute -inset-1 bg-gradient-to-r from-amber-500/20 via-yellow-500/10 to-amber-600/20 rounded-2xl sm:rounded-3xl blur opacity-30"></div>
            
            <!-- Header -->
            <div class="text-center mb-4 sm:mb-6 relative z-10">
                <div class="text-2xl sm:text-4xl mb-2 sm:mb-3">üÜî</div>
                <h2 class="text-lg sm:text-xl font-bold text-transparent bg-gradient-to-r from-amber-300 via-yellow-400 to-amber-500 bg-clip-text mb-1 sm:mb-2">
                    PRIMEIRO ACESSO
                </h2>
                <p class="text-xs sm:text-sm text-gray-300">Cadastre-se com seu n√∫mero OAB</p>
            </div>
            
            <!-- Formul√°rio -->
            <form id="form-primeiro-acesso" class="space-y-3 sm:space-y-4">
                <div class="space-y-1 sm:space-y-2">
                    <label class="block text-white/90 font-medium text-xs sm:text-sm ml-1">N√∫mero OAB</label>
                    <input 
                        type="text" 
                        id="oab-recebida" 
                        placeholder="Digite o n√∫mero OAB liberado..." 
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-amber-500 focus:bg-gray-700/80 transition-all duration-300 text-xs sm:text-sm"
                        oninput="verificarOABLiberada()"
                    >
                </div>
                
                <!-- Informa√ß√µes do cargo (aparece quando OAB v√°lida) -->
                <div id="info-cargo" class="bg-green-500/20 rounded-lg p-3 border border-green-500/50 hidden">
                    <h3 class="text-green-300 font-bold text-xs sm:text-sm mb-2">‚úÖ OAB Liberada!</h3>
                    <div class="text-xs space-y-1">
                        <p class="text-white">Cargo: <span id="cargo-info" class="text-green-300 font-medium"></span></p>
                        <p class="text-white">N√≠vel: <span id="nivel-info" class="text-yellow-300 font-medium"></span></p>
                        <p class="text-white">Email: <span id="dominio-info" class="text-blue-300 font-medium"></span></p>
                    </div>
                </div>
                
                <div class="space-y-1 sm:space-y-2">
                    <label class="block text-white/90 font-medium text-xs sm:text-sm ml-1">Nome Completo</label>
                    <input 
                        type="text" 
                        id="nome-completo" 
                        placeholder="Digite seu nome completo..." 
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-amber-500 focus:bg-gray-700/80 transition-all duration-300 text-xs sm:text-sm"
                        oninput="atualizarPreviewEmail()"
                    >
                </div>
                
                <!-- Preview do email (aparece quando nome preenchido) -->
                <div id="preview-email" class="bg-blue-500/20 rounded-lg p-3 border border-blue-500/50 hidden">
                    <h4 class="text-blue-300 font-bold text-xs mb-1">üìß Seu email ser√°:</h4>
                    <p class="text-white text-xs font-mono bg-gray-900/50 p-2 rounded" id="email-preview"></p>
                </div>
                
                <div class="space-y-1 sm:space-y-2">
                    <label class="block text-white/90 font-medium text-xs sm:text-sm ml-1">Nova Senha</label>
                    <input 
                        type="password" 
                        id="nova-senha" 
                        placeholder="Digite uma senha segura..." 
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-amber-500 focus:bg-gray-700/80 transition-all duration-300 text-xs sm:text-sm"
                    >
                </div>
                
                <div class="space-y-1 sm:space-y-2">
                    <label class="block text-white/90 font-medium text-xs sm:text-sm ml-1">Confirmar Senha</label>
                    <input 
                        type="password" 
                        id="confirmar-senha" 
                        placeholder="Confirme sua senha..." 
                        class="w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-amber-500 focus:bg-gray-700/80 transition-all duration-300 text-xs sm:text-sm"
                    >
                </div>
                
                <!-- Bot√£o de Cadastro -->
                <button 
                    type="submit"
                    class="w-full bg-gradient-to-r from-amber-600 via-yellow-600 to-amber-700 hover:from-amber-500 hover:via-yellow-500 hover:to-amber-600 text-black font-bold px-4 sm:px-6 py-2 sm:py-3 rounded-lg transition-all duration-300 text-xs sm:text-sm shadow-lg shadow-amber-600/30"
                >
                    üÜî CRIAR CONTA AGORA
                </button>
            </form>
            
            <!-- Mensagem de Status -->
            <div id="mensagem-primeiro-acesso" class="mt-3 sm:mt-4 p-2 sm:p-3 rounded-lg hidden">
                <p id="texto-mensagem-primeiro" class="text-center font-medium text-xs sm:text-sm"></p>
            </div>
            
            <!-- Informa√ß√µes -->
            <div class="mt-3 sm:mt-4 bg-blue-500/20 rounded-lg p-2 sm:p-3 border border-blue-500/40">
                <h4 class="text-blue-300 font-bold text-xs mb-1">‚ÑπÔ∏è Informa√ß√µes Importantes</h4>
                <ul class="text-xs text-gray-300 space-y-1">
                    <li>‚Ä¢ O n√∫mero OAB deve estar liberado pelo administrador</li>
                    <li>‚Ä¢ Cada OAB pode ser usado apenas uma vez</li>
                    <li>‚Ä¢ Seu email ser√° gerado automaticamente</li>
                    <li>‚Ä¢ Ap√≥s o cadastro, fa√ßa login com o email gerado</li>
                </ul>
            </div>
            
            <!-- Bot√£o Fechar -->
            <button 
                onclick="fecharPrimeiroAcesso()" 
                class="absolute top-2 sm:top-4 right-2 sm:right-4 text-gray-400 hover:text-white transition-colors text-lg sm:text-xl"
            >
                √ó
            </button>
        </div>
    </div>

    <div class="container mx-auto px-4 py-8">
        
        <!-- Painel Administrativo (Exclusivo Alexandre de Moraes) -->
        <div id="painel-admin" class="admin-panel hidden">
            <div class="content-section bg-gradient-to-br from-red-600/20 to-red-800/40 backdrop-blur-lg rounded-2xl border-2 border-red-500/50 shadow-2xl">
                <div class="section-header">
                    <h2 class="section-title font-bold text-white flex items-center">
                        <div class="w-10 h-10 bg-gradient-to-br from-red-600 to-red-800 rounded-lg flex items-center justify-center shadow-lg mr-3">
                            <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <span class="hidden lg:inline">Painel Administrativo - Alexandre de Moraes</span>
                        <span class="lg:hidden">Painel Admin</span>
                    </h2>
                    <button onclick="esconderPainelAdmin()" class="btn bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all">
                        <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 13H5v-2h14v2z"/>
                        </svg>
                        <span class="hidden sm:inline">Minimizar</span>
                    </button>
                </div>
                
                <div class="admin-grid">
                    <!-- Sistema de Nomea√ß√µes -->
                    <div class="bg-yellow-600/20 rounded-lg p-6 border border-yellow-500/50 hover:bg-yellow-600/30 transition-all cursor-pointer" onclick="abrirSistemaNomeacoes()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üëë</div>
                            <h3 class="text-lg font-bold text-white mb-2">Sistema de Nomea√ß√µes</h3>
                            <p class="text-yellow-200 text-sm">Nomear cargos hier√°rquicos</p>
                        </div>
                    </div>

                    <!-- Hierarquia Judicial -->
                    <div class="bg-blue-600/20 rounded-lg p-6 border border-blue-500/50 hover:bg-blue-600/30 transition-all cursor-pointer" onclick="abrirHierarquiaJudicial()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üèõÔ∏è</div>
                            <h3 class="text-lg font-bold text-white mb-2">Hierarquia Judicial</h3>
                            <p class="text-blue-200 text-sm">Visualizar estrutura completa</p>
                        </div>
                    </div>

                    <!-- Liberar OAB -->
                    <div class="bg-green-600/20 rounded-lg p-6 border border-green-500/50 hover:bg-green-600/30 transition-all cursor-pointer" onclick="abrirCadastroUsuario()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üîë</div>
                            <h3 class="text-lg font-bold text-white mb-2">Liberar OAB</h3>
                            <p class="text-green-200 text-sm">Autorizar n√∫meros para cadastro</p>
                        </div>
                    </div>

                    <!-- Gerenciar Usu√°rios -->
                    <div class="bg-purple-600/20 rounded-lg p-6 border border-purple-500/50 hover:bg-purple-600/30 transition-all cursor-pointer" onclick="abrirGerenciarUsuarios()">
                        <div class="text-center">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-600 to-purple-800 rounded-lg flex items-center justify-center mx-auto mb-4 shadow-lg">
                                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-1c0-2.66 5.33-4 8-4s8 1.34 8 4v1H4zM12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/>
                                </svg>
                            </div>
                            <h3 class="text-lg font-bold text-white mb-2">Gerenciar Usu√°rios</h3>
                            <p class="text-purple-200 text-sm">Editar e remover usu√°rios</p>
                        </div>
                    </div>

                    <!-- Logs do Sistema -->
                    <div class="bg-red-600/20 rounded-lg p-6 border border-red-500/50 hover:bg-red-600/30 transition-all cursor-pointer" onclick="abrirLogsSistema()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üìä</div>
                            <h3 class="text-lg font-bold text-white mb-2">Logs do Sistema</h3>
                            <p class="text-red-200 text-sm">Monitorar atividades</p>
                        </div>
                    </div>

                    <!-- Configura√ß√µes Avan√ßadas -->
                    <div class="bg-indigo-600/20 rounded-lg p-6 border border-indigo-500/50 hover:bg-indigo-600/30 transition-all cursor-pointer" onclick="abrirConfiguracoes()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">‚öôÔ∏è</div>
                            <h3 class="text-lg font-bold text-white mb-2">Configura√ß√µes</h3>
                            <p class="text-indigo-200 text-sm">Configura√ß√µes do sistema</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Menu Principal -->
        <div class="menu-grid">
            <!-- Calculadora de Penas -->
            <div id="menu-calculadora" class="menu-item bg-gradient-to-br from-red-600/30 via-red-700/20 to-red-800/40 backdrop-blur-lg rounded-2xl border-2 border-red-500/50 shadow-2xl hover:scale-105 hover:shadow-red-500/30 transition-all cursor-pointer" onclick="mostrarSecao('calculadora')">
                <div class="text-center">
                    <div class="menu-item-emoji">‚öñÔ∏è</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Calculadora de Penas</h3>
                    <p class="menu-item-description text-red-200">Calcule senten√ßas automaticamente</p>
                </div>
            </div>

            <!-- Gerador de Documentos -->
            <div id="menu-documentos" class="menu-item bg-gradient-to-br from-blue-600/30 via-blue-700/20 to-blue-800/40 backdrop-blur-lg rounded-2xl border-2 border-blue-500/50 shadow-2xl hover:scale-105 hover:shadow-blue-500/30 transition-all cursor-pointer" onclick="mostrarSecao('documentos')">
                <div class="text-center">
                    <div class="menu-item-emoji">üìã</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Gerador de Documentos</h3>
                    <p class="menu-item-description text-blue-200">Mandados, B.O., Intima√ß√µes</p>
                </div>
            </div>

            <!-- Sistema de Audi√™ncias -->
            <div id="menu-audiencias" class="menu-item bg-gradient-to-br from-purple-600/30 via-purple-700/20 to-purple-800/40 backdrop-blur-lg rounded-2xl border-2 border-purple-500/50 shadow-2xl hover:scale-105 hover:shadow-purple-500/30 transition-all cursor-pointer" onclick="mostrarSecao('audiencias')">
                <div class="text-center">
                    <div class="menu-item-emoji">üèõÔ∏è</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Sistema de Audi√™ncias</h3>
                    <p class="menu-item-description text-purple-200">Gerencie julgamentos</p>
                </div>
            </div>

            <!-- Dashboard Administrativo -->
            <div id="menu-dashboard" class="menu-item bg-gradient-to-br from-green-600/30 via-green-700/20 to-green-800/40 backdrop-blur-lg rounded-2xl border-2 border-green-500/50 shadow-2xl hover:scale-105 hover:shadow-green-500/30 transition-all cursor-pointer" onclick="mostrarSecao('dashboard')">
                <div class="text-center">
                    <div class="menu-item-emoji">üìä</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Dashboard</h3>
                    <p class="menu-item-description text-green-200">Estat√≠sticas e relat√≥rios</p>
                </div>
            </div>

            <!-- Ferramentas para Advogados -->
            <div id="menu-advogados" class="menu-item bg-gradient-to-br from-amber-600/30 via-yellow-600/20 to-amber-800/40 backdrop-blur-lg rounded-2xl border-2 border-amber-500/50 shadow-2xl hover:scale-105 hover:shadow-amber-500/30 transition-all cursor-pointer" onclick="mostrarSecao('advogados')">
                <div class="text-center">
                    <div class="menu-item-emoji">üë®‚Äçüíº</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">√Årea do Advogado</h3>
                    <p class="menu-item-description text-amber-200">Peti√ß√µes e honor√°rios</p>
                </div>
            </div>

            <!-- Gest√£o Processual -->
            <div id="menu-processos" class="menu-item bg-gradient-to-br from-indigo-600/30 via-indigo-700/20 to-indigo-800/40 backdrop-blur-lg rounded-2xl border-2 border-indigo-500/50 shadow-2xl hover:scale-105 hover:shadow-indigo-500/30 transition-all cursor-pointer" onclick="mostrarSecao('processos')">
                <div class="text-center">
                    <div class="menu-item-emoji">üóÉÔ∏è</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Gest√£o Processual</h3>
                    <p class="menu-item-description text-indigo-200">Controle de processos</p>
                </div>
            </div>

            <!-- Cadastro de R√©us -->
            <div id="menu-reus" class="menu-item bg-gradient-to-br from-orange-600/30 via-orange-700/20 to-orange-800/40 backdrop-blur-lg rounded-2xl border-2 border-orange-500/50 shadow-2xl hover:scale-105 hover:shadow-orange-500/30 transition-all cursor-pointer" onclick="mostrarSecao('reus')">
                <div class="text-center">
                    <div class="menu-item-emoji">üë§</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Cadastro de R√©us</h3>
                    <p class="menu-item-description text-orange-200">Hist√≥rico criminal</p>
                </div>
            </div>

            <!-- Sistema Mobile -->
            <div id="menu-mobile" class="menu-item bg-gradient-to-br from-pink-600/30 via-pink-700/20 to-pink-800/40 backdrop-blur-lg rounded-2xl border-2 border-pink-500/50 shadow-2xl hover:scale-105 hover:shadow-pink-500/30 transition-all cursor-pointer" onclick="mostrarSecao('mobile')">
                <div class="text-center">
                    <div class="menu-item-emoji">üì±</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Sistema Mobile</h3>
                    <p class="menu-item-description text-pink-200">Consultas e notifica√ß√µes</p>
                </div>
            </div>

            <!-- Hierarquia Judicial -->
            <div id="menu-hierarquia" class="menu-item bg-gradient-to-br from-purple-600/30 via-violet-700/20 to-purple-800/40 backdrop-blur-lg rounded-2xl border-2 border-purple-500/50 shadow-2xl hover:scale-105 hover:shadow-purple-500/30 transition-all cursor-pointer" onclick="mostrarHierarquiaJudicial()">
                <div class="text-center">
                    <div class="menu-item-emoji">‚öñÔ∏è</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Hierarquia Judicial</h3>
                    <p class="menu-item-description text-purple-200">Sistema completo 11 n√≠veis</p>
                </div>
            </div>

            <!-- Liberar OABs -->
            <div id="menu-oab" class="menu-item bg-gradient-to-br from-emerald-600/30 via-green-700/20 to-emerald-800/40 backdrop-blur-lg rounded-2xl border-2 border-emerald-500/50 shadow-2xl hover:scale-105 hover:shadow-emerald-500/30 transition-all cursor-pointer" onclick="abrirCadastroUsuario()">
                <div class="text-center">
                    <div class="menu-item-emoji">üîë</div>
                    <h3 class="menu-item-title font-bold text-white mb-2">Liberar OABs</h3>
                    <p class="menu-item-description text-emerald-200">Autorizar novos usu√°rios</p>
                </div>
            </div>
        </div>

        <!-- Se√ß√µes do Sistema -->
        <div id="conteudo" class="fade-in">
            <!-- Se√ß√£o Inicial -->
            <div id="inicial" class="text-center py-16">
                <div class="text-8xl mb-8">‚öñÔ∏è</div>
                <h2 class="text-4xl font-bold text-white mb-4">Bem-vindo ao Sistema Jur√≠dico</h2>
                <p class="text-xl text-white/80 mb-8">Selecione uma ferramenta acima para come√ßar</p>
                <div class="bg-gradient-to-r from-amber-500/20 via-yellow-500/15 to-amber-600/20 rounded-2xl p-8 border border-amber-500/30">
                    <h3 class="text-2xl font-bold text-amber-300 mb-4">üöÄ Sistema Completo Dispon√≠vel</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-white/90">
                        <div>‚úÖ Calculadora de Penas Autom√°tica</div>
                        <div>‚úÖ Gerador de Mandados e Documentos</div>
                        <div>‚úÖ Sistema de Audi√™ncias Completo</div>
                        <div>‚úÖ Dashboard com Estat√≠sticas</div>
                        <div>‚úÖ Ferramentas para Advogados</div>
                        <div>‚úÖ Gest√£o Processual Integrada</div>
                        <div>‚úÖ Cadastro de R√©us com Hist√≥rico</div>
                        <div>‚úÖ Interface Mobile Responsiva</div>
                    </div>
                </div>
                
            </div>

           <!-- ...existing code... -->

<!-- Calculadora de Penas - NOVO VISUAL + FUNCIONALIDADE ANTIGA -->
<div id="calculadora" class="hidden">
    <div class="content-section bg-gradient-to-br from-slate-900/95 via-red-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl border-2 border-red-600/50 shadow-2xl">
        <div class="section-header">
            <h2 class="section-title font-bold text-white flex items-center">
                <span class="bg-red-600 p-2 sm:p-3 rounded-lg mr-3 sm:mr-4 shadow-lg text-lg sm:text-xl">‚öñÔ∏è</span>
                <span class="hidden sm:inline">Calculadora de Penas</span>
                <span class="sm:hidden">Calc. Penas</span>
            </h2>
            <button onclick="mostrarSecao('inicial')" class="btn bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all">
                ‚Üê <span class="hidden sm:inline">Voltar</span>
            </button>
        </div>
        <div class="responsive-grid-2">
            <!-- Sele√ß√£o de Crimes -->
            <div>
                <h3 class="text-xl font-bold text-white mb-4">Selecionar Crimes</h3>
                <div class="space-y-6 h-full overflow-y-auto px-2 flex flex-col">
                    <!-- Filtro de busca -->
                    <div class="mb-2">
                        <input type="text" id="buscarCrime" placeholder="üîç Buscar crime ou artigo..." class="w-full px-3 py-2 rounded-lg bg-gray-900 border border-red-500/50 text-white placeholder-gray-400 focus:border-red-500 focus:ring-2 focus:ring-red-500/50 transition-all text-sm">
                    </div>
                    <!-- Categorias de Crimes -->
                    <div class="space-y-4">
        <!-- Tr√¢nsito -->
        <div class="bg-red-900/40 rounded-xl p-4 border-2 border-red-600/50 shadow-lg">
            <h4 ...>...</h4>
<div id="categoria-transito" class="space-y-2 overflow-y-auto flex-1"></div>
        </div>
        <!-- Pessoa -->
        <div class="bg-red-900/30 rounded-xl p-4 border-2 border-red-600/50 shadow-lg">
            <h4 ...>...</h4>
<div id="categoria-pessoa" class="space-y-2 overflow-y-auto flex-1"></div>
        </div>
        <!-- Patrim√¥nio -->
        <div class="bg-yellow-900/30 rounded-xl p-4 border-2 border-yellow-600/50 shadow-lg">
            <h4 ...>...</h4>
<div id="categoria-patrimonio" class="space-y-2 overflow-y-auto flex-1"></div>
        </div>
        <!-- Ordem P√∫blica -->
        <div class="bg-purple-900/30 rounded-xl p-4 border-2 border-purple-600/50 shadow-lg">
            <h4 ...>...</h4>
<div id="categoria-ordem" class="space-y-2 overflow-y-auto flex-1"></div>
        </div>
    </div>
                    <!-- Crimes selecionados -->
                    <div id="crimesSelecionados" class="mt-4 mb-2 space-y-2 max-h-40 overflow-y-auto">
                        <p class="text-white/60 text-sm">Nenhum crime selecionado</p>
                    </div>
                    <button onclick="limparCrimes()" class="w-full mb-2 bg-red-800/40 hover:bg-red-700/60 border-2 border-red-500 text-red-200 font-medium py-2 px-4 rounded-lg transition-all">
                        üóëÔ∏è Limpar Sele√ß√£o
                    </button>
                </div>
            </div>
            <!-- Redu√ß√µes e Resultado -->
            <div class="flex flex-col h-full">
                <h3 class="text-xl font-bold text-white mb-4">Redu√ß√µes e Resultado</h3>
                <!-- Redu√ß√µes -->
                <div class="bg-green-900/20 rounded-lg p-4 mb-6 border border-green-500/30">
                    <h4 class="font-bold text-green-300 mb-3">üìâ Redu√ß√µes Aplic√°veis</h4>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 cursor-pointer bg-gray-800/30 p-3 rounded-lg hover:bg-gray-700/30 transition-all">
                            <input type="checkbox" id="advogado" class="w-5 h-5 rounded border-2 border-yellow-500/50 bg-gray-800 text-yellow-500 focus:ring-yellow-400">
                            <span class="text-white text-sm font-medium">‚öñÔ∏è Advogado presente (-10%)</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer bg-gray-800/30 p-3 rounded-lg hover:bg-gray-700/30 transition-all">
                            <input type="checkbox" id="primario" class="w-5 h-5 rounded border-2 border-yellow-500/50 bg-gray-800 text-yellow-500 focus:ring-yellow-400">
                            <span class="text-white text-sm font-medium">üÜï R√©u prim√°rio (-15%)</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer bg-gray-800/30 p-3 rounded-lg hover:bg-gray-700/30 transition-all">
                            <input type="checkbox" id="colaboracao" class="w-5 h-5 rounded border-2 border-yellow-500/50 bg-gray-800 text-yellow-500 focus:ring-yellow-400">
                            <span class="text-white text-sm font-medium">ü§ù Colabora√ß√£o (-20%)</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer bg-gray-800/30 p-3 rounded-lg hover:bg-gray-700/30 transition-all">
                            <input type="checkbox" id="bomComportamento" class="w-5 h-5 rounded border-2 border-yellow-500/50 bg-gray-800 text-yellow-500 focus:ring-yellow-400">
                            <span class="text-white text-sm font-medium">üòá Bom comportamento (-10%)</span>
                        </label>
                        <label class="flex items-center space-x-3 cursor-pointer bg-gray-800/30 p-3 rounded-lg hover:bg-gray-700/30 transition-all">
                            <input type="checkbox" id="confissao" class="w-5 h-5 rounded border-2 border-yellow-500/50 bg-gray-800 text-yellow-500 focus:ring-yellow-400">
                            <span class="text-white text-sm font-medium">üí¨ Confiss√£o (-12%)</span>
                        </label>
                    </div>
                    <div class="mt-4">
                        <label class="block text-white font-medium mb-2">üéØ Redu√ß√£o Adicional (%)</label>
                        <input type="number" id="reducaoExtra" class="w-full px-3 py-2 rounded-lg bg-gray-900 border-2 border-yellow-500/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400" placeholder="Ex: 5" min="0" max="50">
                        <p class="text-yellow-300 text-xs mt-2">‚ö†Ô∏è Redu√ß√£o m√°xima permitida: 50%</p>
                    </div>
                </div>
                <!-- Resultado -->
                <div id="resultado" class="bg-gradient-to-r from-yellow-500/20 to-red-500/20 rounded-lg p-6 border border-yellow-500/30 flex-1">
                    <h4 class="font-bold text-yellow-300 mb-4">üìä Resultado da Senten√ßa</h4>
                    <div id="resultado-texto" class="text-white">
                        <div class="text-center text-white/60 py-8">
                            <div class="text-6xl mb-4">‚öñÔ∏è</div>
                            <p>Preencha os dados ao lado para calcular a pena</p>
                        </div>
                    </div>
                    <button onclick="calcularPena()" class="w-full mt-4 bg-gradient-to-r from-yellow-600 via-yellow-500 to-yellow-600 hover:from-yellow-500 hover:via-yellow-400 hover:to-yellow-500 text-black font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 border-3 border-yellow-400 shadow-2xl relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-700"></div>
                        <span class="relative z-10 text-lg">‚öñÔ∏è CALCULAR SENTEN√áA</span>
                    </button>
                </div>
                <!-- Hist√≥rico -->
                <div class="mt-8">
                    <h3 class="text-xl font-semibold text-white mb-4">üìú Hist√≥rico de C√°lculos</h3>
                    <div id="historico" class="space-y-2 max-h-60 overflow-y-auto">
                        <p class="text-white/60 text-sm">Nenhum c√°lculo realizado ainda</p>
                    </div>
                    <button onclick="limparHistorico()" class="mt-4 text-red-400 hover:text-red-300 text-sm underline">
                        üóëÔ∏è Limpar Hist√≥rico
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ...existing code... -->

<script>
// --- CALCULADORA DE PENAS - FUNCIONALIDADE ANTIGA + VISUAL NOVO ---

let historico = [];
let crimesSelecionados = [];

// Base de dados dos crimes
const codigoPenal = {
    transito: [
        {artigo: "ART. 218", nome: "Alta Velocidade", servicos: 0, multa: 600},
        {artigo: "ART. 175", nome: "Dire√ß√£o Perigosa", servicos: 0, multa: 2000},
        {artigo: "ART. 181", nome: "Estacionar em local proibido", servicos: 0, multa: 650},
        {artigo: "ART. 173", nome: "Disputar corrida", servicos: 0, multa: 650},
        {artigo: "ART. 183", nome: "Avan√ßar sinal vermelho", servicos: 0, multa: 650},
        {artigo: "ART. 181", nome: "Ve√≠culo Abandonado", servicos: 0, multa: 700},
        {artigo: "ART. 176", nome: "Transitar na contram√£o", servicos: 0, multa: 600},
        {artigo: "ART. 304", nome: "Omiss√£o de Socorro", servicos: 0, multa: 650},
        {artigo: "ART. 162", nome: "Falta de combust√≠vel", servicos: 0, multa: 150},
        {artigo: "ART. 162", nome: "Dirigir sem habilita√ß√£o", servicos: 0, multa: 150},
        {artigo: "ART. 210", nome: "Ultrapassar blitz", servicos: 0, multa: 850},
        {artigo: "ART. 165-A", nome: "Recusar baf√¥metro", servicos: 0, multa: 1000},
        {artigo: "ART. 218", nome: "Seguir viatura policial", servicos: 0, multa: 1000},
        {artigo: "ART. 244", nome: "Motocicleta sem capacete", servicos: 0, multa: 1300},
        {artigo: "ART. 194", nome: "Marcha r√© indevida", servicos: 0, multa: 300},
        {artigo: "ART. 199", nome: "Ultrapassar pela direita", servicos: 0, multa: 1000}
    ],
    pessoa: [
        {artigo: "Art.121", nome: "Homic√≠dio", servicos: 40, multa: 850},
        {artigo: "Art.121-A", nome: "Homic√≠dio de funcion√°rio p√∫blico", servicos: 60, multa: 3000},
        {artigo: "Art.121-B", nome: "Homic√≠dio culposo", servicos: 30, multa: 1500},
        {artigo: "Art.129", nome: "Les√£o corporal", servicos: 3, multa: 550},
        {artigo: "Art.130", nome: "Cal√∫nia", servicos: 10, multa: 450},
        {artigo: "Art.139", nome: "Difama√ß√£o", servicos: 10, multa: 450},
        {artigo: "Art.147", nome: "Amea√ßa", servicos: 10, multa: 600},
        {artigo: "Art.148", nome: "Sequestro e c√°rcere privado", servicos: 40, multa: 1500},
        {artigo: "Art.3", nome: "Genoc√≠dio", servicos: 60, multa: 3000},
        {artigo: "Art.129 III", nome: "Les√£o corporal seguida de morte", servicos: 30, multa: 1500},
        {artigo: "Art.287", nome: "Incita√ß√£o/apologia ao crime", servicos: 25, multa: 850}
    ],
    patrimonio: [
        {artigo: "Art.155 I", nome: "Furto qualificado", servicos: 30, multa: 550},
        {artigo: "Art.155", nome: "Furto", servicos: 25, multa: 350},
        {artigo: "Art.157", nome: "Roubo", servicos: 40, multa: 750},
        {artigo: "Art.157-B", nome: "Roubo seguido de morte", servicos: 50, multa: 1000},
        {artigo: "Art.157 II", nome: "Roubo qualificado", servicos: 50, multa: 900},
        {artigo: "Art.171", nome: "Estelionato", servicos: 12, multa: 2500},
        {artigo: "Art.126", nome: "Desmonte de ve√≠culos", servicos: 10, multa: 2500},
        {artigo: "Art.180", nome: "Recep√ß√£o", servicos: 10, multa: 2500}
    ],
    ordem: [
        {artigo: "Art.200-A", nome: "Roupas Policiais", servicos: 50, multa: 5000},
        {artigo: "Art.200-B", nome: "Roupas Militares", servicos: 50, multa: 5000},
        {artigo: "Art.200-C", nome: "Oculta√ß√£o facial", servicos: 5, multa: 1000},
        {artigo: "Art.288", nome: "Produtos il√≠citos", servicos: 10, multa: 2000},
        {artigo: "Art.288", nome: "Associa√ß√£o Criminosa", servicos: 15, multa: 2000},
        {artigo: "Art.289", nome: "Dinheiro il√≠cito", servicos: 18, multa: 1500},
        {artigo: "Art.299", nome: "Falsidade ideol√≥gica", servicos: 15, multa: 1750},
        {artigo: "Art.330", nome: "Desobedi√™ncia", servicos: 10, multa: 1500},
        {artigo: "Art.331", nome: "Desacato", servicos: 12, multa: 1500},
        {artigo: "Art.333", nome: "Corrup√ß√£o", servicos: 15, multa: 2500},
        {artigo: "Art.337", nome: "Suborno", servicos: 25, multa: 2500},
        {artigo: "Art.339", nome: "Den√∫ncia caluniosa", servicos: 12, multa: 1750},
        {artigo: "Art.342", nome: "Falso testemunho", servicos: 10, multa: 1500},
        {artigo: "Art.311", nome: "Uso de m√°scara para terrorismo", servicos: 12, multa: 2500},
        {artigo: "Art.355", nome: "Abuso de autoridade", servicos: 12, multa: 5000},
        {artigo: "Art.357", nome: "Obstru√ß√£o de Justi√ßa", servicos: 32, multa: 5000},
        {artigo: "Art.16", nome: "Porte ilegal de arma classe 1", servicos: 14, multa: 2000},
        {artigo: "Art.17", nome: "Porte ilegal de arma classe 2", servicos: 14, multa: 3000},
        {artigo: "Art.18", nome: "Tr√°fico de muni√ß√µes", servicos: 10, multa: 3500},
        {artigo: "Art.19", nome: "Tr√°fico de armamento", servicos: 20, multa: 5000},
        {artigo: "Art.33", nome: "Tr√°fico de drogas", servicos: 25, multa: 5000}
    ]
};

// Inicializar a calculadora ao abrir a se√ß√£o
document.addEventListener('DOMContentLoaded', function() {
    carregarCrimes();
    configurarBusca();
});

// Carregar crimes nas categorias
function carregarCrimes() {
    document.getElementById('categoria-transito').innerHTML = codigoPenal.transito.map(crime => criarElementoCrime(crime, 'transito')).join('');
    document.getElementById('categoria-pessoa').innerHTML = codigoPenal.pessoa.map(crime => criarElementoCrime(crime, 'pessoa')).join('');
    document.getElementById('categoria-patrimonio').innerHTML = codigoPenal.patrimonio.map(crime => criarElementoCrime(crime, 'patrimonio')).join('');
    document.getElementById('categoria-ordem').innerHTML = codigoPenal.ordem.map(crime => criarElementoCrime(crime, 'ordem')).join('');
}

// Cria o bot√£o/checkbox do crime
function criarElementoCrime(crime, categoria) {
    const id = `${categoria}-${crime.artigo.replace(/[^a-zA-Z0-9]/g, '')}`;
    return `
        <div class="crime-item bg-gray-900/50 rounded-lg p-3 border border-red-600/30 hover:bg-red-900/20 hover:border-red-500/50 transition-all cursor-pointer" 
             onclick="toggleCrime('${id}', ${JSON.stringify(crime).replace(/"/g, '&quot;')})">
            <div class="flex items-center space-x-2">
                <input type="checkbox" id="${id}" class="w-4 h-4 rounded border-2 border-yellow-500/50 bg-gray-800 text-yellow-500 pointer-events-none">
                <span class="text-white font-medium text-sm">${crime.artigo}</span>
            </div>
            <p class="text-white/80 text-sm mt-1">${crime.nome}</p>
            <div class="flex space-x-4 mt-2 text-xs">
                ${crime.servicos > 0 ? `<span class="text-red-300">‚è∞ ${crime.servicos} meses</span>` : ''}
                <span class="text-yellow-300">üí∞ R$ ${crime.multa.toLocaleString('pt-BR')}</span>
            </div>
        </div>
    `;
}

// Seleciona/deseleciona crime
function toggleCrime(id, crime) {
    const checkbox = document.getElementById(id);
    checkbox.checked = !checkbox.checked;
    if (checkbox.checked) {
        adicionarCrime(crime);
    } else {
        removerCrime(crime.artigo, crime.nome);
    }
    atualizarCrimesSelecionados();
}

// Adiciona crime √† lista
function adicionarCrime(crime) {
    const existe = crimesSelecionados.find(c => c.artigo === crime.artigo && c.nome === crime.nome);
    if (!existe) crimesSelecionados.push(crime);
}

// Remove crime da lista
function removerCrime(artigo, nome) {
    crimesSelecionados = crimesSelecionados.filter(c => !(c.artigo === artigo && c.nome === nome));
}

// Atualiza painel de crimes selecionados
function atualizarCrimesSelecionados() {
    const div = document.getElementById('crimesSelecionados');
    if (crimesSelecionados.length === 0) {
        div.innerHTML = '<p class="text-white/60 text-sm">Nenhum crime selecionado</p>';
        return;
    }
    div.innerHTML = crimesSelecionados.map(crime => `
        <div class="bg-white/5 rounded-lg p-2 border border-white/10 flex justify-between items-center">
            <div class="h-full flex flex-col">
                <span class="text-white font-medium text-sm">${crime.artigo}</span>
                <p class="text-white/80 text-xs">${crime.nome}</p>
                <div class="flex space-x-3 mt-1 text-xs">
                    ${crime.servicos > 0 ? `<span class="text-orange-300">‚è∞ ${crime.servicos}m</span>` : ''}
                    <span class="text-green-300">üí∞ R$ ${crime.multa.toLocaleString('pt-BR')}</span>
                </div>
            </div>
            <button onclick="removerCrimeSelecionado('${crime.artigo}', '${crime.nome}')" class="text-red-400 hover:text-red-300 text-xs">‚ùå</button>
        </div>
    `).join('');
}

// Remove crime pelo bot√£o ‚ùå
function removerCrimeSelecionado(artigo, nome) {
    // Desmarcar checkbox
    const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
    allCheckboxes.forEach(checkbox => {
        if (checkbox.id.includes(artigo.replace(/[^a-zA-Z0-9]/g, ''))) {
            checkbox.checked = false;
        }
    });
    removerCrime(artigo, nome);
    atualizarCrimesSelecionados();
}

// Limpa todos os crimes selecionados
function limparCrimes() {
    crimesSelecionados = [];
    const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
    allCheckboxes.forEach(checkbox => {
        if (checkbox.id.includes('transito-') || checkbox.id.includes('pessoa-') || checkbox.id.includes('patrimonio-') || checkbox.id.includes('ordem-')) {
            checkbox.checked = false;
        }
    });
    atualizarCrimesSelecionados();
}

// Busca r√°pida de crimes
function configurarBusca() {
    const busca = document.getElementById('buscarCrime');
    busca.addEventListener('input', function(e) {
        const termo = e.target.value.toLowerCase();
        const crimes = document.querySelectorAll('.crime-item');
        crimes.forEach(crime => {
            const texto = crime.textContent.toLowerCase();
            crime.style.display = texto.includes(termo) ? 'block' : 'none';
        });
    });
}

// Expande/colapsa categoria
function toggleCategoria(categoria) {
    const div = document.getElementById(`categoria-${categoria}`);
    const arrow = document.getElementById(`arrow-${categoria}`);
    if (div.style.display === 'none' || div.style.display === '') {
        div.style.display = 'block';
        arrow.textContent = '‚ñº';
    } else {
        div.style.display = 'none';
        arrow.textContent = '‚ñ∂';
    }
}

// Calcula a pena e mostra resultado
function calcularPena() {
    if (crimesSelecionados.length === 0) {
        alert('‚ö†Ô∏è Por favor, selecione pelo menos um crime');
        return;
    }
    let multaTotal = crimesSelecionados.reduce((total, crime) => total + crime.multa, 0);
    let tempoTotal = crimesSelecionados.reduce((total, crime) => total + crime.servicos, 0);

    let reducaoTotal = 0;
    let reducoesList = [];
    if (document.getElementById('advogado').checked) { reducaoTotal += 10; reducoesList.push('Advogado presente (10%)'); }
    if (document.getElementById('primario').checked) { reducaoTotal += 15; reducoesList.push('R√©u prim√°rio (15%)'); }
    if (document.getElementById('colaboracao').checked) { reducaoTotal += 20; reducoesList.push('Colabora√ß√£o (20%)'); }
    if (document.getElementById('bomComportamento').checked) { reducaoTotal += 10; reducoesList.push('Bom comportamento (10%)'); }
    if (document.getElementById('confissao').checked) { reducaoTotal += 12; reducoesList.push('Confiss√£o (12%)'); }
    const reducaoExtra = parseFloat(document.getElementById('reducaoExtra').value) || 0;
    if (reducaoExtra > 0) { reducaoTotal += reducaoExtra; reducoesList.push(`Redu√ß√£o adicional (${reducaoExtra}%)`); }
    if (reducaoTotal > 50) reducaoTotal = 50;

    const multaFinal = multaTotal * (1 - reducaoTotal / 100);
    const tempoFinal = tempoTotal * (1 - reducaoTotal / 100);

    exibirResultado(multaTotal, tempoTotal, multaFinal, tempoFinal, reducaoTotal, reducoesList);
    adicionarAoHistorico(multaTotal, tempoTotal, multaFinal, tempoFinal, reducaoTotal);
    
    // Notificar c√°lculo conclu√≠do
    if (typeof notificarCalculoPena === 'function') {
        notificarCalculoPena(tempoFinal.toFixed(1), crimesSelecionados.length);
    }
}

// Mostra resultado detalhado
function exibirResultado(multaBase, tempoBase, multaFinal, tempoFinal, reducaoTotal, reducoesList) {
    const resultado = document.getElementById('resultado-texto');
    resultado.innerHTML = `
        <div class="bg-green-500/20 border border-green-400/30 rounded-lg p-4 mb-4">
            <h3 class="text-green-300 font-semibold mb-2">‚úÖ Senten√ßa Calculada</h3>
            <div class="text-white space-y-1">
                ${multaBase > 0 ? `<p><strong>üí∞ Multa:</strong> R$ ${multaFinal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>` : ''}
                ${tempoBase > 0 ? `<p><strong>‚è∞ Pris√£o:</strong> ${tempoFinal.toFixed(1)} meses</p>` : ''}
                <p><strong>üìâ Redu√ß√£o Total:</strong> ${reducaoTotal}%</p>
            </div>
        </div>
        <div class="bg-blue-500/20 border border-blue-400/30 rounded-lg p-4 mb-4">
            <h4 class="text-blue-300 font-medium mb-2">üìã Crimes Aplicados</h4>
            <div class="text-white text-sm space-y-1 max-h-32 overflow-y-auto">
                ${crimesSelecionados.map(crime => `
                    <div class="flex justify-between">
                        <span>${crime.artigo} - ${crime.nome}</span>
                        <span class="text-green-300">R$ ${crime.multa.toLocaleString('pt-BR')} ${crime.servicos > 0 ? `| ${crime.servicos}m` : ''}</span>
                    </div>
                `).join('')}
            </div>
        </div>
        ${multaBase > 0 ? `
        <div class="bg-purple-500/20 border border-purple-400/30 rounded-lg p-4 mb-4">
            <h4 class="text-purple-300 font-medium mb-2">üí∞ Detalhes da Multa</h4>
            <div class="text-white text-sm space-y-1">
                <p>Valor original: R$ ${multaBase.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                <p>Desconto aplicado: R$ ${(multaBase - multaFinal).toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
                <p class="font-semibold text-green-300">Valor final: R$ ${multaFinal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>
            </div>
        </div>
        ` : ''}
        ${tempoBase > 0 ? `
        <div class="bg-orange-500/20 border border-orange-400/30 rounded-lg p-4 mb-4">
            <h4 class="text-orange-300 font-medium mb-2">‚è∞ Detalhes da Pris√£o</h4>
            <div class="text-white text-sm space-y-1">
                <p>Tempo original: ${tempoBase} meses</p>
                <p>Redu√ß√£o aplicada: ${(tempoBase - tempoFinal).toFixed(1)} meses</p>
                <p class="font-semibold text-green-300">Tempo final: ${tempoFinal.toFixed(1)} meses</p>
            </div>
        </div>
        ` : ''}
        ${reducoesList.length > 0 ? `
        <div class="bg-yellow-500/20 border border-yellow-400/30 rounded-lg p-4">
            <h4 class="text-yellow-300 font-medium mb-2">üìã Redu√ß√µes Aplicadas</h4>
            <ul class="text-white text-sm space-y-1">
                ${reducoesList.map(reducao => `<li>‚Ä¢ ${reducao}</li>`).join('')}
            </ul>
        </div>
        ` : ''}
    `;
}

// Adiciona c√°lculo ao hist√≥rico
function adicionarAoHistorico(multaBase, tempoBase, multaFinal, tempoFinal, reducaoTotal) {
    const agora = new Date().toLocaleString('pt-BR');
    const crimesTexto = crimesSelecionados.map(c => c.artigo).join(', ');
    const item = {
        data: agora,
        crimes: crimesTexto,
        multaBase,
        tempoBase,
        multaFinal,
        tempoFinal,
        reducaoTotal
    };
    historico.unshift(item);
    if (historico.length > 10) historico.pop();
    atualizarHistorico();
}

// Atualiza painel de hist√≥rico
function atualizarHistorico() {
    const historicoDiv = document.getElementById('historico');
    if (historico.length === 0) {
        historicoDiv.innerHTML = '<p class="text-white/60 text-sm">Nenhum c√°lculo realizado ainda</p>';
        return;
    }
    historicoDiv.innerHTML = historico.map(item => `
        <div class="bg-white/5 rounded-lg p-3 border border-white/10">
            <div class="text-white/80 text-xs mb-1">${item.data}</div>
            <div class="text-white/60 text-xs mb-1">${item.crimes}</div>
            <div class="text-white text-sm">
                ${item.multaBase > 0 ? `üí∞ R$ ${item.multaBase.toLocaleString('pt-BR')} ‚Üí R$ ${item.multaFinal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}` : ''}
                ${item.multaBase > 0 && item.tempoBase > 0 ? ' | ' : ''}
                ${item.tempoBase > 0 ? `‚è∞ ${item.tempoBase}m ‚Üí ${item.tempoFinal.toFixed(1)}m` : ''}
                <span class="text-green-300 ml-2">(-${item.reducaoTotal}%)</span>
            </div>
        </div>
    `).join('');
}

// Limpa hist√≥rico
function limparHistorico() {
    if (confirm('Tem certeza que deseja limpar o hist√≥rico?')) {
        historico = [];
        atualizarHistorico();
    }
}

// Auto-calcular quando houver mudan√ßas nas redu√ß√µes
document.addEventListener('change', function(e) {
    if (e.target.type === 'checkbox' && !e.target.id.includes('transito-') && !e.target.id.includes('pessoa-') && !e.target.id.includes('patrimonio-') && !e.target.id.includes('ordem-')) {
        if (crimesSelecionados.length > 0) {
            calcularPena();
        }
    }
});
document.addEventListener('input', function(e) {
    if (e.target.id === 'reducaoExtra') {
        clearTimeout(window.autoCalcTimer);
        window.autoCalcTimer = setTimeout(() => {
            if (crimesSelecionados.length > 0) {
                calcularPena();
            }
        }, 1000);
    }
});
</script>
<!-- ...existing code... -->

            <!-- Gerador de Documentos -->
            <div id="documentos" class="hidden">
                <div class="bg-gradient-to-br from-slate-900/95 via-blue-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl p-8 border-2 border-blue-600/50 shadow-2xl">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center">
                            <span class="bg-blue-600 p-3 rounded-lg mr-4 shadow-lg">üìã</span>
                            Gerador de Documentos
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg transition-all">
                            ‚Üê Voltar
                        </button>
                    </div>

                    <!-- Instru√ß√µes de Uso -->
                    <div class="bg-yellow-500/20 rounded-lg p-4 mb-6 border border-yellow-500/30">
                        <h3 class="text-yellow-300 font-bold mb-2">üìù Como usar os documentos:</h3>
                        <div class="text-white text-sm space-y-1">
                            <p>‚Ä¢ <strong>Clique nos campos</strong> com "_____" para edit√°-los</p>
                            <p>‚Ä¢ <strong>Upload Assinatura:</strong> Carregue sua assinatura em imagem ou PDF</p>
                            <p>‚Ä¢ <strong>Imprimir:</strong> Gere o documento final para impress√£o</p>
                            <p>‚Ä¢ <strong>Campos edit√°veis:</strong> Nomes, datas, n√∫meros de processo, etc.</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Mandado de Pris√£o -->
                        <div class="group bg-gradient-to-br from-red-900/40 via-red-800/30 to-red-900/50 rounded-xl p-6 border-2 border-red-500/50 hover:border-red-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-red-500/20" onclick="gerarDocumento('mandado-prisao')">
                            <div class="text-center">
                                <div class="bg-red-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-red-500/30 transition-all">
                                    <span class="text-3xl">üöî</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-red-200 transition-colors">Mandado de Pris√£o</h3>
                                <p class="text-red-200 text-xs leading-relaxed">Documento oficial com formata√ß√£o jur√≠dica completa</p>
                                <div class="mt-3 text-xs text-red-300/80">‚Ä¢ Modelo oficial ‚Ä¢ Campos edit√°veis</div>
                            </div>
                        </div>

                        <!-- Boletim de Ocorr√™ncia -->
                        <div class="group bg-gradient-to-br from-blue-900/40 via-blue-800/30 to-blue-900/50 rounded-xl p-6 border-2 border-blue-500/50 hover:border-blue-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-blue-500/20" onclick="gerarDocumento('boletim')">
                            <div class="text-center">
                                <div class="bg-blue-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-500/30 transition-all">
                                    <span class="text-3xl">üìù</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-blue-200 transition-colors">Boletim de Ocorr√™ncia</h3>
                                <p class="text-blue-200 text-xs leading-relaxed">Formul√°rio autom√°tico com todos os campos necess√°rios</p>
                                <div class="mt-3 text-xs text-blue-300/80">‚Ä¢ Auto-preenchimento ‚Ä¢ Padr√£o oficial</div>
                            </div>
                        </div>

                        <!-- Intima√ß√£o -->
                        <div class="group bg-gradient-to-br from-yellow-900/40 via-yellow-800/30 to-amber-900/50 rounded-xl p-6 border-2 border-yellow-500/50 hover:border-yellow-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-yellow-500/20" onclick="gerarDocumento('intimacao')">
                            <div class="text-center">
                                <div class="bg-yellow-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-yellow-500/30 transition-all">
                                    <span class="text-3xl">üì®</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-yellow-200 transition-colors">Intima√ß√£o</h3>
                                <p class="text-yellow-200 text-xs leading-relaxed">Intima√ß√£o oficial para audi√™ncias e comparecimentos</p>
                                <div class="mt-3 text-xs text-yellow-300/80">‚Ä¢ Linguagem formal ‚Ä¢ Datas autom√°ticas</div>
                            </div>
                        </div>

                        <!-- Habeas Corpus -->
                        <div class="group bg-gradient-to-br from-green-900/40 via-green-800/30 to-emerald-900/50 rounded-xl p-6 border-2 border-green-500/50 hover:border-green-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-green-500/20" onclick="gerarDocumento('habeas')">
                            <div class="text-center">
                                <div class="bg-green-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-green-500/30 transition-all">
                                    <span class="text-3xl">‚öñÔ∏è</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-green-200 transition-colors">Habeas Corpus</h3>
                                <p class="text-green-200 text-xs leading-relaxed">Modelo completo com fundamenta√ß√£o jur√≠dica</p>
                                <div class="mt-3 text-xs text-green-300/80">‚Ä¢ Fundamentos legais ‚Ä¢ Peti√ß√£o completa</div>
                            </div>
                        </div>

                        <!-- Certid√£o -->
                        <div class="group bg-gradient-to-br from-purple-900/40 via-purple-800/30 to-violet-900/50 rounded-xl p-6 border-2 border-purple-500/50 hover:border-purple-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-purple-500/20" onclick="gerarDocumento('certidao')">
                            <div class="text-center">
                                <div class="bg-purple-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-purple-500/30 transition-all">
                                    <span class="text-3xl">üìú</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-purple-200 transition-colors">Certid√£o</h3>
                                <p class="text-purple-200 text-xs leading-relaxed">Certid√£o de antecedentes criminais e outros</p>
                                <div class="mt-3 text-xs text-purple-300/80">‚Ä¢ Selo oficial ‚Ä¢ Dados verificados</div>
                            </div>
                        </div>

                        <!-- Senten√ßa -->
                        <div class="group bg-gradient-to-br from-orange-900/40 via-orange-800/30 to-red-900/50 rounded-xl p-6 border-2 border-orange-500/50 hover:border-orange-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-orange-500/20" onclick="gerarDocumento('sentenca')">
                            <div class="text-center">
                                <div class="bg-orange-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-orange-500/30 transition-all">
                                    <span class="text-3xl">‚öñÔ∏è</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-orange-200 transition-colors">Senten√ßa</h3>
                                <p class="text-orange-200 text-xs leading-relaxed">Modelo de senten√ßa judicial com estrutura completa</p>
                                <div class="mt-3 text-xs text-orange-300/80">‚Ä¢ Estrutura legal ‚Ä¢ Fundamenta√ß√£o</div>
                            </div>
                        </div>

                        <!-- Alvar√° Judicial -->
                        <div class="group bg-gradient-to-br from-teal-900/40 via-teal-800/30 to-cyan-900/50 rounded-xl p-6 border-2 border-teal-500/50 hover:border-teal-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-teal-500/20" onclick="gerarDocumento('alvara')">
                            <div class="text-center">
                                <div class="bg-teal-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-teal-500/30 transition-all">
                                    <span class="text-3xl">üìã</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-teal-200 transition-colors">Alvar√° Judicial</h3>
                                <p class="text-teal-200 text-xs leading-relaxed">Autoriza√ß√£o judicial para diversas finalidades</p>
                                <div class="mt-3 text-xs text-teal-300/80">‚Ä¢ Autoriza√ß√£o legal ‚Ä¢ M√∫ltiplos tipos</div>
                            </div>
                        </div>

                        <!-- Of√≠cio -->
                        <div class="group bg-gradient-to-br from-indigo-900/40 via-indigo-800/30 to-blue-900/50 rounded-xl p-6 border-2 border-indigo-500/50 hover:border-indigo-400/70 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-indigo-500/20" onclick="gerarDocumento('oficio')">
                            <div class="text-center">
                                <div class="bg-indigo-600/20 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 group-hover:bg-indigo-500/30 transition-all">
                                    <span class="text-3xl">üìÑ</span>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-3 group-hover:text-indigo-200 transition-colors">Of√≠cio</h3>
                                <p class="text-indigo-200 text-xs leading-relaxed">Comunica√ß√£o oficial entre √≥rg√£os p√∫blicos</p>
                                <div class="mt-3 text-xs text-indigo-300/80">‚Ä¢ Protocolo oficial ‚Ä¢ Comunica√ß√£o formal</div>
                            </div>
                        </div>
                    </div>

                    <!-- √Årea de Gera√ß√£o -->
                    <div id="area-documento" class="mt-8 hidden">
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-white" id="titulo-documento">Documento</h3>
                                <div class="space-x-2">
                                    <button onclick="uploadAssinatura()" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-all">
                                        üìù Upload Assinatura
                                    </button>
                                    <button onclick="capturarFotoDocumento()" class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg transition-all">
                                        üì∏ Gerar Foto HD
                                    </button>
                                    <button onclick="imprimirDocumento()" class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg transition-all">
                                        üñ®Ô∏è Imprimir
                                    </button>
                                </div>
                            </div>
                            <div id="conteudo-documento" class="bg-white text-black p-6 rounded-lg min-h-96">
                                <!-- Conte√∫do do documento ser√° inserido aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sistema de Audi√™ncias -->
            <div id="audiencias" class="hidden">
                <div class="content-section bg-gradient-to-br from-slate-900/95 via-purple-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl border-2 border-purple-600/50 shadow-2xl">
                    <div class="section-header">
                        <h2 class="section-title font-bold text-white flex items-center">
                            <span class="bg-purple-600 p-2 sm:p-3 rounded-lg mr-3 sm:mr-4 shadow-lg text-lg sm:text-xl">üèõÔ∏è</span>
                            <span class="hidden sm:inline">Sistema de Audi√™ncias</span>
                            <span class="sm:hidden">Audi√™ncias</span>
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="btn bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all">
                            ‚Üê <span class="hidden sm:inline">Voltar</span>
                        </button>
                    </div>

                    <div class="responsive-grid-2">
                        <!-- Cron√¥metro da Audi√™ncia -->
                        <div class="card bg-purple-900/30 rounded-lg border border-purple-600/40">
                            <h3 class="text-lg sm:text-xl font-bold text-white mb-4 flex items-center">
                                <span class="bg-purple-600 p-2 rounded-lg mr-3 text-sm sm:text-base">‚è±Ô∏è</span>
                                <span class="hidden sm:inline">Cron√¥metro da Audi√™ncia</span>
                                <span class="sm:hidden">Cron√¥metro</span>
                            </h3>
                            <div class="text-center">
                                <div id="cronometro" class="cronometro-display font-bold text-purple-300">00:00:00</div>
                                <div class="btn-group">
                                    <button onclick="iniciarCronometro()" class="btn bg-green-600 hover:bg-green-500 text-white rounded-lg transition-all">
                                        ‚ñ∂Ô∏è <span class="hidden sm:inline">Iniciar</span>
                                    </button>
                                    <button onclick="pausarCronometro()" class="btn bg-yellow-600 hover:bg-yellow-500 text-white rounded-lg transition-all">
                                        ‚è∏Ô∏è <span class="hidden sm:inline">Pausar</span>
                                    </button>
                                    <button onclick="pararCronometro()" class="btn bg-red-600 hover:bg-red-500 text-white rounded-lg transition-all">
                                        ‚èπÔ∏è <span class="hidden sm:inline">Parar</span>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Agenda de Audi√™ncias -->
                        <div class="bg-blue-900/30 rounded-lg p-6 border border-blue-600/40">
                            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                                <span class="bg-blue-600 p-2 rounded-lg mr-3">üìÖ</span>
                                Agenda de Audi√™ncias
                            </h3>
                            <div class="space-y-3 max-h-64 overflow-y-auto">
                                <div class="bg-white/10 rounded-lg p-3 border border-white/20">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="text-white font-medium">Processo n¬∫ 001/2025</p>
                                            <p class="text-white/70 text-sm">Jo√£o Silva vs Estado</p>
                                            <p class="text-blue-300 text-sm">Hoje - 14:00</p>
                                        </div>
                                        <span class="bg-green-500 text-white px-2 py-1 rounded text-xs">Agendada</span>
                                    </div>
                                </div>
                                <div class="bg-white/10 rounded-lg p-3 border border-white/20">
                                    <div class="flex justify-between items-center">
                                        <div>
                                            <p class="text-white font-medium">Processo n¬∫ 002/2025</p>
                                            <p class="text-white/70 text-sm">Maria Santos - Furto</p>
                                            <p class="text-blue-300 text-sm">Amanh√£ - 09:00</p>
                                        </div>
                                        <span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">Pendente</span>
                                    </div>
                                </div>
                            </div>
                            <button onclick="adicionarAudiencia()" class="w-full mt-4 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg transition-all">
                                ‚ûï Nova Audi√™ncia
                            </button>
                        </div>

                        <!-- Ata da Audi√™ncia -->
                        <div class="lg:col-span-2 bg-green-900/30 rounded-lg p-6 border border-green-600/40">
                            <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                                <span class="bg-green-600 p-2 rounded-lg mr-3">üìù</span>
                                Ata da Audi√™ncia
                            </h3>
                            <textarea id="ata-audiencia" class="w-full h-32 bg-white/10 border border-white/20 rounded-lg p-4 text-white placeholder-white/50 resize-none" placeholder="Digite os pontos principais da audi√™ncia..."></textarea>
                            <div class="flex justify-between mt-4">
                                <button onclick="salvarAta()" class="bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg transition-all">
                                    üíæ Salvar Ata
                                </button>
                                <button onclick="gerarAtaCompleta()" class="bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg transition-all">
                                    üìÑ Gerar Ata Completa
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard -->
            <div id="dashboard" class="hidden">
                <div class="content-section bg-gradient-to-br from-slate-900/95 via-green-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl border-2 border-green-600/50 shadow-2xl">
                    <div class="section-header">
                        <h2 class="section-title font-bold text-white flex items-center">
                            <span class="bg-green-600 p-2 sm:p-3 rounded-lg mr-3 sm:mr-4 shadow-lg text-lg sm:text-xl">üìä</span>
                            <span class="hidden sm:inline">Dashboard Administrativo</span>
                            <span class="sm:hidden">Dashboard</span>
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="btn bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all">
                            ‚Üê <span class="hidden sm:inline">Voltar</span>
                        </button>
                    </div>

                    <!-- Estat√≠sticas Principais -->
                    <div class="stats-grid">
                        <div class="bg-blue-600/20 rounded-lg p-6 border border-blue-500/50">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-blue-300 text-sm font-medium">Processos Ativos</p>
                                    <p class="text-3xl font-bold text-white">127</p>
                                </div>
                                <div class="text-4xl">üìã</div>
                            </div>
                        </div>

                        <div class="bg-green-600/20 rounded-lg p-6 border border-green-500/50">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-green-300 text-sm font-medium">Senten√ßas Hoje</p>
                                    <p class="text-3xl font-bold text-white">8</p>
                                </div>
                                <div class="text-4xl">‚öñÔ∏è</div>
                            </div>
                        </div>

                        <div class="bg-yellow-600/20 rounded-lg p-6 border border-yellow-500/50">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-yellow-300 text-sm font-medium">Audi√™ncias Agendadas</p>
                                    <p class="text-3xl font-bold text-white">15</p>
                                </div>
                                <div class="text-4xl">üèõÔ∏è</div>
                            </div>
                        </div>

                        <div class="bg-red-600/20 rounded-lg p-6 border border-red-500/50">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-red-300 text-sm font-medium">Mandados Expedidos</p>
                                    <p class="text-3xl font-bold text-white">23</p>
                                </div>
                                <div class="text-4xl">üöî</div>
                            </div>
                        </div>
                    </div>

                    <!-- Gr√°ficos e Relat√≥rios -->
                    <div class="grid lg:grid-cols-2 gap-8">
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4">üìà Crimes por Categoria</h3>
                            <div class="space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-white">Tr√¢nsito</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-yellow-500 h-2 rounded-full" style="width: 65%"></div>
                                        </div>
                                        <span class="text-white text-sm">65%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white">Patrim√¥nio</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-red-500 h-2 rounded-full" style="width: 45%"></div>
                                        </div>
                                        <span class="text-white text-sm">45%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white">Pessoa</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-blue-500 h-2 rounded-full" style="width: 30%"></div>
                                        </div>
                                        <span class="text-white text-sm">30%</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white">Ordem P√∫blica</span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-32 bg-gray-700 rounded-full h-2">
                                            <div class="bg-purple-500 h-2 rounded-full" style="width: 25%"></div>
                                        </div>
                                        <span class="text-white text-sm">25%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4">üìä Atividade Mensal</h3>
                            <div class="space-y-4">
                                <div class="bg-green-500/20 rounded-lg p-4 border border-green-500/30">
                                    <h4 class="text-green-300 font-medium mb-2">Janeiro 2025</h4>
                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                        <div>
                                            <p class="text-white/70">Processos: <span class="text-white font-medium">89</span></p>
                                            <p class="text-white/70">Senten√ßas: <span class="text-white font-medium">67</span></p>
                                        </div>
                                        <div>
                                            <p class="text-white/70">Audi√™ncias: <span class="text-white font-medium">45</span></p>
                                            <p class="text-white/70">Mandados: <span class="text-white font-medium">123</span></p>
                                        </div>
                                    </div>
                                </div>
                                <button onclick="gerarRelatorio()" class="w-full bg-green-600 hover:bg-green-500 text-white py-2 px-4 rounded-lg transition-all">
                                    üìÑ Gerar Relat√≥rio Completo
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- √Årea do Advogado -->
            <div id="advogados" class="hidden">
                <div class="bg-gradient-to-br from-slate-900/95 via-amber-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl p-8 border-2 border-amber-600/50 shadow-2xl">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center">
                            <span class="bg-yellow-600 p-3 rounded-lg mr-4 shadow-lg text-black">üë®‚Äçüíº</span>
                            √Årea do Advogado
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg transition-all">
                            ‚Üê Voltar
                        </button>
                    </div>

                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Gerador de Peti√ß√µes -->
                        <div class="bg-blue-900/30 rounded-lg p-6 border border-blue-600/40 hover:bg-blue-900/40 transition-all cursor-pointer" onclick="abrirPeticoes()">
                            <div class="text-center">
                                <div class="text-4xl mb-4">üìù</div>
                                <h3 class="text-lg font-bold text-white mb-2">Gerador de Peti√ß√µes</h3>
                                <p class="text-blue-200 text-sm">Peti√ß√µes autom√°ticas</p>
                            </div>
                        </div>

                        <!-- Calculadora de Honor√°rios -->
                        <div class="bg-green-900/30 rounded-lg p-6 border border-green-600/40 hover:bg-green-900/40 transition-all cursor-pointer" onclick="abrirHonorarios()">
                            <div class="text-center">
                                <div class="text-4xl mb-4">üí∞</div>
                                <h3 class="text-lg font-bold text-white mb-2">Calc. Honor√°rios</h3>
                                <p class="text-green-200 text-sm">Calcular valores</p>
                            </div>
                        </div>

                        <!-- Agenda de Clientes -->
                        <div class="bg-purple-900/30 rounded-lg p-6 border border-purple-600/40 hover:bg-purple-900/40 transition-all cursor-pointer" onclick="abrirAgenda()">
                            <div class="text-center">
                                <div class="text-4xl mb-4">üìÖ</div>
                                <h3 class="text-lg font-bold text-white mb-2">Agenda de Clientes</h3>
                                <p class="text-purple-200 text-sm">Gerenciar clientes</p>
                            </div>
                        </div>

                        <!-- Procura√ß√µes -->
                        <div class="bg-red-900/30 rounded-lg p-6 border border-red-600/40 hover:bg-red-900/40 transition-all cursor-pointer" onclick="abrirProcuracoes()">
                            <div class="text-center">
                                <div class="text-4xl mb-4">üìã</div>
                                <h3 class="text-lg font-bold text-white mb-2">Procura√ß√µes</h3>
                                <p class="text-red-200 text-sm">Modelos de procura√ß√£o</p>
                            </div>
                        </div>

                        <!-- Contratos -->
                        <div class="bg-orange-900/30 rounded-lg p-6 border border-orange-600/40 hover:bg-orange-900/40 transition-all cursor-pointer" onclick="abrirContratos()">
                            <div class="text-center">
                                <div class="text-4xl mb-4">üìÑ</div>
                                <h3 class="text-lg font-bold text-white mb-2">Contratos</h3>
                                <p class="text-orange-200 text-sm">Modelos jur√≠dicos</p>
                            </div>
                        </div>

                        <!-- Jurisprud√™ncia -->
                        <div class="bg-indigo-900/30 rounded-lg p-6 border border-indigo-600/40 hover:bg-indigo-900/40 transition-all cursor-pointer" onclick="abrirJurisprudencia()">
                            <div class="text-center">
                                <div class="text-4xl mb-4">üìö</div>
                                <h3 class="text-lg font-bold text-white mb-2">Jurisprud√™ncia</h3>
                                <p class="text-indigo-200 text-sm">Banco de decis√µes</p>
                            </div>
                        </div>
                    </div>

                    <!-- √Årea de Trabalho do Advogado -->
                    <div id="area-advogado" class="mt-8 hidden">
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4" id="titulo-advogado">Ferramenta</h3>
                            <div id="conteudo-advogado">
                                <!-- Conte√∫do espec√≠fico ser√° inserido aqui -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gest√£o Processual -->
            <div id="processos" class="hidden">
                <div class="bg-gradient-to-br from-slate-900/95 via-indigo-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl p-8 border-2 border-indigo-600/50 shadow-2xl">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center">
                            <span class="bg-indigo-600 p-3 rounded-lg mr-4 shadow-lg">üóÉÔ∏è</span>
                            Gest√£o Processual
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg transition-all">
                            ‚Üê Voltar
                        </button>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-6">
                        <!-- Lista de Processos -->
                        <div class="lg:col-span-2 bg-white/10 rounded-lg p-6 border border-white/20">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-bold text-white">üìã Processos Ativos</h3>
                                <button onclick="novoProcesso()" class="bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg transition-all">
                                    ‚ûï Novo Processo
                                </button>
                            </div>
                            <div class="space-y-3 max-h-96 overflow-y-auto">
                                <div class="bg-indigo-900/30 rounded-lg p-4 border border-indigo-600/40">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h4 class="text-white font-bold">Processo n¬∫ 001/2025</h4>
                                            <p class="text-white/70 text-sm">Jo√£o Silva - Furto Qualificado</p>
                                            <p class="text-indigo-300 text-sm">Iniciado: 15/01/2025</p>
                                        </div>
                                        <div class="text-right">
                                            <span class="bg-yellow-500 text-black px-2 py-1 rounded text-xs font-medium">Em Andamento</span>
                                            <p class="text-white/70 text-xs mt-1">Pr√≥x: Audi√™ncia 20/01</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-green-900/30 rounded-lg p-4 border border-green-600/40">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h4 class="text-white font-bold">Processo n¬∫ 002/2025</h4>
                                            <p class="text-white/70 text-sm">Maria Santos - Les√£o Corporal</p>
                                            <p class="text-green-300 text-sm">Iniciado: 10/01/2025</p>
                                        </div>
                                        <div class="text-right">
                                            <span class="bg-green-500 text-white px-2 py-1 rounded text-xs font-medium">Sentenciado</span>
                                            <p class="text-white/70 text-xs mt-1">Multa: R$ 1.200</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="bg-red-900/30 rounded-lg p-4 border border-red-600/40">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <h4 class="text-white font-bold">Processo n¬∫ 003/2025</h4>
                                            <p class="text-white/70 text-sm">Carlos Oliveira - Homic√≠dio</p>
                                            <p class="text-red-300 text-sm">Iniciado: 08/01/2025</p>
                                        </div>
                                        <div class="text-right">
                                            <span class="bg-red-500 text-white px-2 py-1 rounded text-xs font-medium">Urgente</span>
                                            <p class="text-white/70 text-xs mt-1">Prazo: 2 dias</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Controle de Prazos -->
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4">‚è∞ Controle de Prazos</h3>
                            <div class="space-y-3">
                                <div class="bg-red-500/20 rounded-lg p-3 border border-red-500/50">
                                    <p class="text-red-300 font-medium text-sm">VENCENDO HOJE</p>
                                    <p class="text-white text-sm">Resposta √† acusa√ß√£o</p>
                                    <p class="text-white/70 text-xs">Processo 003/2025</p>
                                </div>

                                <div class="bg-yellow-500/20 rounded-lg p-3 border border-yellow-500/50">
                                    <p class="text-yellow-300 font-medium text-sm">2 DIAS</p>
                                    <p class="text-white text-sm">Intima√ß√£o testemunhas</p>
                                    <p class="text-white/70 text-xs">Processo 001/2025</p>
                                </div>

                                <div class="bg-green-500/20 rounded-lg p-3 border border-green-500/50">
                                    <p class="text-green-300 font-medium text-sm">5 DIAS</p>
                                    <p class="text-white text-sm">Recurso de apela√ß√£o</p>
                                    <p class="text-white/70 text-xs">Processo 004/2025</p>
                                </div>
                            </div>

                            <button onclick="adicionarPrazo()" class="w-full mt-4 bg-indigo-600 hover:bg-indigo-500 text-white py-2 px-4 rounded-lg transition-all">
                                ‚ûï Adicionar Prazo
                            </button>
                        </div>
                    </div>

                    <!-- Sistema de Processos em Tempo Real 24/7 -->
                    <div class="mt-8 bg-gradient-to-br from-purple-900/40 via-indigo-900/30 to-purple-800/50 rounded-xl p-6 border-2 border-purple-500/50">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-2xl font-bold text-white flex items-center">
                                <span class="bg-purple-600 p-2 rounded-lg mr-3">üîÑ</span>
                                Sistema 24/7 - Brasil√¢ndia RP
                            </h3>
                            <div class="flex items-center space-x-2">
                                <div id="status-sistema" class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                                <span class="text-green-300 text-sm font-medium">Sistema Online</span>
                            </div>
                        </div>

                        <div class="grid lg:grid-cols-4 gap-4 mb-6">
                            <!-- Novo Processo -->
                            <div class="bg-blue-600/20 rounded-lg p-4 border border-blue-500/50">
                                <h4 class="text-blue-300 font-bold mb-3">üìã Novo Processo</h4>
                                <input type="text" id="nome-reu-novo" placeholder="Nome do r√©u..." class="w-full mb-2 px-3 py-2 rounded bg-gray-900 border border-blue-500/50 text-white text-sm">
                                <input type="text" id="crime-novo" placeholder="Crime..." class="w-full mb-2 px-3 py-2 rounded bg-gray-900 border border-blue-500/50 text-white text-sm">
                                <select id="advogado-processo" class="w-full mb-3 px-3 py-2 rounded bg-gray-900 border border-blue-500/50 text-white text-sm">
                                    <option value="">Selecionar Advogado</option>
                                    <option value="Dr. Carlos Silva">Dr. Carlos Silva</option>
                                    <option value="Dra. Ana Santos">Dra. Ana Santos</option>
                                    <option value="Dr. Jo√£o Oliveira">Dr. Jo√£o Oliveira</option>
                                </select>
                                <button onclick="criarNovoProcesso()" class="w-full bg-blue-600 hover:bg-blue-500 text-white py-2 px-3 rounded transition-all text-sm">
                                    ‚öñÔ∏è Abrir Processo
                                </button>
                            </div>

                            <!-- Assumir Processo -->
                            <div class="bg-green-600/20 rounded-lg p-4 border border-green-500/50">
                                <h4 class="text-green-300 font-bold mb-3">üë®‚Äç‚öñÔ∏è Assumir como Juiz</h4>
                                <select id="processo-assumir" class="w-full mb-3 px-3 py-2 rounded bg-gray-900 border border-green-500/50 text-white text-sm">
                                    <option value="">Selecionar Processo</option>
                                </select>
                                <input type="text" id="juiz-nome" placeholder="Nome do Juiz..." class="w-full mb-3 px-3 py-2 rounded bg-gray-900 border border-green-500/50 text-white text-sm">
                                <button onclick="assumirProcesso()" class="w-full bg-green-600 hover:bg-green-500 text-white py-2 px-3 rounded transition-all text-sm">
                                    ‚öñÔ∏è Assumir Processo
                                </button>
                            </div>

                            <!-- Intima√ß√µes -->
                            <div class="bg-yellow-600/20 rounded-lg p-4 border border-yellow-500/50">
                                <h4 class="text-yellow-300 font-bold mb-3">üì® Enviar Intima√ß√£o</h4>
                                <select id="processo-intimar" class="w-full mb-2 px-3 py-2 rounded bg-gray-900 border border-yellow-500/50 text-white text-sm">
                                    <option value="">Selecionar Processo</option>
                                </select>
                                <input type="text" id="intimado-nome" placeholder="Nome da parte..." class="w-full mb-2 px-3 py-2 rounded bg-gray-900 border border-yellow-500/50 text-white text-sm">
                                <input type="text" id="intimacao-motivo" placeholder="Motivo da intima√ß√£o..." class="w-full mb-3 px-3 py-2 rounded bg-gray-900 border border-yellow-500/50 text-white text-sm">
                                <button onclick="enviarIntimacao()" class="w-full bg-yellow-600 hover:bg-yellow-500 text-white py-2 px-3 rounded transition-all text-sm">
                                    üì® Enviar Intima√ß√£o
                                </button>
                            </div>

                            <!-- Sentenciar -->
                            <div class="bg-red-600/20 rounded-lg p-4 border border-red-500/50">
                                <h4 class="text-red-300 font-bold mb-3">‚öñÔ∏è Sentenciar</h4>
                                <select id="processo-sentenciar" class="w-full mb-2 px-3 py-2 rounded bg-gray-900 border border-red-500/50 text-white text-sm">
                                    <option value="">Selecionar Processo</option>
                                </select>
                                <select id="tipo-sentenca" class="w-full mb-2 px-3 py-2 rounded bg-gray-900 border border-red-500/50 text-white text-sm">
                                    <option value="condenacao">Condena√ß√£o</option>
                                    <option value="absolvicao">Absolvi√ß√£o</option>
                                    <option value="arquivamento">Arquivamento</option>
                                </select>
                                <input type="text" id="valor-multa" placeholder="Valor da multa (R$)..." class="w-full mb-3 px-3 py-2 rounded bg-gray-900 border border-red-500/50 text-white text-sm">
                                <button onclick="sentenciarProcesso()" class="w-full bg-red-600 hover:bg-red-500 text-white py-2 px-3 rounded transition-all text-sm">
                                    ‚öñÔ∏è Sentenciar
                                </button>
                            </div>
                        </div>

                        <!-- Log de Atividades em Tempo Real -->
                        <div class="bg-black/30 rounded-lg p-4 border border-white/20">
                            <h4 class="text-white font-bold mb-3 flex items-center">
                                <span class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                                Log de Atividades - Tempo Real
                            </h4>
                            <div id="log-atividades" class="bg-gray-900 rounded p-3 max-h-32 overflow-y-auto text-sm font-mono">
                                <div class="text-green-400">[07/08/2025 15:30:25] Sistema iniciado - Brasil√¢ndia RP</div>
                                <div class="text-blue-400">[07/08/2025 15:30:26] Aguardando novos processos...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cadastro de R√©us -->
            <div id="reus" class="hidden">
                <div class="bg-gradient-to-br from-slate-900/95 via-orange-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl p-8 border-2 border-orange-600/50 shadow-2xl">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center">
                            <span class="bg-orange-600 p-3 rounded-lg mr-4 shadow-lg">üë§</span>
                            Cadastro de R√©us
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg transition-all">
                            ‚Üê Voltar
                        </button>
                    </div>

                    <div class="grid lg:grid-cols-3 gap-6">
                        <!-- Busca de R√©us -->
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4">üîç Buscar R√©u</h3>
                            <div class="space-y-4">
                                <input type="text" id="busca-reu" placeholder="Nome ou CPF..." class="w-full px-3 py-2 rounded-lg bg-gray-900 border border-orange-500/50 text-white placeholder-gray-400">
                                <button onclick="buscarReu()" class="w-full bg-orange-600 hover:bg-orange-500 text-white py-2 px-4 rounded-lg transition-all">
                                    üîç Buscar
                                </button>
                            </div>

                            <div class="mt-6">
                                <h4 class="text-white font-bold mb-3">üìä Estat√≠sticas</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-white/70">Total de R√©us:</span>
                                        <span class="text-white font-medium">1,247</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-white/70">Prim√°rios:</span>
                                        <span class="text-green-300 font-medium">892</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-white/70">Reincidentes:</span>
                                        <span class="text-red-300 font-medium">355</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Dados do R√©u -->
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4">üë§ Dados Pessoais</h3>
                            <div id="dados-reu" class="space-y-3">
                                <div class="bg-orange-900/30 rounded-lg p-4 border border-orange-600/40">
                                    <h4 class="text-orange-300 font-bold mb-2">Jo√£o Silva Santos</h4>
                                    <div class="text-sm space-y-1">
                                        <p class="text-white/70">CPF: <span class="text-white">123.456.789-00</span></p>
                                        <p class="text-white/70">RG: <span class="text-white">12.345.678-9</span></p>
                                        <p class="text-white/70">Nascimento: <span class="text-white">15/03/1985</span></p>
                                        <p class="text-white/70">Endere√ßo: <span class="text-white">Rua A, 123 - Centro</span></p>
                                    </div>
                                    <div class="mt-3 flex space-x-2">
                                        <span class="bg-red-500 text-white px-2 py-1 rounded text-xs">Reincidente</span>
                                        <span class="bg-yellow-500 text-black px-2 py-1 rounded text-xs">Em Liberdade</span>
                                    </div>
                                </div>
                            </div>
                            <button onclick="novoReu()" class="w-full mt-4 bg-orange-600 hover:bg-orange-500 text-white py-2 px-4 rounded-lg transition-all">
                                ‚ûï Cadastrar Novo R√©u
                            </button>
                        </div>

                        <!-- Hist√≥rico Criminal -->
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-xl font-bold text-white mb-4">üìú Hist√≥rico Criminal</h3>
                            <div class="space-y-3 max-h-80 overflow-y-auto">
                                <div class="bg-red-900/30 rounded-lg p-3 border border-red-600/40">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="text-white font-medium text-sm">Furto Qualificado</p>
                                            <p class="text-red-300 text-xs">Processo 045/2024</p>
                                            <p class="text-white/70 text-xs">15/08/2024</p>
                                        </div>
                                        <span class="bg-red-500 text-white px-2 py-1 rounded text-xs">Condenado</span>
                                    </div>
                                    <p class="text-white/70 text-xs mt-2">Pena: 18 meses + R$ 2.500</p>
                                </div>

                                <div class="bg-yellow-900/30 rounded-lg p-3 border border-yellow-600/40">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="text-white font-medium text-sm">Les√£o Corporal</p>
                                            <p class="text-yellow-300 text-xs">Processo 023/2023</p>
                                            <p class="text-white/70 text-xs">22/03/2023</p>
                                        </div>
                                        <span class="bg-yellow-500 text-black px-2 py-1 rounded text-xs">Absolvido</span>
                                    </div>
                                </div>

                                <div class="bg-blue-900/30 rounded-lg p-3 border border-blue-600/40">
                                    <div class="flex justify-between items-start">
                                        <div>
                                            <p class="text-white font-medium text-sm">Dire√ß√£o Perigosa</p>
                                            <p class="text-blue-300 text-xs">Processo 089/2022</p>
                                            <p class="text-white/70 text-xs">10/11/2022</p>
                                        </div>
                                        <span class="bg-blue-500 text-white px-2 py-1 rounded text-xs">Multa</span>
                                    </div>
                                    <p class="text-white/70 text-xs mt-2">Pena: R$ 1.800</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sistema Mobile -->
            <div id="mobile" class="hidden">
                <div class="content-section bg-gradient-to-br from-slate-900/95 via-pink-900/30 to-slate-800/95 backdrop-blur-lg rounded-2xl border-2 border-pink-600/50 shadow-2xl">
                    <div class="section-header">
                        <h2 class="section-title font-bold text-white flex items-center">
                            <span class="bg-pink-600 p-2 sm:p-3 rounded-lg mr-3 sm:mr-4 shadow-lg text-lg sm:text-xl">üì±</span>
                            <span class="hidden sm:inline">Sistema Mobile</span>
                            <span class="sm:hidden">Mobile</span>
                        </h2>
                        <button onclick="mostrarSecao('inicial')" class="btn bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-all">
                            ‚Üê <span class="hidden sm:inline">Voltar</span>
                        </button>
                    </div>

                    <div class="responsive-grid">
                        <!-- Simulador Mobile -->
                        <div class="lg:col-span-2">
                            <h3 class="text-lg sm:text-xl font-bold text-white mb-4">üì± <span class="hidden sm:inline">Simulador de App Mobile</span><span class="sm:hidden">App Mobile</span></h3>
                            <div class="mobile-simulator bg-gray-900 rounded-3xl p-4 sm:p-6 border-4 border-gray-700">
                                <!-- Tela do celular -->
                                <div class="bg-white rounded-2xl p-4 h-96 overflow-y-auto">
                                    <div class="text-center mb-4">
                                        <h4 class="text-lg font-bold text-gray-800">Justi√ßa BR</h4>
                                        <p class="text-sm text-gray-600">Brasil√¢ndia RP</p>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <div class="bg-blue-100 rounded-lg p-3 border border-blue-300">
                                            <h5 class="font-bold text-blue-800 text-sm">üîç Consultar Processo</h5>
                                            <p class="text-xs text-blue-600">Digite o n√∫mero do processo</p>
                                        </div>
                                        
                                        <div class="bg-green-100 rounded-lg p-3 border border-green-300">
                                            <h5 class="font-bold text-green-800 text-sm">üìã Meus Processos</h5>
                                            <p class="text-xs text-green-600">Acompanhe seus casos</p>
                                        </div>
                                        
                                        <div class="bg-yellow-100 rounded-lg p-3 border border-yellow-300">
                                            <h5 class="font-bold text-yellow-800 text-sm">üîî Notifica√ß√µes</h5>
                                            <p class="text-xs text-yellow-600">2 novas atualiza√ß√µes</p>
                                        </div>
                                        
                                        <div class="bg-purple-100 rounded-lg p-3 border border-purple-300">
                                            <h5 class="font-bold text-purple-800 text-sm">üìÑ Documentos</h5>
                                            <p class="text-xs text-purple-600">Baixar certid√µes</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Funcionalidades Mobile -->
                        <div class="space-y-6">
                            <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                                <h3 class="text-xl font-bold text-white mb-4">üîî Notifica√ß√µes Push</h3>
                                <div class="space-y-3">
                                    <div class="bg-blue-500/20 rounded-lg p-3 border border-blue-500/50">
                                        <p class="text-blue-300 font-medium text-sm">Nova Audi√™ncia</p>
                                        <p class="text-white text-xs">Processo 001/2025 - 20/01 √†s 14h</p>
                                    </div>
                                    <div class="bg-green-500/20 rounded-lg p-3 border border-green-500/50">
                                        <p class="text-green-300 font-medium text-sm">Senten√ßa Publicada</p>
                                        <p class="text-white text-xs">Processo 002/2025 - Consulte o resultado</p>
                                    </div>
                                    <div class="bg-yellow-500/20 rounded-lg p-3 border border-yellow-500/50">
                                        <p class="text-yellow-300 font-medium text-sm">Prazo Vencendo</p>
                                        <p class="text-white text-xs">Recurso - 2 dias restantes</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                                <h3 class="text-xl font-bold text-white mb-4">üìä QR Code</h3>
                                <div class="text-center">
                                    <div class="bg-white rounded-lg p-4 inline-block mb-3">
                                        <div class="w-24 h-24 bg-black rounded-lg flex items-center justify-center">
                                            <span class="text-white text-xs">QR CODE</span>
                                        </div>
                                    </div>
                                    <p class="text-white/70 text-sm">Escaneie para acessar o processo</p>
                                    <button onclick="gerarQRCode()" class="mt-3 bg-pink-600 hover:bg-pink-500 text-white px-4 py-2 rounded-lg transition-all text-sm">
                                        üîÑ Gerar Novo QR
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tela de Primeiro Acesso -->
    <div id="primeiro-acesso" class="fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center p-2 overflow-y-auto hidden">
        <div class="w-full max-w-md mx-auto bg-gradient-to-br from-gray-800/80 to-gray-700/80 backdrop-blur-xl rounded-2xl p-4 border-2 border-yellow-600/50 shadow-2xl my-4 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-4">
                <div class="text-3xl mb-3">üÜï</div>
                <h1 class="text-xl font-black text-transparent bg-gradient-to-r from-yellow-400 via-yellow-300 to-yellow-500 bg-clip-text mb-2">
                    PRIMEIRO ACESSO
                </h1>
                <p class="text-sm text-yellow-300 font-bold">Configure sua conta no sistema</p>
                <div class="w-12 h-1 bg-gradient-to-r from-yellow-600 to-yellow-500 mx-auto mt-3 rounded-full"></div>
            </div>
            
            <form id="form-primeiro-acesso" class="space-y-4">
                <div>
                    <label class="block text-white font-bold mb-2 text-sm flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        N√∫mero OAB/Credencial
                    </label>
                    <input 
                        type="text" 
                        id="oab-recebida" 
                        placeholder="Digite o n√∫mero liberado pelo admin..." 
                        class="w-full px-4 py-3 rounded-lg bg-gray-800/80 border-2 border-yellow-600/50 text-white placeholder-gray-400 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/50 transition-all text-sm"
                        onblur="verificarOABLiberada()"
                    >
                    <p class="text-yellow-300 text-xs mt-1">üí° Use o n√∫mero fornecido pelo administrador</p>
                </div>
                
                <!-- Informa√ß√µes do Cargo (aparece ap√≥s verificar OAB) -->
                <div id="info-cargo" class="bg-blue-500/20 rounded-lg p-4 border border-blue-500/50 hidden">
                    <h4 class="text-blue-300 font-bold mb-2">üèõÔ∏è Informa√ß√µes do Cargo</h4>
                    <div class="text-white text-sm space-y-1">
                        <p><span class="font-bold">Cargo:</span> <span id="cargo-info">-</span></p>
                        <p><span class="font-bold">N√≠vel:</span> <span id="nivel-info">-</span></p>
                        <p><span class="font-bold">Dom√≠nio:</span> <span id="dominio-info" class="text-green-300 font-mono">-</span></p>
                    </div>
                </div>
                
                <div>
                    <label class="block text-white font-bold mb-2 text-sm flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        Nome Completo
                    </label>
                    <input 
                        type="text" 
                        id="nome-completo" 
                        placeholder="Digite seu nome completo..." 
                        class="w-full px-4 py-3 rounded-lg bg-gray-800/80 border-2 border-yellow-600/50 text-white placeholder-gray-400 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/50 transition-all text-sm"
                        oninput="atualizarPreviewEmail()"
                    >
                </div>
                
                <!-- Preview do Email (aparece ap√≥s digitar nome) -->
                <div id="preview-email" class="bg-green-500/20 rounded-lg p-4 border border-green-500/50 hidden">
                    <h4 class="text-green-300 font-bold mb-2">üìß Seu Email de Login</h4>
                    <div class="text-white">
                        <p class="text-sm mb-1">Voc√™ far√° login com:</p>
                        <p class="font-mono bg-gray-900 p-2 rounded text-green-300" id="email-preview">
                            nome.sobrenome@dominio.jus.br
                        </p>
                        <p class="text-xs text-green-200 mt-2">
                            ‚úÖ Email gerado automaticamente baseado no seu nome e cargo
                        </p>
                    </div>
                </div>
                
                <div>
                    <label class="block text-white font-bold mb-2 text-sm flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                        </svg>
                        Senha
                    </label>
                    <input 
                        type="password" 
                        id="nova-senha" 
                        placeholder="Crie uma senha segura..." 
                        class="w-full px-4 py-3 rounded-lg bg-gray-800/80 border-2 border-yellow-600/50 text-white placeholder-gray-400 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/50 transition-all text-sm"
                    >
                </div>
                
                <div>
                    <label class="block text-white font-bold mb-2 text-sm flex items-center">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                        </svg>
                        Confirmar Senha
                    </label>
                    <input 
                        type="password" 
                        id="confirmar-senha" 
                        placeholder="Repita a senha..." 
                        class="w-full px-4 py-3 rounded-lg bg-gray-800/80 border-2 border-yellow-600/50 text-white placeholder-gray-400 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-500/50 transition-all text-sm"
                    >
                </div>
                
                <div class="flex gap-3 mt-6">
                    <button 
                        type="button"
                        onclick="fecharPrimeiroAcesso()"
                        class="flex-1 bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-4 rounded-lg transition-all text-sm flex items-center justify-center"
                    >
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                        Cancelar
                    </button>
                    <button 
                        type="submit"
                        class="flex-1 bg-gradient-to-r from-yellow-700 to-yellow-600 text-black font-bold py-3 px-4 rounded-lg hover:from-yellow-600 hover:to-yellow-500 transition-all text-sm flex items-center justify-center"
                    >
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Criar Conta
                    </button>
                </div>
            </form>
            
            <div id="mensagem-primeiro-acesso" class="mt-4 p-3 rounded-lg hidden">
                <p id="texto-mensagem-primeiro" class="text-center font-bold text-sm"></p>
            </div>
            
            <!-- Informa√ß√µes sobre o cadastro -->
            <div class="mt-4 bg-yellow-500/20 rounded-lg p-3 border border-yellow-500/30">
                <h4 class="text-yellow-300 font-bold text-center mb-2 text-sm flex items-center justify-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    COMO FUNCIONA
                </h4>
                <div class="text-white text-xs space-y-1">
                    <p>‚Ä¢ Digite a OAB/credencial liberada pelo administrador</p>
                    <p>‚Ä¢ Seu cargo e dom√≠nio aparecer√£o automaticamente</p>
                    <p>‚Ä¢ Digite seu nome completo para gerar o email</p>
                    <p>‚Ä¢ Crie uma senha segura (m√≠nimo 6 caracteres)</p>
                    <p>‚Ä¢ Ap√≥s criar a conta, fa√ßa login com o email gerado</p>
                </div>
            </div>
            
            <!-- Rodap√© -->
            <div class="mt-4 text-center">
                <p class="text-white/60 text-xs flex items-center justify-center">
                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                    </svg>
                    Sistema Seguro | v2025.1
                </p>
            </div>
        </div>
    </div>

    <script>
        // Vari√°veis globais
        let cronometroInterval;
        let tempoInicio = 0;
        let tempoPausado = 0;
        let cronometroAtivo = false;
        
        // Sistema Firebase - Dados em tempo real
        let usuariosOnline = {};
        let listeners = []; // Para gerenciar listeners do Firebase
        
        // Fun√ß√£o para salvar dados no Firebase
        async function salvarDados() {
            try {
                // Salvar no Firebase em tempo real
                await Promise.all([
                    salvarDadosFirebase('usuarios_cadastrados', 'dados', usuariosCadastrados),
                    salvarDadosFirebase('registros_oab', 'dados', registrosOAB),
                    salvarDadosFirebase('usuarios_online', 'dados', usuariosOnline)
                ]);
                console.log('‚úÖ Dados salvos no Firebase com sucesso!');
            } catch (error) {
                console.error('‚ùå Erro ao salvar dados:', error);
                // Fallback para localStorage em caso de erro
                localStorage.setItem('usuariosCadastrados', JSON.stringify(usuariosCadastrados));
                localStorage.setItem('registrosOAB', JSON.stringify(registrosOAB));
                localStorage.setItem('usuariosOnline', JSON.stringify(usuariosOnline));
            }
        }
        
        // Fun√ß√£o para carregar dados do Firebase em tempo real
        async function carregarDadosFirebase() {
            try {
                console.log('üîÑ Carregando dados do Firebase...');
                
                // Listener para usu√°rios cadastrados
                const unsubscribeUsuarios = firebaseModules.onSnapshot(
                    firebaseModules.doc(dbInstance, 'usuarios_cadastrados', 'dados'),
                    (doc) => {
                        if (doc.exists()) {
                            usuariosCadastrados = doc.data() || {};
                            console.log('üë• Usu√°rios cadastrados atualizados:', Object.keys(usuariosCadastrados).length);
                            atualizarInterfaceUsuarios();
                        }
                    }
                );
                listeners.push(unsubscribeUsuarios);
                
                // Listener para registros OAB
                const unsubscribeOAB = firebaseModules.onSnapshot(
                    firebaseModules.doc(dbInstance, 'registros_oab', 'dados'),
                    (doc) => {
                        if (doc.exists()) {
                            registrosOAB = doc.data() || {};
                            console.log('üìã Registros OAB atualizados:', Object.keys(registrosOAB).length);
                        }
                    }
                );
                listeners.push(unsubscribeOAB);
                
                // Listener para usu√°rios online
                const unsubscribeOnline = firebaseModules.onSnapshot(
                    firebaseModules.doc(dbInstance, 'usuarios_online', 'dados'),
                    (doc) => {
                        if (doc.exists()) {
                            usuariosOnline = doc.data() || {};
                            console.log('üåê Usu√°rios online atualizados:', Object.keys(usuariosOnline).length);
                            atualizarContadorOnline();
                        }
                    }
                );
                listeners.push(unsubscribeOnline);
                
                console.log('‚úÖ Listeners Firebase configurados com sucesso!');
                
            } catch (error) {
                console.error('‚ùå Erro ao configurar listeners Firebase:', error);
                // Fallback para localStorage
                usuariosCadastrados = JSON.parse(localStorage.getItem('usuariosCadastrados')) || {};
                registrosOAB = JSON.parse(localStorage.getItem('registrosOAB')) || {};
                usuariosOnline = JSON.parse(localStorage.getItem('usuariosOnline')) || {};
            }
        }
        
        // Fun√ß√£o para atualizar interface quando dados mudarem
        function atualizarInterfaceUsuarios() {
            // Atualizar contadores e estat√≠sticas em tempo real
            const totalUsuarios = Object.keys(usuariosCadastrados).length;
            const usuariosNomeados = Object.values(usuariosCadastrados).filter(u => u.nomeado).length;
            
            // Atualizar elementos da interface se existirem
            const elementos = document.querySelectorAll('[data-update="usuarios"]');
            elementos.forEach(el => {
                if (el.dataset.tipo === 'total') el.textContent = totalUsuarios;
                if (el.dataset.tipo === 'nomeados') el.textContent = usuariosNomeados;
            });
        }

        // Sistema Firebase Real
        let authInstance, dbInstance, firebaseModules;
        
        // Aguardar Firebase carregar
        window.addEventListener('load', async () => {
            // Aguardar Firebase estar dispon√≠vel
            while (!window.firebaseAuth) {
                await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            authInstance = window.firebaseAuth;
            dbInstance = window.firebaseDB;
            firebaseModules = window.firebaseModules;
            
            console.log('üî• Firebase conectado!');
            
            // Carregar dados em tempo real ANTES da autentica√ß√£o
            await carregarDadosFirebase();
            
            // Verificar se usu√°rio j√° est√° logado
            firebaseModules.onAuthStateChanged(authInstance, async (user) => {
                if (user) {
                    console.log('üë§ Usu√°rio logado:', user.email);
                    await carregarDadosUsuario(user);
                    esconderTelaLogin();
                } else {
                    console.log('üö™ Usu√°rio n√£o logado');
                    mostrarTelaLogin();
                }
            });
            
            // Tentar criar usu√°rio admin (sem bloquear se falhar)
            try {
                await criarUsuarioAdminInicial();
            } catch (error) {
                console.log('‚ö†Ô∏è Admin j√° existe ou sem permiss√µes:', error.message);
            }
        });

        // ===== FUN√á√ÉO PARA GERAR EMAILS AUTOM√ÅTICOS =====
        
        function gerarEmailPorCargo(nomeCompleto, cargo) {
            // Normalizar nome para email (remover acentos, espa√ßos, etc.)
            const nomeNormalizado = nomeCompleto
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '') // Remove acentos
                .replace(/[^a-z0-9\s]/g, '') // Remove caracteres especiais
                .trim()
                .replace(/\s+/g, '.'); // Substitui espa√ßos por pontos
            
            // Obter dom√≠nio do cargo da estrutura principal
            const cargoInfo = estruturaJudicial[cargo];
            const dominio = cargoInfo ? cargoInfo.dominio : '@juridico.gov.br';
            
            return `${nomeNormalizado}${dominio}`;
        }
        
        // ===== FUN√á√ïES FIREBASE REAIS =====
        
        // Criar usu√°rio admin inicial
        async function criarUsuarioAdminInicial() {
            try {
                const adminEmail = 'alexandre.moraes@stf.brasilandia.gov.br';
                const adminPassword = 'STF2025@Seguro';
                
                console.log('üîç Verificando se admin j√° existe...');
                
                // Tentar verificar se admin j√° existe (pode falhar por permiss√µes)
                let adminExists = false;
                try {
                    const adminDoc = await firebaseModules.getDoc(firebaseModules.doc(dbInstance, 'usuarios', adminEmail));
                    adminExists = adminDoc.exists();
                    console.log('üìÑ Admin existe:', adminExists);
                } catch (permError) {
                    console.log('‚ö†Ô∏è N√£o foi poss√≠vel verificar se admin existe (permiss√µes)');
                    // Continuar tentando criar
                }
                
                if (!adminExists) {
                    console.log('üëë Tentando criar usu√°rio admin inicial...');
                    
                    // Tentar criar usu√°rio no Firebase Auth
                    try {
                        const userCredential = await firebaseModules.createUserWithEmailAndPassword(authInstance, adminEmail, adminPassword);
                        console.log('‚úÖ Usu√°rio admin criado no Auth:', userCredential.user.uid);
                        
                        // Tentar criar dados do usu√°rio no Firestore
                        try {
                            await firebaseModules.setDoc(firebaseModules.doc(dbInstance, 'usuarios', adminEmail), {
                                nome: 'Alexandre de Moraes',
                                email: adminEmail,
                                cargo: 'ministro_stf',
                                titulo: 'Ministro do Supremo Tribunal Federal',
                                permissoes: ['todas', 'suprema_autoridade', 'nomeacao_geral'],
                                isAdmin: true,
                                nivel_hierarquico: 1,
                                oab: 'STF-001',
                                nomeado: true,
                                nomeado_por: 'Sistema',
                                data_nomeacao: new Date().toISOString(),
                                pode_nomear: estruturaJudicial['ministro_stf'].pode_nomear,
                                ativo: true,
                                data_criacao: new Date().toISOString()
                            });
                            console.log('üëë Dados do admin salvos no Firestore!');
                        } catch (firestoreError) {
                            console.log('‚ö†Ô∏è Erro ao salvar dados no Firestore:', firestoreError.message);
                        }
                        
                    } catch (authError) {
                        if (authError.code === 'auth/email-already-in-use') {
                            console.log('‚úÖ Admin j√° existe no Auth');
                        } else {
                            console.log('‚ö†Ô∏è Erro ao criar admin no Auth:', authError.message);
                        }
                    }
                } else {
                    console.log('‚úÖ Admin j√° existe no sistema');
                }
            } catch (error) {
                console.log('‚ö†Ô∏è Erro geral ao verificar/criar admin:', error.message);
            }
        }
        
        // Carregar dados do usu√°rio logado
        async function carregarDadosUsuario(user) {
            try {
                console.log('üîç Buscando dados do usu√°rio:', user.email);
                
                let userData = null;
                
                // Tentar buscar dados do usu√°rio
                try {
                    const userDoc = await firebaseModules.getDoc(firebaseModules.doc(dbInstance, 'usuarios', user.email));
                    if (userDoc.exists()) {
                        userData = userDoc.data();
                        console.log('üìÑ Dados encontrados:', userData);
                    } else {
                        console.log('üìÑ Documento do usu√°rio n√£o encontrado');
                    }
                } catch (firestoreError) {
                    console.log('‚ö†Ô∏è Erro ao buscar dados no Firestore:', firestoreError.message);
                }
                
                // Se encontrou dados, configurar usu√°rio
                if (userData) {
                    usuarioLogado = {
                        uid: user.uid,
                        email: user.email,
                        nome: userData.nome,
                        titulo: userData.titulo,
                        cargo: userData.cargo,
                        permissoes: userData.permissoes || [],
                        isAdmin: userData.isAdmin || false,
                        oab: userData.oab || 'N/A',
                        pode_nomear: userData.pode_nomear || [],
                        loginTime: new Date()
                    };
                    
                    console.log('üë§ Usu√°rio logado configurado:', usuarioLogado);
                    
                    // Inicializar sistema de sincroniza√ß√£o entre portais
                    setTimeout(() => {
                        receberProcessosSincronizados();
                        console.log('üîÑ Sistema de sincroniza√ß√£o de processos inicializado');
                    }, 1000);
                    
                    // Aguardar um pouco para garantir que os elementos DOM estejam prontos
                    setTimeout(() => {
                        atualizarInterfaceUsuario();
                    }, 500);
                    
                    console.log('‚úÖ Dados do usu√°rio carregados:', usuarioLogado.nome);
                    
                } else {
                    // Se n√£o encontrou dados, tentar criar admin se for o email correto
                    if (user.email === 'alexandre.moraes@stf.brasilandia.gov.br') {
                        console.log('üëë Criando dados do admin...');
                        await criarUsuarioAdminCompleto(user);
                    } else {
                        console.log('‚ùå Usu√°rio n√£o autorizado - fazendo logout');
                        try {
                            await firebaseModules.signOut(authInstance);
                        } catch (signOutError) {
                            console.log('‚ö†Ô∏è Erro ao fazer logout:', signOutError.message);
                        }
                        mostrarTelaLogin();
                    }
                }
            } catch (error) {
                console.log('‚ö†Ô∏è Erro geral ao carregar dados do usu√°rio:', error.message);
                
                // Se for o admin, tentar criar dados mesmo com erro
                if (user.email === 'alexandre.moraes@stf.brasilandia.gov.br') {
                    console.log('üëë Tentando criar dados do admin mesmo com erro...');
                    await criarUsuarioAdminCompleto(user);
                }
            }
        }
        
        // Criar usu√°rio admin completo
        async function criarUsuarioAdminCompleto(user) {
            try {
                console.log('üëë Criando dados completos do admin...');
                
                const dadosAdmin = {
                    nome: 'Alexandre de Moraes',
                    email: user.email,
                    cargo: '1_juiz_federal',
                    titulo: '1¬∫ Juiz Federal - BRASIL√ÇNDIA',
                    permissoes: ['todas', 'suprema_autoridade', 'nomeacao_geral'],
                    isAdmin: true,
                    nivel_hierarquico: 1,
                    oab: 'STF-001',
                    nomeado: true,
                    nomeado_por: 'Sistema',
                    data_nomeacao: new Date().toISOString(),
                    pode_nomear: (estruturaJudicial['1_juiz_federal'] && estruturaJudicial['1_juiz_federal'].pode_nomear) || [],
                    ativo: true,
                    data_criacao: new Date().toISOString()
                };
                
                // Tentar salvar no Firestore
                try {
                    await firebaseModules.setDoc(firebaseModules.doc(dbInstance, 'usuarios', user.email), dadosAdmin);
                    console.log('‚úÖ Dados do admin salvos no Firestore');
                } catch (firestoreError) {
                    console.log('‚ö†Ô∏è Erro ao salvar no Firestore, usando dados locais:', firestoreError.message);
                }
                
                // Configurar usu√°rio logado (sempre, mesmo se Firestore falhar)
                usuarioLogado = {
                    uid: user.uid,
                    email: user.email,
                    nome: dadosAdmin.nome,
                    titulo: dadosAdmin.titulo,
                    cargo: dadosAdmin.cargo,
                    permissoes: dadosAdmin.permissoes,
                    isAdmin: dadosAdmin.isAdmin,
                    oab: dadosAdmin.oab,
                    pode_nomear: dadosAdmin.pode_nomear,
                    loginTime: new Date()
                };
                
                console.log('üëë Admin configurado:', usuarioLogado);
                
                // Atualizar interface
                setTimeout(() => {
                    atualizarInterfaceUsuario();
                }, 500);
                
            } catch (error) {
                console.log('‚ö†Ô∏è Erro ao criar admin completo:', error.message);
                
                // Fallback: criar dados b√°sicos do admin mesmo com erro
                usuarioLogado = {
                    uid: user.uid,
                    email: user.email,
                    nome: 'Alexandre de Moraes',
                    titulo: '1¬∫ Juiz Federal - BRASIL√ÇNDIA',
                    cargo: '1_juiz_federal',
                    permissoes: ['todas', 'suprema_autoridade', 'nomeacao_geral'],
                    isAdmin: true,
                    oab: 'STF-001',
                    pode_nomear: (estruturaJudicial['1_juiz_federal'] && estruturaJudicial['1_juiz_federal'].pode_nomear) || [],
                    loginTime: new Date()
                };
                
                console.log('üëë Admin configurado com dados de fallback:', usuarioLogado);
                
                // Atualizar interface
                setTimeout(() => {
                    atualizarInterfaceUsuario();
                }, 500);
            }
        }
        
        // Atualizar interface do usu√°rio
        function atualizarInterfaceUsuario() {
            console.log('üîÑ Atualizando interface do usu√°rio...');
            
            if (usuarioLogado) {
                console.log('üë§ Dados do usu√°rio para interface:', usuarioLogado);
                
                // Iniciar sistema de usu√°rios online
                iniciarSistemaOnline();
                
                // Aguardar elementos DOM estarem dispon√≠veis
                const aguardarElementos = () => {
                    const usuarioLogadoEl = document.getElementById('usuario-logado');
                    const btnLogoutEl = document.getElementById('btn-logout');
                    const nomeUsuarioEl = document.getElementById('nome-usuario');
                    const cargoUsuarioEl = document.getElementById('cargo-usuario');
                    const btnAdminEl = document.getElementById('btn-admin');
                    const btnPortaisEl = document.getElementById('btn-portais');
                    
                    console.log('üîç Verificando elementos DOM:', {
                        usuarioLogado: !!usuarioLogadoEl,
                        btnLogout: !!btnLogoutEl,
                        nomeUsuario: !!nomeUsuarioEl,
                        cargoUsuario: !!cargoUsuarioEl,
                        btnAdmin: !!btnAdminEl,
                        btnPortais: !!btnPortaisEl
                    });
                    
                    if (usuarioLogadoEl && btnLogoutEl && nomeUsuarioEl && cargoUsuarioEl) {
                        // Mostrar informa√ß√µes do usu√°rio
                        usuarioLogadoEl.classList.remove('hidden');
                        btnLogoutEl.classList.remove('hidden');
                        nomeUsuarioEl.textContent = usuarioLogado.nome;
                        cargoUsuarioEl.textContent = `${usuarioLogado.titulo} | OAB: ${usuarioLogado.oab}`;
                        
                        console.log('‚úÖ Nome definido:', usuarioLogado.nome);
                        console.log('‚úÖ Cargo definido:', usuarioLogado.titulo);
                        
                        // Mostrar bot√£o admin se for administrador
                        if (usuarioLogado.isAdmin && btnAdminEl) {
                            btnAdminEl.classList.remove('hidden');
                            console.log('‚úÖ Bot√£o admin mostrado');
                        }
                        
                        // Sempre mostrar bot√£o de portais para usu√°rios logados
                        if (btnPortaisEl) {
                            btnPortaisEl.classList.remove('hidden');
                            console.log('‚úÖ Bot√£o portais mostrado');
                            console.log('üîç Classes do bot√£o portais:', btnPortaisEl.className);
                            console.log('üîç Visibilidade do bot√£o:', btnPortaisEl.style.display);
                        } else {
                            console.log('‚ùå Elemento btn-portais n√£o encontrado!');
                        }
                        
                        console.log('üéâ Interface atualizada com sucesso!');
                        mostrarBoasVindas();
                        return true;
                    }
                    return false;
                };
                
                // Tentar atualizar imediatamente
                if (!aguardarElementos()) {
                    // Se n√£o conseguir, aguardar um pouco mais
                    console.log('‚è≥ Aguardando elementos DOM...');
                    setTimeout(() => {
                        if (!aguardarElementos()) {
                            console.log('‚ö†Ô∏è Alguns elementos DOM n√£o foram encontrados ap√≥s timeout');
                        }
                    }, 1000);
                }
            } else {
                console.log('‚ùå Nenhum usu√°rio logado para atualizar interface');
            }
        }
        
        // Sistema de usu√°rios online com Firebase - CORRIGIDO
        let intervalOnline = null;
        
        async function marcarUsuarioOnline() {
            if (usuarioLogado) {
                try {
                    const userKey = usuarioLogado.email || usuarioLogado.usuario || 'unknown';
                    const agora = Date.now();
                    
                    usuariosOnline[userKey] = {
                        nome: usuarioLogado.nome,
                        cargo: usuarioLogado.cargo,
                        titulo: usuarioLogado.titulo,
                        lastSeen: agora,
                        loginTime: usuarioLogado.loginTime || agora,
                        avatar: getCargoIcon(usuarioLogado.cargo)
                    };
                    
                    // Salvar no Firebase
                    await salvarDados();
                    
                    // Atualizar interface imediatamente
                    atualizarContadorOnline();
                    
                    console.log('‚úÖ Usu√°rio marcado como online:', userKey);
                } catch (error) {
                    console.error('‚ùå Erro ao marcar usu√°rio online:', error);
                }
            }
        }
        
        async function marcarUsuarioOffline() {
            if (usuarioLogado) {
                try {
                    const userKey = usuarioLogado.email || usuarioLogado.usuario || 'unknown';
                    if (usuariosOnline[userKey]) {
                        delete usuariosOnline[userKey];
                        await salvarDados();
                        console.log('‚úÖ Usu√°rio marcado como offline:', userKey);
                    }
                } catch (error) {
                    console.error('‚ùå Erro ao marcar usu√°rio offline:', error);
                }
            }
        }
        
        function iniciarSistemaOnline() {
            // Limpar interval anterior se existir
            if (intervalOnline) {
                clearInterval(intervalOnline);
            }
            
            // Marcar como online imediatamente
            marcarUsuarioOnline();
            
            // Atualizar a cada 30 segundos
            intervalOnline = setInterval(() => {
                if (usuarioLogado) {
                    marcarUsuarioOnline();
                } else {
                    clearInterval(intervalOnline);
                    intervalOnline = null;
                }
            }, 30000);
            
            console.log('üåê Sistema de usu√°rios online iniciado');
        }
        
        function pararSistemaOnline() {
            if (intervalOnline) {
                clearInterval(intervalOnline);
                intervalOnline = null;
            }
            marcarUsuarioOffline();
            console.log('üåê Sistema de usu√°rios online parado');
        }
        
        function atualizarContadorOnline() {
            const agora = Date.now();
            const usuariosAtivos = Object.keys(usuariosOnline).filter(key => {
                const usuario = usuariosOnline[key];
                return usuario && (agora - usuario.lastSeen) < 300000; // 5 minutos
            });
            
            const totalOnline = usuariosAtivos.length;
            
            // Atualizar contadores
            const contadorMembros = document.getElementById('contador-membros');
            const contadorBtn = document.getElementById('contador-btn');
            const btnMembrosOnline = document.getElementById('btn-membros-online');
            
            if (contadorMembros) contadorMembros.textContent = totalOnline;
            if (contadorBtn) contadorBtn.textContent = totalOnline;
            
            // Mostrar/esconder bot√£o flutuante
            if (btnMembrosOnline) {
                if (totalOnline > 0) {
                    btnMembrosOnline.classList.remove('hidden');
                } else {
                    btnMembrosOnline.classList.add('hidden');
                }
            }
            
            // Atualizar lista no sidebar
            atualizarListaMembrosOnline(usuariosAtivos);
            
            console.log(`üë• ${totalOnline} usu√°rios online`);
        }

        function atualizarListaMembrosOnline(usuariosAtivos) {
            const listaEl = document.getElementById('lista-membros-sidebar');
            if (!listaEl) return;
            
            let listaHTML = '';
            
            if (usuariosAtivos.length === 0) {
                listaHTML = `
                    <div class="text-center py-8">
                        <div class="text-4xl mb-3">üò¥</div>
                        <p class="text-slate-400 text-sm font-medium">Nenhum membro online</p>
                        <p class="text-slate-500 text-xs mt-1">Aguardando conex√µes...</p>
                    </div>
                `;
            } else {
                // Organizar por cargo/hierarquia
                const usuariosOrganizados = usuariosAtivos.map(userKey => {
                    const dados = usuariosOnline[userKey];
                    const cargoInfo = estruturaJudicial[dados.cargo] || { nome: 'Profissional', icon: 'üë§', nivel: 99 };
                    return { userKey, dados, cargoInfo };
                }).sort((a, b) => a.cargoInfo.nivel - b.cargoInfo.nivel);

                usuariosOrganizados.forEach(({ userKey, dados, cargoInfo }) => {
                    const tempoOnline = Math.floor((Date.now() - (dados.loginTime || Date.now())) / 60000);
                    const tempoTexto = tempoOnline < 1 ? 'agora' : `${tempoOnline}min`;
                    
                    // Cores baseadas no cargo BRASIL√ÇNDIA
                    const corAvatar = {
                        '1_juiz_federal': 'from-yellow-500 to-yellow-600',
                        '2_juiz_federal': 'from-yellow-400 to-yellow-500',
                        '3_juiz_federal': 'from-yellow-300 to-yellow-400',
                        '1_desembargador': 'from-blue-500 to-blue-600',
                        '2_desembargador': 'from-blue-400 to-blue-500',
                        '3_desembargador': 'from-blue-300 to-blue-400',
                        '1_juiz_estadual': 'from-indigo-500 to-indigo-600',
                        '2_juiz_estadual': 'from-indigo-400 to-indigo-500',
                        '3_juiz_estadual': 'from-indigo-400 to-indigo-500',
                        '4_juiz_estadual': 'from-indigo-300 to-indigo-400',
                        '1_procurador_geral_republica': 'from-green-500 to-green-600',
                        '2_procurador_geral_justica': 'from-green-400 to-green-500',
                        '3_procurador_geral_justica': 'from-green-300 to-green-400',
                        '1_promotor': 'from-purple-500 to-purple-600',
                        '2_promotor': 'from-purple-400 to-purple-500',
                        '3_promotor': 'from-purple-400 to-purple-500',
                        '4_promotor': 'from-purple-400 to-purple-500',
                        '5_promotor': 'from-purple-400 to-purple-500',
                        '6_promotor': 'from-purple-400 to-purple-500',
                        '1_oficial_justica_2_instancia': 'from-orange-500 to-orange-600',
                        '1_oficial_justica_1_instancia': 'from-orange-400 to-orange-500',
                        'advogado': 'from-teal-500 to-teal-600',
                        'defensor_publico': 'from-gray-500 to-gray-600'
                    }[dados.cargo] || 'from-slate-500 to-slate-600';
                    
                    listaHTML += `
                        <div class="flex items-center space-x-3 p-3 rounded-lg hover:bg-slate-700/30 transition-all cursor-pointer group">
                            <div class="relative flex-shrink-0">
                                <div class="w-10 h-10 bg-gradient-to-br ${corAvatar} rounded-lg flex items-center justify-center shadow-lg">
                                    <span class="text-lg">${cargoInfo.icon}</span>
                                </div>
                                <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-slate-800 shadow-lg">
                                    <div class="w-full h-full bg-green-400 rounded-full animate-pulse"></div>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-white font-medium text-sm truncate group-hover:text-green-300 transition-colors">${dados.nome}</p>
                                <p class="text-slate-400 text-xs truncate">${cargoInfo.nome}</p>
                                <div class="flex items-center space-x-2 mt-1">
                                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                    <p class="text-slate-500 text-xs">${tempoTexto}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            listaEl.innerHTML = listaHTML;
        }

        // Fun√ß√µes do sistema de membros online lateral
        function abrirMembrosOnline() {
            const sidebar = document.getElementById('membros-online-sidebar');
            const btnFlutuante = document.getElementById('btn-membros-online');
            
            if (sidebar) {
                sidebar.classList.remove('hidden');
                setTimeout(() => {
                    sidebar.classList.remove('translate-x-full');
                }, 10);
            }
            
            if (btnFlutuante) {
                btnFlutuante.classList.add('hidden');
            }
        }
        
        function fecharMembrosOnline() {
            const sidebar = document.getElementById('membros-online-sidebar');
            const btnFlutuante = document.getElementById('btn-membros-online');
            
            if (sidebar) {
                sidebar.classList.add('translate-x-full');
                setTimeout(() => {
                    sidebar.classList.add('hidden');
                }, 300);
            }
            
            // Mostrar bot√£o flutuante novamente se houver usu√°rios online
            if (btnFlutuante && Object.keys(usuariosOnline).length > 0) {
                setTimeout(() => {
                    btnFlutuante.classList.remove('hidden');
                }, 300);
            }
        }
        
        // Adicionar anima√ß√µes CSS para a lista
        const styleSheet = document.createElement('style');
        styleSheet.textContent = `
            @keyframes slideDown {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes slideUp {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-10px); }
            }
        `;
        document.head.appendChild(styleSheet);
        
        // Fun√ß√£o removida - agora usamos lista fixa no header
        
        // Salvar dados no Firebase
        async function salvarDadosFirebase(colecao, documento, dados) {
            try {
                await firebaseModules.setDoc(firebaseModules.doc(dbInstance, colecao, documento), dados);
                console.log('‚úÖ Dados salvos no Firebase:', colecao, documento);
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao salvar no Firebase:', error);
                return false;
            }
        }
        
        // Buscar dados no Firebase
        async function buscarDadosFirebase(colecao, documento) {
            try {
                const docRef = firebaseModules.doc(dbInstance, colecao, documento);
                const docSnap = await firebaseModules.getDoc(docRef);
                
                if (docSnap.exists()) {
                    return docSnap.data();
                } else {
                    console.log('üìÑ Documento n√£o encontrado:', colecao, documento);
                    return null;
                }
            } catch (error) {
                console.error('‚ùå Erro ao buscar dados:', error);
                return null;
            }
        }

        // Sistema de Backup Autom√°tico
        function criarBackupAutomatico() {
            const backup = {
                timestamp: new Date().toISOString(),
                version: '2025.1',
                usuarios: usuariosCadastrados,
                registrosOAB: registrosOAB,
                logs: JSON.parse(localStorage.getItem('logsNomeacoes')) || []
            };

            // Manter apenas os 5 backups mais recentes
            let backups = JSON.parse(localStorage.getItem('backupsAutomaticos')) || [];
            backups.push(backup);
            
            if (backups.length > 5) {
                backups = backups.slice(-5);
            }
            
            localStorage.setItem('backupsAutomaticos', JSON.stringify(backups));
        }

        // Fun√ß√£o para restaurar backup
        function restaurarBackup(indiceBackup) {
            const backups = JSON.parse(localStorage.getItem('backupsAutomaticos')) || [];
            
            if (backups[indiceBackup]) {
                const backup = backups[indiceBackup];
                
                if (confirm(`üîÑ RESTAURAR BACKUP\n\nData: ${new Date(backup.timestamp).toLocaleString('pt-BR')}\nVers√£o: ${backup.version}\n\n‚ö†Ô∏è Esta a√ß√£o substituir√° todos os dados atuais!\n\nConfirma a restaura√ß√£o?`)) {
                    usuariosCadastrados = backup.usuarios;
                    registrosOAB = backup.registrosOAB;
                    
                    localStorage.setItem('usuariosCadastrados', JSON.stringify(usuariosCadastrados));
                    localStorage.setItem('registrosOAB', JSON.stringify(registrosOAB));
                    localStorage.setItem('logsNomeacoes', JSON.stringify(backup.logs));
                    
                    alert('‚úÖ Backup restaurado com sucesso! A p√°gina ser√° recarregada.');
                    location.reload();
                }
            }
        }

        // Fun√ß√£o para exportar dados
        function exportarDados() {
            const dadosCompletos = {
                timestamp: new Date().toISOString(),
                version: '2025.1',
                usuarios: usuariosCadastrados,
                registrosOAB: registrosOAB,
                logs: JSON.parse(localStorage.getItem('logsNomeacoes')) || [],
                sistema: 'Sistema Jur√≠dico Brasil√¢ndia RP'
            };

            const blob = new Blob([JSON.stringify(dadosCompletos, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `backup_sistema_juridico_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            alert('üì• Backup exportado com sucesso!');
        }

        // ===== SISTEMA DE LOGIN REAL COM FIREBASE =====
        
        // Fun√ß√£o de Login Real
        async function realizarLogin() {
            const email = document.getElementById('login-usuario').value.trim();
            const senha = document.getElementById('login-senha').value;

            // Limpar mensagens anteriores
            esconderMensagem();

            // Valida√ß√£o de campos
            if (!email) {
                mostrarMensagem('‚ö†Ô∏è Digite seu email!', 'erro');
                document.getElementById('login-usuario').focus();
                return;
            }

            if (!senha) {
                mostrarMensagem('‚ö†Ô∏è Digite sua senha!', 'erro');
                document.getElementById('login-senha').focus();
                return;
            }

            // Verificar se Firebase est√° carregado
            if (!authInstance || !firebaseModules) {
                mostrarMensagem('‚ö†Ô∏è Sistema inicializando... Tente novamente em alguns segundos.', 'erro');
                return;
            }

            // Mostrar loading
            mostrarLoading(true);

            try {
                // Fazer login no Firebase
                const userCredential = await firebaseModules.signInWithEmailAndPassword(authInstance, email, senha);
                const user = userCredential.user;
                
                console.log('‚úÖ Login realizado com sucesso:', user.email);
                mostrarMensagem('‚úÖ Login realizado com sucesso!', 'sucesso');
                
                // Carregar dados do usu√°rio
                await carregarDadosUsuario(user);
                
                // Notificar login realizado
                if (typeof notificarLogin === 'function' && usuarioLogado) {
                    notificarLogin(usuarioLogado.nome, usuarioLogado.titulo);
                }
                
                // Registrar log de login
                await registrarLog('login', `Login realizado por ${user.email}`);
                
                // Redirecionar para portal espec√≠fico baseado no cargo
                setTimeout(() => {
                    redirecionarParaPortalEspecifico();
                }, 1500);
                
            } catch (error) {
                console.error('‚ùå Erro no login:', error);
                
                let mensagemErro = '‚ùå Erro no login!';
                
                switch (error.code) {
                    case 'auth/user-not-found':
                        mensagemErro = '‚ùå Usu√°rio n√£o encontrado!';
                        break;
                    case 'auth/wrong-password':
                        mensagemErro = '‚ùå Senha incorreta!';
                        break;
                    case 'auth/invalid-email':
                        mensagemErro = '‚ùå Email inv√°lido!';
                        break;
                    case 'auth/too-many-requests':
                        mensagemErro = '‚ùå Muitas tentativas. Tente novamente mais tarde.';
                        break;
                    default:
                        mensagemErro = `‚ùå Erro: ${error.message}`;
                }
                
                mostrarMensagem(mensagemErro, 'erro');
                mostrarLoading(false);
                
                // Limpar campos
                document.getElementById('login-senha').value = '';
                document.getElementById('login-usuario').focus();
            }
        }
        
        // Mostrar tela de login
        function mostrarTelaLogin() {
            document.getElementById('login-sistema').style.display = 'flex';
            document.getElementById('usuario-logado').classList.add('hidden');
            document.getElementById('btn-logout').classList.add('hidden');
            document.getElementById('btn-admin').classList.add('hidden');
            document.getElementById('btn-portais').classList.add('hidden');
        }
        
        // Esconder tela de login
        function esconderTelaLogin() {
            document.getElementById('login-sistema').style.display = 'none';
        }
        
        // Registrar log no Firebase
        async function registrarLog(tipo, descricao, dados = {}) {
            try {
                await firebaseModules.addDoc(firebaseModules.collection(dbInstance, 'logs'), {
                    tipo: tipo,
                    descricao: descricao,
                    usuario: usuarioLogado ? usuarioLogado.email : 'Sistema',
                    dados: dados,
                    timestamp: new Date().toISOString(),
                    data_formatada: new Date().toLocaleString('pt-BR')
                });
                
                console.log('üìù Log registrado:', tipo, descricao);
            } catch (error) {
                console.error('‚ùå Erro ao registrar log:', error);
            }
        }

        // Sistema de Redirecionamento por Cargo
        function redirecionarParaPortalEspecifico() {
            if (!usuarioLogado) {
                console.log('‚ùå Usu√°rio n√£o logado para redirecionamento');
                return;
            }

            // Alexandre como admin pode ficar no portal principal para navegar entre portais
            if (usuarioLogado.isAdmin) {
                console.log('üëë Alexandre (Admin) permanece no portal principal');
                esconderTelaLogin();
                mostrarLoading(false);
                return;
            }

            const cargo = usuarioLogado.cargo;
            console.log('üéØ Redirecionando usu√°rio:', usuarioLogado.nome, 'Cargo:', cargo);

            // Mapear cargos BRASIL√ÇNDIA para portais espec√≠ficos
            const portaisPorCargo = {
                // Advogados e Defensores - Portal B√°sico
                'advogado': 'portal-advogado.html',
                'defensor_publico': 'portal-advogado.html',

                // Minist√©rio P√∫blico BRASIL√ÇNDIA - Portal Intermedi√°rio
                '1_procurador_geral_republica': 'portal-promotor.html',
                '2_procurador_geral_justica': 'portal-promotor.html',
                '3_procurador_geral_justica': 'portal-promotor.html',
                '1_promotor': 'portal-promotor.html',
                '2_promotor': 'portal-promotor.html',
                '3_promotor': 'portal-promotor.html',
                '4_promotor': 'portal-promotor.html',
                '5_promotor': 'portal-promotor.html',
                '6_promotor': 'portal-promotor.html',

                // Justi√ßa Estadual BRASIL√ÇNDIA - Portal Avan√ßado
                '1_desembargador': 'portal-juiz-estadual.html',
                '2_desembargador': 'portal-juiz-estadual.html',
                '3_desembargador': 'portal-juiz-estadual.html',
                '1_juiz_estadual': 'portal-juiz-estadual.html',
                '2_juiz_estadual': 'portal-juiz-estadual.html',
                '3_juiz_estadual': 'portal-juiz-estadual.html',
                '4_juiz_estadual': 'portal-juiz-estadual.html',
                '1_oficial_justica_2_instancia': 'portal-juiz-estadual.html',
                '1_oficial_justica_1_instancia': 'portal-juiz-estadual.html',

                // Justi√ßa Federal BRASIL√ÇNDIA - Portal M√°ximo
                '1_juiz_federal': 'portal-juiz-federal.html',
                '2_juiz_federal': 'portal-juiz-federal.html',
                '3_juiz_federal': 'portal-juiz-federal.html'
            };

            const portalDestino = portaisPorCargo[cargo];

            if (portalDestino) {
                // Salvar dados do usu√°rio no localStorage para o pr√≥ximo portal
                localStorage.setItem('usuarioLogadoAtual', JSON.stringify(usuarioLogado));
                
                // Mostrar mensagem de redirecionamento
                mostrarMensagem(`üéØ Redirecionando para seu portal: ${getCargoNome(cargo)}`, 'sucesso');
                
                setTimeout(() => {
                    window.location.href = portalDestino;
                }, 2000);
            } else {
                // Fallback: ficar no portal atual
                console.log('‚ö†Ô∏è Portal espec√≠fico n√£o encontrado para cargo:', cargo);
                esconderTelaLogin();
                mostrarLoading(false);
            }
        }

        // Fun√ß√£o auxiliar para obter nome do cargo
        function getCargoNome(cargo) {
            const estrutura = estruturaJudicial[cargo];
            return estrutura ? estrutura.nome : cargo;
        }

        // Fun√ß√£o para mostrar mensagens
        function mostrarMensagem(texto, tipo) {
            const mensagem = document.getElementById('mensagem-login');
            const textoMensagem = document.getElementById('texto-mensagem');
            
            mensagem.classList.remove('hidden');
            textoMensagem.textContent = texto;
            
            // Remover classes anteriores
            mensagem.classList.remove('bg-green-500/20', 'border-green-500/50', 'bg-red-500/20', 'border-red-500/50', 'bg-yellow-500/20', 'border-yellow-500/50');
            textoMensagem.classList.remove('text-green-300', 'text-red-300', 'text-yellow-300');
            
            // Aplicar estilo baseado no tipo
            if (tipo === 'sucesso') {
                mensagem.classList.add('bg-green-500/20', 'border', 'border-green-500/50');
                textoMensagem.classList.add('text-green-300');
            } else if (tipo === 'erro') {
                mensagem.classList.add('bg-red-500/20', 'border', 'border-red-500/50');
                textoMensagem.classList.add('text-red-300');
            } else {
                mensagem.classList.add('bg-yellow-500/20', 'border', 'border-yellow-500/50');
                textoMensagem.classList.add('text-yellow-300');
            }
        }

        // Fun√ß√£o para esconder mensagens
        function esconderMensagem() {
            document.getElementById('mensagem-login').classList.add('hidden');
        }

        // Fun√ß√£o para mostrar/esconder loading
        function mostrarLoading(mostrar) {
            const textoBotao = document.getElementById('texto-botao');
            const loadingBotao = document.getElementById('loading-botao');
            const btnEntrar = document.getElementById('btn-entrar');
            
            if (mostrar) {
                textoBotao.classList.add('hidden');
                loadingBotao.classList.remove('hidden');
                btnEntrar.disabled = true;
                btnEntrar.classList.add('opacity-75', 'cursor-not-allowed');
            } else {
                textoBotao.classList.remove('hidden');
                loadingBotao.classList.add('hidden');
                btnEntrar.disabled = false;
                btnEntrar.classList.remove('opacity-75', 'cursor-not-allowed');
            }
        }

        // Fun√ß√£o para mostrar boas-vindas
        function mostrarBoasVindas() {
            const agora = new Date();
            const horas = agora.getHours();
            let saudacao;
            
            if (horas < 12) {
                saudacao = 'Bom dia';
            } else if (horas < 18) {
                saudacao = 'Boa tarde';
            } else {
                saudacao = 'Boa noite';
            }
            
            // Criar notifica√ß√£o de boas-vindas
            const notificacao = document.createElement('div');
            notificacao.className = 'fixed top-4 right-4 bg-gradient-to-r from-green-600 to-green-500 text-white p-4 rounded-lg shadow-lg z-50 animate-slide-in';
            notificacao.innerHTML = `
                <div class="flex items-center space-x-3">
                    <div class="text-2xl">üëã</div>
                    <div>
                        <p class="font-bold">${saudacao}, ${usuarioLogado.nome}!</p>
                        <p class="text-sm opacity-90">Acesso autorizado como ${usuarioLogado.titulo}</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notificacao);
            
            // Remover notifica√ß√£o ap√≥s 5 segundos
            setTimeout(() => {
                notificacao.remove();
            }, 5000);
        }

        // Fun√ß√µes do Painel Administrativo
        function mostrarPainelAdmin() {
            document.getElementById('painel-admin').classList.remove('hidden');
        }

        function esconderPainelAdmin() {
            document.getElementById('painel-admin').classList.add('hidden');
            
            // Mostrar bot√£o flutuante para reabrir
            const botaoReabrir = document.createElement('div');
            botaoReabrir.id = 'botao-reabrir-admin';
            botaoReabrir.className = 'fixed bottom-4 right-4 z-40';
            botaoReabrir.innerHTML = `
                <button onclick="reabrirPainelAdmin()" class="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white p-4 rounded-full shadow-2xl transition-all hover:scale-110 animate-pulse">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                </button>
            `;
            document.body.appendChild(botaoReabrir);
        }

        function reabrirPainelAdmin() {
            document.getElementById('painel-admin').classList.remove('hidden');
            const botao = document.getElementById('botao-reabrir-admin');
            if (botao) {
                botao.remove();
            }
        }

        function abrirCadastroUsuario() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center';
            modal.innerHTML = `
                <div class="bg-gradient-to-br from-green-600/30 to-blue-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-green-500/60 shadow-2xl max-w-2xl w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-gradient-to-br from-green-600 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-2xl">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-white">üîë Liberar N√∫mero OAB/Credencial</h2>
                        <p class="text-green-200 mt-2">Autorize um n√∫mero OAB para cadastro no sistema</p>
                    </div>
                    
                    <form id="form-liberar-oab" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white font-bold mb-2">N√∫mero OAB/Credencial</label>
                                <input type="text" id="admin-oab" placeholder="Ex: SP123456, STF001..." class="w-full p-3 rounded-lg bg-gray-900 border border-green-500/50 text-white placeholder-gray-400" required>
                                <p class="text-green-300 text-xs mt-1">üí° Digite o n√∫mero que ser√° usado no cadastro</p>
                            </div>
                            <div>
                                <label class="block text-white font-bold mb-2">Cargo Destinado</label>
                                <select id="admin-cargo" class="w-full p-3 rounded-lg bg-gray-900 border border-green-500/50 text-white" required onchange="atualizarPreviewDominio()">
                                    <option value="">Selecione o cargo...</option>
                                    <optgroup label="üèõÔ∏è PODER JUDICI√ÅRIO FEDERAL">
                                        <option value="2_juiz_federal">‚öñÔ∏è 2¬∫ Juiz Federal</option>
                                        <option value="3_juiz_federal">‚öñÔ∏è 3¬∫ Juiz Federal</option>
                                    </optgroup>
                                    <optgroup label="üèõÔ∏è DESEMBARGADORES">
                                        <option value="1_desembargador">üèõÔ∏è 1¬∫ Desembargador</option>
                                        <option value="2_desembargador">üèõÔ∏è 2¬∫ Desembargador</option>
                                        <option value="3_desembargador">üèõÔ∏è 3¬∫ Desembargador</option>
                                    </optgroup>
                                    <optgroup label="üë®‚Äç‚öñÔ∏è JU√çZES ESTADUAIS">
                                        <option value="1_juiz_estadual">üë®‚Äç‚öñÔ∏è 1¬∫ Juiz Estadual</option>
                                        <option value="2_juiz_estadual">üë®‚Äç‚öñÔ∏è 2¬∫ Juiz Estadual</option>
                                        <option value="3_juiz_estadual">üë®‚Äç‚öñÔ∏è 3¬∫ Juiz Estadual</option>
                                        <option value="4_juiz_estadual">üë®‚Äç‚öñÔ∏è 4¬∫ Juiz Estadual</option>
                                    </optgroup>
                                    <optgroup label="üèõÔ∏è MINIST√âRIO P√öBLICO">
                                        <option value="1_procurador_geral_republica">üèõÔ∏è 1¬∫ Procurador Geral da Rep√∫blica</option>
                                        <option value="2_procurador_geral_justica">üèõÔ∏è 2¬∫ Procurador Geral de Justi√ßa</option>
                                        <option value="3_procurador_geral_justica">üèõÔ∏è 3¬∫ Procurador Geral de Justi√ßa</option>
                                    </optgroup>
                                    <optgroup label="üë®‚Äçüíº PROMOTORES">
                                        <option value="1_promotor">üë®‚Äçüíº 1¬∫ Promotor - L√≠der</option>
                                        <option value="2_promotor">üë®‚Äçüíº 2¬∫ Promotor</option>
                                        <option value="3_promotor">üë®‚Äçüíº 3¬∫ Promotor</option>
                                        <option value="4_promotor">üë®‚Äçüíº 4¬∫ Promotor</option>
                                        <option value="5_promotor">üë®‚Äçüíº 5¬∫ Promotor</option>
                                        <option value="6_promotor">üë®‚Äçüíº 6¬∫ Promotor</option>
                                    </optgroup>
                                    <optgroup label="üëÆ‚Äç‚ôÇÔ∏è OFICIAIS DE JUSTI√áA">
                                        <option value="1_oficial_justica_2_instancia">üëÆ‚Äç‚ôÇÔ∏è 1¬∫ Oficial - 2¬™ Inst√¢ncia</option>
                                        <option value="1_oficial_justica_1_instancia">üëÆ‚Äç‚ôÇÔ∏è 1¬∫ Oficial - 1¬™ Inst√¢ncia</option>
                                    </optgroup>
                                    <optgroup label="üë®‚Äçüíº ADVOCACIA">
                                        <option value="advogado">üë®‚Äçüíº Advogado/Defensor</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Preview do Dom√≠nio -->
                        <div id="preview-dominio" class="bg-blue-500/20 rounded-lg p-4 border border-blue-500/50 hidden">
                            <h4 class="text-blue-300 font-bold mb-2">üìß Preview do Email</h4>
                            <div class="text-white">
                                <p class="text-sm mb-1">Quando o usu√°rio se cadastrar com esta OAB:</p>
                                <p class="font-mono bg-gray-900 p-2 rounded text-green-300">
                                    <span class="text-gray-400">[nome.sobrenome]</span><span id="dominio-preview">@tjsp.jus.br</span>
                                </p>
                                <p class="text-xs text-blue-200 mt-2">
                                    <span class="font-bold">Cargo:</span> <span id="cargo-preview">-</span><br>
                                    <span class="font-bold">Hierarquia:</span> <span id="nivel-preview">-</span>
                                </p>
                            </div>
                        </div>
                        
                        <div class="bg-yellow-500/20 rounded-lg p-4 border border-yellow-500/50">
                            <h4 class="text-yellow-300 font-bold mb-2">‚ö†Ô∏è Importante</h4>
                            <div class="text-white text-sm space-y-1">
                                <p>‚Ä¢ Esta OAB poder√° ser usada <strong>apenas uma vez</strong> para cadastro</p>
                                <p>‚Ä¢ O usu√°rio digitar√° seu nome e o email ser√° gerado automaticamente</p>
                                <p>‚Ä¢ O dom√≠nio ser√° baseado no cargo selecionado</p>
                                <p>‚Ä¢ Ap√≥s o cadastro, a OAB ficar√° vinculada ao usu√°rio</p>
                            </div>
                        </div>
                        
                        <div class="flex space-x-4 mt-6">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="flex-1 bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                                ‚ùå Cancelar
                            </button>
                            <button type="submit" class="flex-1 bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                                üîë Liberar OAB
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Event listener para o formul√°rio
            document.getElementById('form-liberar-oab').addEventListener('submit', function(e) {
                e.preventDefault();
                processarLiberacaoOAB();
            });
        }

        // Fun√ß√£o para atualizar preview do dom√≠nio
        function atualizarPreviewDominio() {
            const cargo = document.getElementById('admin-cargo').value;
            const previewDiv = document.getElementById('preview-dominio');
            
            if (cargo && estruturaJudicial[cargo]) {
                const cargoInfo = estruturaJudicial[cargo];
                
                document.getElementById('dominio-preview').textContent = cargoInfo.dominio;
                document.getElementById('cargo-preview').textContent = cargoInfo.nome;
                document.getElementById('nivel-preview').textContent = `N√≠vel ${cargoInfo.nivel}`;
                
                previewDiv.classList.remove('hidden');
            } else {
                previewDiv.classList.add('hidden');
            }
        }

        async function processarLiberacaoOAB() {
            const oab = document.getElementById('admin-oab').value.trim();
            const cargo = document.getElementById('admin-cargo').value;

            if (!oab || !cargo) {
                alert('‚ö†Ô∏è Preencha todos os campos obrigat√≥rios!');
                return;
            }

            // Verificar se OAB j√° existe
            if (registrosOAB[oab]) {
                alert('‚ö†Ô∏è Este n√∫mero OAB j√° foi liberado!');
                return;
            }

            try {
                // Obter informa√ß√µes do cargo
                const cargoInfo = estruturaJudicial[cargo];
                
                // Criar registro OAB liberada
                registrosOAB[oab] = {
                    cargo: cargo,
                    cargoNome: cargoInfo.nome,
                    dominio: cargoInfo.dominio,
                    nivel: cargoInfo.nivel,
                    dataLiberacao: new Date().toISOString(),
                    liberadoPor: usuarioLogado.email || usuarioLogado.nome,
                    ativo: true,
                    utilizada: false
                };

                // Salvar dados no Firebase
                await salvarDados();

                // Registrar log
                await registrarLog('liberacao_oab', `OAB liberada: ${oab} para cargo ${cargoInfo.nome}`, {
                    oab: oab,
                    cargo: cargoInfo.nome,
                    dominio: cargoInfo.dominio
                });

                alert(`‚úÖ OAB liberada com sucesso!\n\nüîë N√∫mero: ${oab}\nüèõÔ∏è Cargo: ${cargoInfo.nome}\nüìß Dom√≠nio: ${cargoInfo.dominio}\nüìä N√≠vel: ${cargoInfo.nivel}\n\nüë§ Agora qualquer pessoa pode se cadastrar usando esta OAB na aba "Primeiro Acesso".`);
                
                // Fechar modal
                document.querySelector('.fixed').remove();
                
            } catch (error) {
                console.error('‚ùå Erro ao liberar OAB:', error);
                alert('‚ùå Erro ao liberar OAB. Tente novamente.');
            }
        }

        function abrirGerenciarUsuarios() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            let listaUsuarios = '';
            
            // Adicionar Alexandre de Moraes se n√£o existir
            if (!usuariosCadastrados['alexandre.moraes']) {
                usuariosCadastrados['alexandre.moraes'] = {
                    nome: 'Alexandre de Moraes',
                    email: 'alexandre.moraes@stf.brasilandia.gov.br',
                    cargo: '1_juiz_federal',
                    titulo: '1¬∫ Juiz Federal - Presidente STF/STJ/STB BRASIL√ÇNDIA',
                    permissoes: ['todas', 'admin', 'nomeacoes', 'maxima_autoridade'],
                    isAdmin: true,
                    oab: 'BRASIL√ÇNDIA-001',
                    nomeado: true,
                    nomeado_por: 'Sistema',
                    data_nomeacao: new Date().toISOString(),
                    pode_nomear: estruturaJudicial['ministro_stf'].pode_nomear,
                    ativo: true,
                    data_criacao: new Date().toISOString()
                };
                salvarDados();
            }
            
            // Listar usu√°rios cadastrados
            for (const [usuario, dados] of Object.entries(usuariosCadastrados)) {
                const statusNomeacao = dados.nomeado ? '‚úÖ Nomeado' : '‚è≥ N√£o Nomeado';
                const cargoInfo = estruturaJudicial[dados.cargo] || { nome: 'Cargo Desconhecido', icon: '‚ùì' };
                const isOnline = usuariosOnline[usuario] && (Date.now() - usuariosOnline[usuario].lastSeen < 300000); // 5 minutos
                
                listaUsuarios += `
                    <div class="bg-gradient-to-r from-white/10 to-white/5 rounded-xl p-4 border border-white/20 mb-3 hover:from-white/15 hover:to-white/10 transition-all">
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center relative">
                                    <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                                    </svg>
                                    ${isOnline ? '<div class="absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"></div>' : ''}
                                </div>
                                <div>
                                    <h4 class="text-white font-bold text-lg flex items-center">
                                        ${dados.nome}
                                        ${isOnline ? '<span class="ml-2 text-xs bg-green-500 text-white px-2 py-1 rounded-full">Online</span>' : '<span class="ml-2 text-xs bg-gray-500 text-white px-2 py-1 rounded-full">Offline</span>'}
                                    </h4>
                                    <p class="text-white/70 text-sm">${cargoInfo.icon} ${cargoInfo.nome}</p>
                                    <p class="text-white/60 text-xs">OAB: ${dados.oab || 'N/A'} | Email: ${dados.email || usuario}</p>
                                    <p class="text-white/60 text-xs">Status: ${statusNomeacao}</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="editarUsuario('${usuario}')" class="bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-lg">
                                    <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                                    </svg>
                                    Editar
                                </button>
                                ${usuario !== 'alexandre.moraes' ? `
                                <button onclick="removerUsuario('${usuario}')" class="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white px-4 py-2 rounded-lg text-sm transition-all shadow-lg">
                                    <svg class="w-4 h-4 inline mr-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                    </svg>
                                    Remover
                                </button>
                                ` : '<span class="text-yellow-400 text-sm font-medium">üëë Administrador Principal</span>'}
                            </div>
                        </div>
                    </div>
                `;
            }

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-blue-600/30 to-purple-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-blue-500/60 shadow-2xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-2xl">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 18v-1c0-2.66 5.33-4 8-4s8 1.34 8 4v1H4zM12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"/>
                            </svg>
                        </div>
                        <h2 class="text-3xl font-bold text-white">Gerenciar Usu√°rios</h2>
                        <p class="text-blue-200 mt-2">Editar perfis e gerenciar permiss√µes | Total: ${Object.keys(usuariosCadastrados).length} usu√°rios</p>
                    </div>
                    
                    <div class="space-y-4">
                        ${listaUsuarios || '<p class="text-white text-center">Nenhum usu√°rio cadastrado ainda.</p>'}
                    </div>
                    
                    <div class="text-center mt-6 space-x-4">
                        <button onclick="abrirCadastroUsuario(); this.closest('.fixed').remove();" class="bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg">
                            <svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                            </svg>
                            Novo Usu√°rio
                        </button>
                        <button onclick="this.closest('.fixed').remove()" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-500 hover:to-gray-600 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg">
                            <svg class="w-5 h-5 inline mr-2" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                            </svg>
                            Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function editarUsuario(usuario) {
            const dados = usuariosCadastrados[usuario];
            if (!dados) {
                alert('‚ùå Usu√°rio n√£o encontrado!');
                return;
            }

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            let opcoesCargoHTML = '';
            Object.entries(estruturaJudicial).forEach(([key, info]) => {
                const selected = key === dados.cargo ? 'selected' : '';
                opcoesCargoHTML += `<option value="${key}" ${selected}>${info.icon} ${info.nome}</option>`;
            });

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-blue-600/30 to-indigo-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-blue-500/60 shadow-2xl max-w-2xl w-full mx-4">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-2xl">
                            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-bold text-white">Editar Usu√°rio</h2>
                        <p class="text-blue-200 mt-2">Modificar informa√ß√µes do perfil</p>
                    </div>
                    
                    <form id="form-editar-usuario" class="space-y-4">
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white font-bold mb-2">Nome Completo</label>
                                <input type="text" id="edit-nome" value="${dados.nome}" class="w-full p-3 rounded-lg bg-gray-900 border border-blue-500/50 text-white" required>
                            </div>
                            <div>
                                <label class="block text-white font-bold mb-2">Usu√°rio</label>
                                <input type="text" id="edit-usuario" value="${usuario}" class="w-full p-3 rounded-lg bg-gray-900 border border-blue-500/50 text-white" ${usuario === 'alexandre.moraes' ? 'readonly' : ''}>
                            </div>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white font-bold mb-2">OAB/Funcional</label>
                                <input type="text" id="edit-oab" value="${dados.oab || ''}" class="w-full p-3 rounded-lg bg-gray-900 border border-blue-500/50 text-white">
                            </div>
                            <div>
                                <label class="block text-white font-bold mb-2">Cargo</label>
                                <select id="edit-cargo" class="w-full p-3 rounded-lg bg-gray-900 border border-blue-500/50 text-white" ${usuario === 'alexandre.moraes' ? 'disabled' : ''}>
                                    ${opcoesCargoHTML}
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-white font-bold mb-2">Nova Senha (deixe em branco para manter atual)</label>
                            <input type="password" id="edit-senha" placeholder="Digite nova senha..." class="w-full p-3 rounded-lg bg-gray-900 border border-blue-500/50 text-white placeholder-gray-400">
                        </div>
                        
                        <div class="flex items-center space-x-3">
                            <input type="checkbox" id="edit-nomeado" ${dados.nomeado ? 'checked' : ''} class="rounded">
                            <label for="edit-nomeado" class="text-white">Usu√°rio nomeado para o cargo</label>
                        </div>
                        
                        <div class="flex space-x-4 mt-6">
                            <button type="button" onclick="this.closest('.fixed').remove()" class="flex-1 bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                                Cancelar
                            </button>
                            <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                                Salvar Altera√ß√µes
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Event listener para o formul√°rio
            document.getElementById('form-editar-usuario').addEventListener('submit', function(e) {
                e.preventDefault();
                salvarEdicaoUsuario(usuario);
            });
        }

        function salvarEdicaoUsuario(usuarioOriginal) {
            const nome = document.getElementById('edit-nome').value.trim();
            const novoUsuario = document.getElementById('edit-usuario').value.trim().toLowerCase();
            const oab = document.getElementById('edit-oab').value.trim();
            const cargo = document.getElementById('edit-cargo').value;
            const novaSenha = document.getElementById('edit-senha').value;
            const nomeado = document.getElementById('edit-nomeado').checked;

            if (!nome || !novoUsuario || !cargo) {
                alert('‚ö†Ô∏è Preencha todos os campos obrigat√≥rios!');
                return;
            }

            // Verificar se o novo usu√°rio j√° existe (se foi alterado)
            if (novoUsuario !== usuarioOriginal && usuariosCadastrados[novoUsuario]) {
                alert('‚ö†Ô∏è Este nome de usu√°rio j√° existe!');
                return;
            }

            const dadosAtualizados = {
                ...usuariosCadastrados[usuarioOriginal],
                nome: nome,
                oab: oab,
                cargo: cargo,
                titulo: estruturaJudicial[cargo]?.titulo || 'Profissional Jur√≠dico',
                permissoes: estruturaJudicial[cargo]?.permissoes || ['basicas'],
                nomeado: nomeado
            };

            // Se a senha foi alterada
            if (novaSenha) {
                dadosAtualizados.senha = novaSenha;
            }

            // Se o usu√°rio foi alterado, remover o antigo e criar o novo
            if (novoUsuario !== usuarioOriginal) {
                delete usuariosCadastrados[usuarioOriginal];
                usuariosCadastrados[novoUsuario] = dadosAtualizados;
            } else {
                usuariosCadastrados[usuarioOriginal] = dadosAtualizados;
            }

            // Atualizar usu√°rio logado se for o mesmo
            if (usuarioLogado && usuarioLogado.usuario === usuarioOriginal) {
                usuarioLogado = {
                    ...usuarioLogado,
                    nome: nome,
                    titulo: dadosAtualizados.titulo,
                    cargo: cargo,
                    oab: oab,
                    permissoes: dadosAtualizados.permissoes
                };
                
                // Atualizar interface
                document.getElementById('nome-usuario').textContent = usuarioLogado.nome;
                document.getElementById('cargo-usuario').textContent = `${usuarioLogado.titulo} | OAB: ${usuarioLogado.oab}`;
            }

            salvarDados();
            alert('‚úÖ Usu√°rio atualizado com sucesso!');
            
            // Fechar modal e recarregar lista
            document.querySelector('.fixed').remove();
            setTimeout(() => {
                abrirGerenciarUsuarios();
            }, 100);
        }

        function removerUsuario(usuario) {
            if (usuario === 'alexandre.moraes') {
                alert('‚ùå N√£o √© poss√≠vel remover o administrador principal!');
                return;
            }

            if (confirm(`‚ö†Ô∏è Tem certeza que deseja remover o usu√°rio "${usuariosCadastrados[usuario]?.nome}"?`)) {
                delete usuariosCadastrados[usuario];
                
                salvarDados();
                alert('‚úÖ Usu√°rio removido com sucesso!');
                
                // Recarregar lista
                document.querySelector('.fixed').remove();
                abrirGerenciarUsuarios();
            }
        }

        // Sistema de Nomea√ß√µes
        function abrirSistemaNomeacoes() {
            if (!usuarioLogado || !usuarioLogado.permissoes.includes('nomeacoes')) {
                alert('‚ö†Ô∏è Voc√™ n√£o tem permiss√£o para nomear cargos!');
                return;
            }

            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            let cargosDisponiveis = '';
            const podeNomear = usuarioLogado.pode_nomear || [];
            
            if (podeNomear.length === 0) {
                cargosDisponiveis = '<p class="text-white text-center">Voc√™ n√£o pode nomear nenhum cargo no momento.</p>';
            } else {
                podeNomear.forEach(cargo => {
                    const info = estruturaJudicial[cargo];
                    if (info) {
                        cargosDisponiveis += `
                            <div class="bg-gradient-to-r from-yellow-600/20 to-amber-600/20 rounded-lg p-4 border border-yellow-500/50 mb-3">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="text-white font-bold flex items-center">
                                            <span class="text-2xl mr-3">${info.icon}</span>
                                            ${info.nome}
                                        </h4>
                                        <p class="text-white/70 text-sm">${info.descricao}</p>
                                        <p class="text-yellow-300 text-xs">N√≠vel ${info.nivel} - ${info.titulo}</p>
                                    </div>
                                    <button onclick="iniciarNomeacao('${cargo}')" class="bg-yellow-600 hover:bg-yellow-500 text-black font-bold px-4 py-2 rounded-lg transition-all">
                                        üëë Nomear
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                });
            }

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-yellow-600/30 to-amber-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-yellow-500/60 shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center justify-center">
                            <span class="text-4xl mr-3">üëë</span>
                            Sistema de Nomea√ß√µes
                        </h2>
                        <p class="text-yellow-200 mt-2">Nomear profissionais para cargos hier√°rquicos</p>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-white mb-4">Cargos Dispon√≠veis para Nomea√ß√£o:</h3>
                        ${cargosDisponiveis}
                    </div>
                    
                    <div class="text-center">
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function iniciarNomeacao(cargo) {
            const info = estruturaJudicial[cargo];
            
            // Buscar usu√°rios dispon√≠veis para nomea√ß√£o
            const usuariosDisponiveis = [];
            Object.entries(usuariosCadastrados).forEach(([username, dados]) => {
                // N√£o incluir o pr√≥prio Alexandre e usu√°rios j√° nomeados para outros cargos
                if (username !== 'alexandre.moraes' && !dados.nomeado) {
                    usuariosDisponiveis.push({
                        username: username,
                        nome: dados.nome,
                        oab: dados.oab || 'N/A'
                    });
                }
            });

            if (usuariosDisponiveis.length === 0) {
                alert('‚ö†Ô∏è N√£o h√° usu√°rios dispon√≠veis para nomea√ß√£o. Cadastre novos usu√°rios primeiro.');
                return;
            }

            // Criar modal de sele√ß√£o
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            let opcoesUsuarios = '';
            usuariosDisponiveis.forEach(user => {
                opcoesUsuarios += `
                    <div class="bg-gradient-to-r from-yellow-600/20 to-amber-600/20 rounded-lg p-4 border border-yellow-500/50 mb-3 hover:from-yellow-600/30 hover:to-amber-600/30 transition-all cursor-pointer" onclick="selecionarUsuarioParaNomeacao('${user.username}', '${cargo}')">
                        <div class="flex items-center justify-between">
                            <div>
                                <h4 class="text-white font-bold">${user.nome}</h4>
                                <p class="text-yellow-300 text-sm">Usu√°rio: ${user.username}</p>
                                <p class="text-yellow-200 text-xs">OAB: ${user.oab}</p>
                            </div>
                            <div class="text-yellow-400">
                                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                `;
            });

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-yellow-600/30 to-amber-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-yellow-500/60 shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <div class="w-16 h-16 bg-gradient-to-br from-yellow-600 to-amber-600 rounded-xl flex items-center justify-center mx-auto mb-4 shadow-2xl">
                            <span class="text-3xl">${info.icon}</span>
                        </div>
                        <h2 class="text-3xl font-bold text-white">Nomear para ${info.nome}</h2>
                        <p class="text-yellow-200 mt-2">${info.descricao} - N√≠vel ${info.nivel}</p>
                        <div class="bg-yellow-500/20 rounded-lg p-3 mt-4 border border-yellow-500/50">
                            <p class="text-yellow-300 font-bold text-sm">üìã ${info.titulo}</p>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-xl font-bold text-white mb-4">üë• Selecione o usu√°rio para nomear:</h3>
                        <div class="max-h-96 overflow-y-auto">
                            ${opcoesUsuarios}
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Cancelar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        async function selecionarUsuarioParaNomeacao(username, cargo) {
            const usuario = usuariosCadastrados[username];
            const info = estruturaJudicial[cargo];
            
            if (!usuario || !info) {
                alert('‚ùå Erro ao processar nomea√ß√£o!');
                return;
            }

            const confirmacao = confirm(`üéØ CONFIRMAR NOMEA√á√ÉO\n\nüë§ Usu√°rio: ${usuario.nome}\nüëë Cargo: ${info.nome}\nüìã T√≠tulo: ${info.titulo}\nüèõÔ∏è N√≠vel: ${info.nivel}\n\n‚ö†Ô∏è Esta a√ß√£o n√£o pode ser desfeita!\n\nConfirma a nomea√ß√£o?`);
            
            if (confirmacao) {
                try {
                    // Realizar a nomea√ß√£o
                    usuariosCadastrados[username] = {
                        ...usuario,
                        cargo: cargo,
                        titulo: info.titulo,
                        permissoes: info.permissoes,
                        pode_nomear: info.pode_nomear || [],
                        nomeado: true,
                        nomeado_por: usuarioLogado.email || usuarioLogado.usuario,
                        data_nomeacao: new Date().toISOString(),
                        nivel_hierarquico: info.nivel
                    };

                    // Salvar dados no Firebase
                    await salvarDados();

                    // Registrar log da nomea√ß√£o no Firebase
                    await registrarLog('nomeacao', `${usuarioLogado.nome} nomeou ${usuario.nome} para ${info.nome}`, {
                        nomeador: usuarioLogado.nome,
                        nomeado: usuario.nome,
                        cargo: info.nome,
                        nivel: info.nivel
                    });

                    // Criar notifica√ß√£o para o usu√°rio nomeado (se estiver online)
                    criarNotificacaoNomeacao(usuario.nome, info.nome, info.icon);

                    // Mostrar confirma√ß√£o
                    const sucessoModal = document.createElement('div');
                    sucessoModal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center';
                    sucessoModal.innerHTML = `
                        <div class="bg-gradient-to-br from-green-600/30 to-emerald-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-green-500/60 shadow-2xl max-w-2xl w-full mx-4">
                            <div class="text-center">
                                <div class="w-20 h-20 bg-gradient-to-br from-green-600 to-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl">
                                    <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                <h2 class="text-3xl font-bold text-white mb-4">üéâ NOMEA√á√ÉO REALIZADA!</h2>
                                <div class="bg-green-500/20 rounded-lg p-6 border border-green-500/50 mb-6">
                                    <p class="text-green-300 font-bold text-lg mb-2">üë§ ${usuario.nome}</p>
                                    <p class="text-white">foi nomeado(a) com sucesso para:</p>
                                    <p class="text-green-300 font-bold text-xl mt-2">${info.icon} ${info.nome}</p>
                                    <p class="text-green-200 text-sm mt-1">${info.titulo}</p>
                                </div>
                                <div class="text-white/80 text-sm mb-6">
                                    <p>üìÖ Data: ${new Date().toLocaleDateString('pt-BR')}</p>
                                    <p>üëë Nomeado por: ${usuarioLogado.nome}</p>
                                    <p>üèõÔ∏è N√≠vel Hier√°rquico: ${info.nivel}</p>
                                    <p class="text-green-300 font-bold mt-2">‚úÖ Dados sincronizados em tempo real!</p>
                                </div>
                                <button onclick="this.closest('.fixed').remove(); document.querySelector('.fixed').remove();" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                                    ‚úÖ Concluir
                                </button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(sucessoModal);

                    // Atualizar interface se o usu√°rio nomeado estiver logado
                    if (usuarioLogado && (usuarioLogado.usuario === username || usuarioLogado.email === username)) {
                        usuarioLogado.cargo = cargo;
                        usuarioLogado.titulo = info.titulo;
                        usuarioLogado.permissoes = info.permissoes;
                        
                        // Atualizar header
                        const nomeEl = document.getElementById('nome-usuario');
                        const cargoEl = document.getElementById('cargo-usuario');
                        if (nomeEl) nomeEl.textContent = usuarioLogado.nome;
                        if (cargoEl) cargoEl.textContent = `${usuarioLogado.titulo} | OAB: ${usuarioLogado.oab}`;
                    }
                    
                } catch (error) {
                    console.error('‚ùå Erro ao realizar nomea√ß√£o:', error);
                    alert('‚ùå Erro ao realizar nomea√ß√£o. Tente novamente.');
                }
            }
        }

        function abrirHierarquiaJudicial() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            let hierarquiaHTML = '';
            
            // Organizar por n√≠veis
            const niveis = {};
            Object.entries(estruturaJudicial).forEach(([key, info]) => {
                if (!niveis[info.nivel]) niveis[info.nivel] = [];
                niveis[info.nivel].push({key, ...info});
            });
            
            Object.keys(niveis).sort((a, b) => a - b).forEach(nivel => {
                let nivelTitulo = '';
                switch(nivel) {
                    case '1': nivelTitulo = 'N√≠vel 1 - SUPREMA AUTORIDADE JUDICIAL'; break;
                    case '2': nivelTitulo = 'N√≠vel 2 - TRIBUNAIS SUPERIORES FEDERAIS'; break;
                    case '3': nivelTitulo = 'N√≠vel 3 - TRIBUNAIS DE SEGUNDA INST√ÇNCIA'; break;
                    case '4': nivelTitulo = 'N√≠vel 4 - PRIMEIRA INST√ÇNCIA ESTADUAL'; break;
                    case '5': nivelTitulo = 'N√≠vel 5 - MINIST√âRIO P√öBLICO FEDERAL'; break;
                    case '6': nivelTitulo = 'N√≠vel 6 - MINIST√âRIO P√öBLICO ESTADUAL'; break;
                    case '7': nivelTitulo = 'N√≠vel 7 - PROMOTORIA GERAL'; break;
                    case '8': nivelTitulo = 'N√≠vel 8 - PROMOTORES DE PRIMEIRA INST√ÇNCIA'; break;
                    case '9': nivelTitulo = 'N√≠vel 9 - OFICIAIS DE JUSTI√áA - SEGUNDA INST√ÇNCIA'; break;
                    case '10': nivelTitulo = 'N√≠vel 10 - OFICIAIS DE JUSTI√áA - PRIMEIRA INST√ÇNCIA'; break;
                    case '11': nivelTitulo = 'N√≠vel 11 - ADVOCACIA E DEFENSORIA'; break;
                    default: nivelTitulo = `N√≠vel ${nivel}`;
                }
                
                hierarquiaHTML += `
                    <div class="mb-8">
                        <div class="bg-gradient-to-r from-yellow-600/30 to-amber-600/30 rounded-lg p-4 border-2 border-yellow-500/50 mb-4">
                            <h3 class="text-xl font-bold text-white text-center">${nivelTitulo}</h3>
                        </div>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                `;
                
                niveis[nivel].forEach(cargo => {
                    // Verificar se o cargo est√° ocupado
                    let ocupado = false;
                    let usuarioOcupante = null;
                    let podeNomear = false;
                    
                    // Verificar nos usu√°rios cadastrados
                    if (usuariosCadastrados && Object.keys(usuariosCadastrados).length > 0) {
                        ocupado = Object.values(usuariosCadastrados).some(user => user.cargo === cargo.key && user.nomeado);
                        usuarioOcupante = Object.values(usuariosCadastrados).find(user => user.cargo === cargo.key && user.nomeado);
                    }
                    
                    // Verificar se √© o Alexandre de Moraes (sempre ocupado)
                    if (cargo.key === 'ministro_stf') {
                        ocupado = true;
                        usuarioOcupante = { nome: 'Alexandre de Moraes' };
                    }
                    
                    // Verificar se o usu√°rio logado pode nomear este cargo
                    if (usuarioLogado && usuarioLogado.pode_nomear && usuarioLogado.pode_nomear.includes(cargo.key)) {
                        podeNomear = true;
                    }
                    
                    const statusClass = ocupado ? 'from-green-600/20 to-green-800/20 border-green-500/50' : 'from-gray-600/20 to-gray-800/20 border-gray-500/50';
                    const statusText = ocupado ? '‚úÖ Ocupado' : '‚è≥ Vago';
                    const statusColor = ocupado ? 'bg-green-500/30 text-green-300' : 'bg-gray-500/30 text-gray-300';
                    
                    hierarquiaHTML += `
                        <div class="bg-gradient-to-r ${statusClass} rounded-lg p-4 border hover:scale-105 transition-all">
                            <div class="text-center">
                                <div class="text-3xl mb-2">${cargo.icon}</div>
                                <h4 class="text-white font-bold text-sm mb-1">${cargo.nome}</h4>
                                <p class="text-white/70 text-xs mb-2">${cargo.descricao}</p>
                                <p class="text-white/50 text-xs mb-3 min-h-[2.5rem]">${cargo.titulo}</p>
                                
                                <div class="space-y-2">
                                    <span class="inline-block text-xs px-2 py-1 rounded ${statusColor}">${statusText}</span>
                                    ${ocupado && usuarioOcupante ? `<p class="text-xs text-green-400 font-medium">${usuarioOcupante.nome}</p>` : ''}
                                    ${podeNomear && !ocupado ? `
                                        <button onclick="iniciarNomeacao('${cargo.key}'); this.closest('.fixed').remove();" class="w-full bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-1 px-2 rounded text-xs transition-all mt-2">
                                            üëë Nomear
                                        </button>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                hierarquiaHTML += '</div></div>';
            });

            // Adicionar estat√≠sticas
            const totalCargos = Object.keys(estruturaJudicial).length;
            const cargosOcupados = Object.values(usuariosCadastrados).filter(user => user.nomeado).length + 1; // +1 para Alexandre
            const cargosVagos = totalCargos - cargosOcupados;

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-blue-600/30 to-indigo-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-blue-500/60 shadow-2xl max-w-7xl w-full mx-4 max-h-[95vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center justify-center">
                            <span class="text-4xl mr-3">üèõÔ∏è</span>
                            Hierarquia Judicial Completa
                        </h2>
                        <p class="text-blue-200 mt-2">Estrutura organizacional do Sistema Judicial de Brasil√¢ndia RP</p>
                        
                        <!-- Estat√≠sticas -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 mb-6">
                            <div class="bg-blue-500/20 rounded-lg p-4 border border-blue-500/50">
                                <div class="text-2xl font-bold text-white">${totalCargos}</div>
                                <div class="text-blue-300 text-sm">Total de Cargos</div>
                            </div>
                            <div class="bg-green-500/20 rounded-lg p-4 border border-green-500/50">
                                <div class="text-2xl font-bold text-white">${cargosOcupados}</div>
                                <div class="text-green-300 text-sm">Cargos Ocupados</div>
                            </div>
                            <div class="bg-gray-500/20 rounded-lg p-4 border border-gray-500/50">
                                <div class="text-2xl font-bold text-white">${cargosVagos}</div>
                                <div class="text-gray-300 text-sm">Cargos Vagos</div>
                            </div>
                        </div>
                    </div>
                    
                    ${hierarquiaHTML}
                    
                    <div class="text-center mt-8 space-x-4">
                        ${usuarioLogado && usuarioLogado.permissoes && usuarioLogado.permissoes.includes('nomeacoes') ? `
                            <button onclick="abrirSistemaNomeacoes(); this.closest('.fixed').remove();" class="bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-all">
                                üëë Sistema de Nomea√ß√µes
                            </button>
                        ` : ''}
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function abrirConfiguracoes() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            modal.innerHTML = `
                <div class="bg-gradient-to-br from-indigo-600/30 to-purple-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-indigo-500/60 shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center justify-center">
                            <span class="text-4xl mr-3">‚öôÔ∏è</span>
                            Configura√ß√µes do Sistema
                        </h2>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-white font-bold mb-4">üîß Configura√ß√µes Gerais</h3>
                            <div class="space-y-3">
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="rounded">
                                    <span class="text-white text-sm">Notifica√ß√µes por email</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="rounded" checked>
                                    <span class="text-white text-sm">Backup autom√°tico</span>
                                </label>
                                <label class="flex items-center space-x-3">
                                    <input type="checkbox" class="rounded" checked>
                                    <span class="text-white text-sm">Log de atividades</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="bg-white/10 rounded-lg p-6 border border-white/20">
                            <h3 class="text-white font-bold mb-4">üîí Seguran√ßa & Backup</h3>
                            <div class="space-y-3">
                                <button onclick="exportarDados()" class="w-full bg-green-600 hover:bg-green-500 text-white py-2 px-4 rounded-lg transition-all">
                                    üì• Exportar Dados
                                </button>
                                <button onclick="mostrarBackups()" class="w-full bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg transition-all">
                                    üîÑ Gerenciar Backups
                                </button>
                                <button class="w-full bg-yellow-600 hover:bg-yellow-500 text-black py-2 px-4 rounded-lg transition-all">
                                    üìä Relat√≥rio de Acesso
                                </button>
                                <button class="w-full bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded-lg transition-all">
                                    üîÑ Resetar Sistema
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        async function abrirLogsSistema() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            try {
                // Buscar logs reais do Firebase
                const logsQuery = firebaseModules.query(
                    firebaseModules.collection(dbInstance, 'logs'),
                    firebaseModules.orderBy ? firebaseModules.orderBy('timestamp', 'desc') : null
                );
                
                const logsSnapshot = await firebaseModules.getDocs(logsQuery);
                const logsFirebase = [];
                
                logsSnapshot.forEach((doc) => {
                    const data = doc.data();
                    logsFirebase.push({
                        data: data.data_formatada || new Date(data.timestamp).toLocaleString('pt-BR'),
                        usuario: data.usuario || 'Sistema',
                        acao: data.descricao,
                        tipo: data.tipo
                    });
                });
                
                // Combinar com logs locais se houver
                const logsLocais = JSON.parse(localStorage.getItem('logsNomeacoes')) || [];
                const logsNomeacoes = logsLocais.map(log => ({
                    data: new Date(log.data).toLocaleString('pt-BR'),
                    usuario: log.nomeador,
                    acao: `üëë Nomeou ${log.nomeado} para ${log.cargo}`,
                    tipo: 'nomeacao'
                }));
                
                // Combinar todos os logs
                const logs = [...logsFirebase, ...logsNomeacoes].sort((a, b) => {
                    const dateA = new Date(a.data.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$2/$1/$3'));
                    const dateB = new Date(b.data.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$2/$1/$3'));
                    return dateB - dateA;
                });
            
                let logsHTML = '';
                if (logs.length === 0) {
                    logsHTML = '<p class="text-white text-center">Nenhum log encontrado.</p>';
                } else {
                    logs.forEach(log => {
                        const tipoClass = {
                            'info': 'bg-blue-500/20 border-blue-500/50 text-blue-300',
                            'success': 'bg-green-500/20 border-green-500/50 text-green-300',
                            'warning': 'bg-yellow-500/20 border-yellow-500/50 text-yellow-300',
                            'error': 'bg-red-500/20 border-red-500/50 text-red-300',
                            'nomeacao': 'bg-purple-500/20 border-purple-500/50 text-purple-300',
                            'login': 'bg-green-500/20 border-green-500/50 text-green-300',
                            'logout': 'bg-red-500/20 border-red-500/50 text-red-300',
                            'cadastro_admin': 'bg-yellow-500/20 border-yellow-500/50 text-yellow-300',
                            'primeiro_acesso': 'bg-blue-500/20 border-blue-500/50 text-blue-300'
                        };
                        
                        const classe = tipoClass[log.tipo] || tipoClass['info'];
                        
                        logsHTML += `
                            <div class="${classe} rounded-lg p-3 border mb-2">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <p class="font-medium">${log.acao}</p>
                                        <p class="text-sm opacity-80">Usu√°rio: ${log.usuario}</p>
                                    </div>
                                    <span class="text-xs opacity-70">${log.data}</span>
                                </div>
                            </div>
                        `;
                    });
                }
                
            } catch (error) {
                console.error('‚ùå Erro ao carregar logs:', error);
                logsHTML = '<p class="text-red-300 text-center">Erro ao carregar logs do Firebase.</p>';
            }

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-red-600/30 to-pink-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-red-500/60 shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center justify-center">
                            <span class="text-4xl mr-3">üìä</span>
                            Logs do Sistema
                        </h2>
                        <p class="text-red-200 mt-2">Monitoramento de atividades e eventos</p>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex flex-wrap gap-2 mb-4">
                            <button class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-all text-sm">
                                üìã Todos
                            </button>
                            <button class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg transition-all text-sm">
                                üëë Nomea√ß√µes
                            </button>
                            <button class="bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg transition-all text-sm">
                                ‚úÖ Sucessos
                            </button>
                            <button class="bg-yellow-600 hover:bg-yellow-500 text-black px-4 py-2 rounded-lg transition-all text-sm">
                                ‚ö†Ô∏è Avisos
                            </button>
                            <button class="bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg transition-all text-sm">
                                ‚ùå Erros
                            </button>
                        </div>
                    </div>
                    
                    <div class="max-h-96 overflow-y-auto">
                        ${logsHTML}
                    </div>
                    
                    <div class="text-center mt-6">
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Fun√ß√µes de Primeiro Acesso
        function mostrarPrimeiroAcesso() {
            document.getElementById('primeiro-acesso').classList.remove('hidden');
        }

        function fecharPrimeiroAcesso() {
            document.getElementById('primeiro-acesso').classList.add('hidden');
            // Limpar campos
            document.getElementById('oab-recebida').value = '';
            document.getElementById('nome-completo').value = '';
            document.getElementById('nova-senha').value = '';
            document.getElementById('confirmar-senha').value = '';
            // Esconder previews
            document.getElementById('info-cargo').classList.add('hidden');
            document.getElementById('preview-email').classList.add('hidden');
        }

        // Verificar se OAB foi liberada pelo admin
        function verificarOABLiberada() {
            const oab = document.getElementById('oab-recebida').value.trim();
            const infoCargoDiv = document.getElementById('info-cargo');
            
            if (!oab) {
                infoCargoDiv.classList.add('hidden');
                return;
            }
            
            // Verificar se OAB existe e est√° ativa
            if (registrosOAB[oab] && registrosOAB[oab].ativo && !registrosOAB[oab].utilizada) {
                const dadosOAB = registrosOAB[oab];
                
                // Mostrar informa√ß√µes do cargo
                document.getElementById('cargo-info').textContent = dadosOAB.cargoNome;
                document.getElementById('nivel-info').textContent = `N√≠vel ${dadosOAB.nivel}`;
                document.getElementById('dominio-info').textContent = dadosOAB.dominio;
                
                infoCargoDiv.classList.remove('hidden');
                
                // Atualizar preview do email se nome j√° foi digitado
                atualizarPreviewEmail();
                
            } else if (registrosOAB[oab] && registrosOAB[oab].utilizada) {
                infoCargoDiv.classList.add('hidden');
                mostrarMensagemPrimeiro('‚ö†Ô∏è Esta OAB j√° foi utilizada para cadastro!', 'erro');
            } else {
                infoCargoDiv.classList.add('hidden');
                mostrarMensagemPrimeiro('‚ùå OAB n√£o encontrada ou n√£o liberada pelo administrador!', 'erro');
            }
        }

        // Atualizar preview do email em tempo real
        function atualizarPreviewEmail() {
            const oab = document.getElementById('oab-recebida').value.trim();
            const nome = document.getElementById('nome-completo').value.trim();
            const previewDiv = document.getElementById('preview-email');
            
            if (oab && nome && registrosOAB[oab] && registrosOAB[oab].ativo && !registrosOAB[oab].utilizada) {
                const dadosOAB = registrosOAB[oab];
                const emailGerado = gerarEmailPorCargo(nome, dadosOAB.cargo);
                
                document.getElementById('email-preview').textContent = emailGerado;
                previewDiv.classList.remove('hidden');
            } else {
                previewDiv.classList.add('hidden');
            }
        }

        // Gerar email baseado no cargo
        function gerarEmailPorCargo(nomeCompleto, cargo) {
            // Limpar e formatar nome
            const nome = nomeCompleto.toLowerCase()
                .replace(/[√†√°√¢√£√§]/g, 'a')
                .replace(/[√®√©√™√´]/g, 'e')
                .replace(/[√¨√≠√Æ√Ø]/g, 'i')
                .replace(/[√≤√≥√¥√µ√∂]/g, 'o')
                .replace(/[√π√∫√ª√º]/g, 'u')
                .replace(/[√ß]/g, 'c')
                .replace(/[^a-z\s]/g, '')
                .trim();
            
            const partesNome = nome.split(' ');
            const primeiroNome = partesNome[0] || '';
            const ultimoNome = partesNome[partesNome.length - 1] || '';
            
            // Obter dom√≠nio do cargo
            const dadosCargo = estruturaJudicial[cargo];
            const dominio = dadosCargo ? dadosCargo.dominio : '@sistema.gov.br';
            
            // Gerar email baseado no padr√£o: primeiro.ultimo@dominio
            let emailBase = `${primeiroNome}.${ultimoNome}`;
            
            // Se primeiro e √∫ltimo nome s√£o iguais, usar apenas um
            if (primeiroNome === ultimoNome) {
                emailBase = primeiroNome;
            }
            
            return `${emailBase}${dominio}`;
        }

        async function processarPrimeiroAcesso() {
            const oab = document.getElementById('oab-recebida').value.trim();
            const nomeCompleto = document.getElementById('nome-completo').value.trim();
            const senha = document.getElementById('nova-senha').value;
            const confirmarSenha = document.getElementById('confirmar-senha').value;

            // Valida√ß√µes
            if (!oab || !nomeCompleto || !senha || !confirmarSenha) {
                mostrarMensagemPrimeiro('‚ö†Ô∏è Preencha todos os campos!', 'erro');
                return;
            }

            if (senha !== confirmarSenha) {
                mostrarMensagemPrimeiro('‚ö†Ô∏è As senhas n√£o coincidem!', 'erro');
                return;
            }

            if (senha.length < 6) {
                mostrarMensagemPrimeiro('‚ö†Ô∏è A senha deve ter pelo menos 6 caracteres!', 'erro');
                return;
            }

            // Verificar se OAB existe nos registros e est√° ativa
            if (!registrosOAB[oab] || !registrosOAB[oab].ativo) {
                mostrarMensagemPrimeiro('‚ùå N√∫mero OAB n√£o encontrado ou n√£o liberado pelo administrador!', 'erro');
                return;
            }

            // Verificar se j√° foi usado
            if (registrosOAB[oab].utilizada) {
                mostrarMensagemPrimeiro('‚ö†Ô∏è Este n√∫mero OAB j√° foi utilizado para cadastro!', 'erro');
                return;
            }

            try {
                // Obter dados da OAB liberada
                const dadosOAB = registrosOAB[oab];
                const cargoInfo = estruturaJudicial[dadosOAB.cargo];
                
                // Gerar email automaticamente baseado no nome e cargo
                const emailUsuario = gerarEmailPorCargo(nomeCompleto, dadosOAB.cargo);
                
                // Verificar se email j√° existe
                const emailJaExiste = Object.values(usuariosCadastrados).some(user => user.email === emailUsuario);
                if (emailJaExiste) {
                    mostrarMensagemPrimeiro('‚ö†Ô∏è J√° existe um usu√°rio com este email! Tente um nome diferente.', 'erro');
                    return;
                }
                
                // Tentar criar no Firebase Auth
                const resultado = await cadastrarUsuarioFirebase({
                    nome: nomeCompleto,
                    email: emailUsuario,
                    senha: senha,
                    cargo: dadosOAB.cargo,
                    titulo: cargoInfo?.titulo || 'Profissional Jur√≠dico',
                    permissoes: cargoInfo?.permissoes || ['basicas'],
                    oab: oab,
                    nomeado: false,
                    pode_nomear: cargoInfo?.pode_nomear || []
                });

                if (resultado.sucesso) {
                    // Adicionar aos usu√°rios cadastrados
                    usuariosCadastrados[emailUsuario] = {
                        nome: nomeCompleto,
                        email: emailUsuario,
                        cargo: dadosOAB.cargo,
                        oab: oab,
                        titulo: cargoInfo?.titulo || 'Profissional Jur√≠dico',
                        permissoes: cargoInfo?.permissoes || ['basicas'],
                        dataCriacao: new Date().toISOString(),
                        nomeado: false,
                        nivel_hierarquico: dadosOAB.nivel
                    };

                    // Marcar OAB como utilizada
                    registrosOAB[oab].utilizada = true;
                    registrosOAB[oab].usuarioEmail = emailUsuario;
                    registrosOAB[oab].nomeUsuario = nomeCompleto;
                    registrosOAB[oab].dataUtilizacao = new Date().toISOString();

                    // Salvar dados no Firebase
                    await salvarDados();

                    // Registrar log
                    await registrarLog('primeiro_acesso', `Primeiro acesso realizado: ${nomeCompleto} (${emailUsuario})`, {
                        nome: nomeCompleto,
                        email: emailUsuario,
                        cargo: cargoInfo.nome,
                        oab: oab
                    });

                    mostrarMensagemPrimeiro(`‚úÖ Conta criada com sucesso!\n\nüë§ Nome: ${nomeCompleto}\nüìß Email: ${emailUsuario}\nüèõÔ∏è Cargo: ${cargoInfo.nome}\nüìä N√≠vel: ${dadosOAB.nivel}\n\nüîë Agora voc√™ pode fazer login com este email!`, 'sucesso');

                    setTimeout(() => {
                        fecharPrimeiroAcesso();
                    }, 4000);
                } else {
                    mostrarMensagemPrimeiro(`‚ùå Erro ao criar conta: ${resultado.erro}`, 'erro');
                }
                
            } catch (error) {
                console.error('‚ùå Erro no primeiro acesso:', error);
                mostrarMensagemPrimeiro('‚ùå Erro ao criar conta. Tente novamente.', 'erro');
            }
        }

        // Fun√ß√£o para cadastrar usu√°rio no Firebase
        async function cadastrarUsuarioFirebase(dadosUsuario) {
            try {
                // Tentar criar usu√°rio no Firebase Auth
                const { createUserWithEmailAndPassword } = window.firebaseModules;
                const auth = window.firebaseAuth;
                
                const userCredential = await createUserWithEmailAndPassword(auth, dadosUsuario.email, dadosUsuario.senha);
                const user = userCredential.user;
                
                console.log('‚úÖ Usu√°rio criado no Firebase Auth:', user.email);
                
                // Salvar dados adicionais no Firestore
                const { doc, setDoc } = window.firebaseModules;
                const db = window.firebaseDB;
                
                await setDoc(doc(db, 'usuarios', user.uid), {
                    nome: dadosUsuario.nome,
                    email: dadosUsuario.email,
                    cargo: dadosUsuario.cargo,
                    titulo: dadosUsuario.titulo,
                    permissoes: dadosUsuario.permissoes,
                    oab: dadosUsuario.oab,
                    nomeado: dadosUsuario.nomeado || false,
                    pode_nomear: dadosUsuario.pode_nomear || [],
                    dataCriacao: new Date().toISOString(),
                    ativo: true
                });
                
                console.log('‚úÖ Dados do usu√°rio salvos no Firestore');
                
                return { sucesso: true, usuario: user };
                
            } catch (error) {
                console.error('‚ùå Erro ao cadastrar usu√°rio:', error);
                
                let mensagemErro = 'Erro desconhecido ao criar conta';
                
                if (error.code === 'auth/email-already-in-use') {
                    mensagemErro = 'Este email j√° est√° sendo usado por outra conta';
                } else if (error.code === 'auth/weak-password') {
                    mensagemErro = 'A senha √© muito fraca. Use pelo menos 6 caracteres';
                } else if (error.code === 'auth/invalid-email') {
                    mensagemErro = 'Email inv√°lido';
                } else if (error.code === 'auth/network-request-failed') {
                    mensagemErro = 'Erro de conex√£o. Verifique sua internet';
                } else {
                    mensagemErro = error.message || 'Erro ao criar conta';
                }
                
                return { sucesso: false, erro: mensagemErro };
            }
        }

        // Fun√ß√£o para registrar logs do sistema
        async function registrarLog(tipo, descricao, dadosAdicionais = {}) {
            try {
                const { collection, addDoc } = window.firebaseModules;
                const db = window.firebaseDB;
                
                if (!db) {
                    console.warn('‚ö†Ô∏è Firebase offline - log n√£o ser√° salvo');
                    return;
                }
                
                const logData = {
                    tipo: tipo,
                    descricao: descricao,
                    timestamp: new Date(),
                    usuario: usuarioLogado ? usuarioLogado.email : 'Sistema',
                    dadosAdicionais: dadosAdicionais
                };
                
                await addDoc(collection(db, 'logs'), logData);
                console.log('üìù Log registrado:', tipo, descricao);
                
            } catch (error) {
                console.error('‚ùå Erro ao registrar log:', error);
            }
        }

        function mostrarMensagemPrimeiro(texto, tipo) {
            const mensagem = document.getElementById('mensagem-primeiro-acesso');
            const textoMensagem = document.getElementById('texto-mensagem-primeiro');
            
            mensagem.classList.remove('hidden');
            textoMensagem.textContent = texto;
            
            // Remover classes anteriores
            mensagem.classList.remove('bg-green-500/20', 'border-green-500/50', 'bg-red-500/20', 'border-red-500/50');
            textoMensagem.classList.remove('text-green-300', 'text-red-300');
            
            // Aplicar estilo baseado no tipo
            if (tipo === 'sucesso') {
                mensagem.classList.add('bg-green-500/20', 'border', 'border-green-500/50');
                textoMensagem.classList.add('text-green-300');
            } else {
                mensagem.classList.add('bg-red-500/20', 'border', 'border-red-500/50');
                textoMensagem.classList.add('text-red-300');
            }
        }

        function getTituloFromCargo(cargo) {
            const titulos = {
                'magistrado': 'Juiz de Direito',
                'promotor': 'Promotor de Justi√ßa',
                'advogado': 'Advogado(a)',
                'escrivao': 'Escriv√£o Judicial',
                'oficial': 'Oficial de Justi√ßa'
            };
            return titulos[cargo] || 'Profissional Jur√≠dico';
        }

        function getPermissoesCargo(cargo) {
            const permissoes = {
                'magistrado': ['todas', 'sentencas', 'audiencias'],
                'promotor': ['acusacao', 'investigacao', 'recursos'],
                'advogado': ['defesa', 'peticoes', 'honorarios'],
                'escrivao': ['documentos', 'atas', 'certidoes'],
                'oficial': ['mandados', 'intimacoes', 'cumprimento']
            };
            return permissoes[cargo] || ['basicas'];
        }

        // Event listener para Enter no formul√°rio
        document.addEventListener('DOMContentLoaded', function() {
            const formLogin = document.getElementById('form-login');
            if (formLogin) {
                formLogin.addEventListener('submit', function(e) {
                    e.preventDefault();
                    realizarLogin();
                });
            }
            
            const formPrimeiroAcesso = document.getElementById('form-primeiro-acesso');
            if (formPrimeiroAcesso) {
                formPrimeiroAcesso.addEventListener('submit', function(e) {
                    e.preventDefault();
                    processarPrimeiroAcesso();
                });
            }
            
            // Enter nos campos individuais
            ['login-usuario', 'login-senha'].forEach(id => {
                const elemento = document.getElementById(id);
                if (elemento) {
                    elemento.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            realizarLogin();
                        }
                    });
                }
            });
        });

        // Logout real
        async function logout() {
            if (confirm('üö™ Tem certeza que deseja sair do sistema?')) {
                try {
                    // Parar sistema de usu√°rios online
                    pararSistemaOnline();
                    
                    // Registrar log de logout
                    await registrarLog('logout', `Logout realizado por ${usuarioLogado ? usuarioLogado.email : 'Usu√°rio'}`);
                    
                    // Limpar listeners do Firebase
                    listeners.forEach(unsubscribe => {
                        if (typeof unsubscribe === 'function') {
                            unsubscribe();
                        }
                    });
                    listeners = [];
                    
                    // Fazer logout no Firebase
                    await firebaseModules.signOut(authInstance);
                    
                    // Mostrar mensagem de logout
                    const notificacao = document.createElement('div');
                    notificacao.className = 'fixed top-4 right-4 bg-gradient-to-r from-red-600 to-red-500 text-white p-4 rounded-lg shadow-lg z-50';
                    notificacao.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <div class="text-2xl">üëã</div>
                            <div>
                                <p class="font-bold">At√© logo, ${usuarioLogado ? usuarioLogado.nome : 'Usu√°rio'}!</p>
                                <p class="text-sm opacity-90">Logout realizado com sucesso</p>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(notificacao);
                    
                    // Limpar dados do usu√°rio
                    usuarioLogado = null;
                    
                    // Resetar interface
                    setTimeout(() => {
                        mostrarTelaLogin();
                        mostrarSecao('inicial');
                        
                        // Limpar campos do login
                        document.getElementById('login-usuario').value = '';
                        document.getElementById('login-senha').value = '';
                        esconderMensagem();
                        
                        // Remover notifica√ß√£o
                        notificacao.remove();
                    }, 2000);
                    
                    console.log('‚úÖ Logout realizado com sucesso');
                    
                } catch (error) {
                    console.error('‚ùå Erro no logout:', error);
                    alert('‚ùå Erro ao fazer logout. Tente novamente.');
                }
            }
        }
        
        // ===== SISTEMA DE ESCOLHA DE PORTAIS =====
        
        function mostrarEscolhaPortalUniversal() {
            console.log('üéØ Fun√ß√£o mostrarEscolhaPortalUniversal() chamada');
            console.log('üë§ UsuarioLogado:', usuarioLogado);
            
            if (!usuarioLogado) {
                console.log('‚ùå Usu√°rio n√£o logado - mostrando alerta');
                alert('‚ö†Ô∏è Fa√ßa login primeiro para acessar os portais!');
                return;
            }

            console.log('‚úÖ Criando modal de sele√ß√£o de portais...');
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            // Determinar portais dispon√≠veis baseado no n√≠vel hier√°rquico
            let portaisDisponiveis = '';
            const nivel = obterNivelHierarquico(usuarioLogado.cargo);
            
            // Todos t√™m acesso ao portal do advogado (n√≠vel base)
            portaisDisponiveis += `
                <div class="bg-blue-500/20 rounded-lg p-6 border border-blue-500/30 hover:bg-blue-500/30 transition-all cursor-pointer" onclick="redirecionarParaPortal('advogado')">
                    <div class="text-center">
                        <i class="fas fa-briefcase text-blue-400 text-4xl mb-4"></i>
                        <h3 class="text-white font-bold text-lg mb-2">Portal do Advogado</h3>
                        <p class="text-blue-200 text-sm mb-3">Peti√ß√µes, Honor√°rios, Jurisprud√™ncia</p>
                        <span class="bg-blue-500/30 text-blue-200 px-2 py-1 rounded text-xs">N√≠vel 11 - Acesso Base</span>
                    </div>
                </div>
            `;
            
            // Minist√©rio P√∫blico (n√≠veis 5-8)
            if (nivel <= 8) {
                portaisDisponiveis += `
                    <div class="bg-red-500/20 rounded-lg p-6 border border-red-500/30 hover:bg-red-500/30 transition-all cursor-pointer" onclick="redirecionarParaPortal('promotor')">
                        <div class="text-center">
                            <i class="fas fa-balance-scale text-red-400 text-4xl mb-4"></i>
                            <h3 class="text-white font-bold text-lg mb-2">Portal do Promotor</h3>
                            <p class="text-red-200 text-sm mb-3">Calc. Penas, Den√∫ncias, MP</p>
                            <span class="bg-red-500/30 text-red-200 px-2 py-1 rounded text-xs">N√≠veis 5-8 + Heran√ßa</span>
                        </div>
                    </div>
                `;
            }
            
            // Justi√ßa Estadual (n√≠veis 3-4)
            if (nivel <= 4) {
                portaisDisponiveis += `
                    <div class="bg-green-500/20 rounded-lg p-6 border border-green-500/30 hover:bg-green-500/30 transition-all cursor-pointer" onclick="redirecionarParaPortal('juiz-estadual')">
                        <div class="text-center">
                            <i class="fas fa-gavel text-green-400 text-4xl mb-4"></i>
                            <h3 class="text-white font-bold text-lg mb-2">Portal Juiz Estadual</h3>
                            <p class="text-green-200 text-sm mb-3">Senten√ßas, Dashboard, Gest√£o</p>
                            <span class="bg-green-500/30 text-green-200 px-2 py-1 rounded text-xs">N√≠veis 3-4 + Heran√ßa</span>
                        </div>
                    </div>
                `;
            }
            
            // Justi√ßa Federal (n√≠veis 1-2) - Suprema Autoridade
            if (nivel <= 2) {
                portaisDisponiveis += `
                    <div class="bg-yellow-500/20 rounded-lg p-6 border border-yellow-500/30 hover:bg-yellow-500/30 transition-all cursor-pointer" onclick="redirecionarParaPortal('juiz-federal')">
                        <div class="text-center">
                            <i class="fas fa-crown text-yellow-400 text-4xl mb-4"></i>
                            <h3 class="text-white font-bold text-lg mb-2">Portal Juiz Federal</h3>
                            <p class="text-yellow-200 text-sm mb-3">Admin Total, Nomea√ß√µes, Supremo</p>
                            <span class="bg-yellow-500/30 text-yellow-200 px-2 py-1 rounded text-xs">N√≠veis 1-2 - SUPREMA AUTORIDADE</span>
                        </div>
                    </div>
                `;
            }

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-gray-800/90 to-gray-700/90 backdrop-blur-xl rounded-2xl p-6 max-w-4xl w-full mx-4 border-2 border-blue-500/50 shadow-2xl">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h2 class="text-2xl font-bold text-white mb-2">üèõÔ∏è Escolha o Portal de Acesso</h2>
                            <p class="text-gray-300">Usu√°rio: <strong class="text-blue-300">${usuarioLogado.nome}</strong> | Cargo: <strong class="text-green-300">${usuarioLogado.titulo}</strong></p>
                        </div>
                        <button onclick="fecharModalPortal()" class="text-gray-400 hover:text-white text-2xl">√ó</button>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        ${portaisDisponiveis}
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg p-4 border border-blue-500/30 mb-6">
                        <h3 class="text-blue-300 font-bold mb-2">üìä Sistema Hier√°rquico</h3>
                        <p class="text-white text-sm">
                            Seu n√≠vel de acesso: <strong class="text-yellow-300">N√≠vel ${nivel}</strong>. 
                            Voc√™ tem acesso a todas as funcionalidades dos n√≠veis inferiores atrav√©s do sistema de heran√ßa.
                        </p>
                    </div>
                    
                    <div class="flex gap-4 justify-center">
                        <button onclick="ficarNoPortalPrincipal()" class="bg-gray-600 hover:bg-gray-500 text-white px-6 py-3 rounded-lg transition-all">
                            <i class="fas fa-home mr-2"></i>Ficar no Portal Principal
                        </button>
                        <button onclick="fecharModalPortal()" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg transition-all">
                            <i class="fas fa-times mr-2"></i>Cancelar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function obterNivelHierarquico(cargo) {
            // Usar a estrutura principal para obter n√≠vel
            const cargoInfo = estruturaJudicial[cargo];
            return cargoInfo ? cargoInfo.nivel : 99;
        }

        function redirecionarParaPortal(portal) {
            console.log(`üîÑ Redirecionando para portal: ${portal}`);
            
            // Salvar dados do usu√°rio para o portal de destino
            localStorage.setItem('usuarioLogadoAtual', JSON.stringify(usuarioLogado));
            
            // Definir mapeamento de portais
            const portais = {
                'advogado': 'Portal do Advogado',
                'promotor': 'Portal do Promotor',
                'juiz-estadual': 'Portal Juiz Estadual',
                'juiz-federal': 'Portal Juiz Federal'
            };
            
            const arquivos = {
                'advogado': 'portal-advogado.html',
                'promotor': 'portal-promotor.html',
                'juiz-estadual': 'portal-juiz-estadual.html',
                'juiz-federal': 'portal-juiz-federal.html'
            };
            
            const nomePortal = portais[portal];
            const arquivo = arquivos[portal];
            
            if (arquivo && nomePortal) {
                // Notificar acesso ao portal
                if (typeof notificarAcessoPortal === 'function') {
                    notificarAcessoPortal(nomePortal);
                }
                
                setTimeout(() => {
                    window.location.href = arquivo;
                }, 1500); // Dar tempo para ver a notifica√ß√£o
            } else {
                alert('‚ùå Portal n√£o encontrado!');
                if (typeof notificarErro === 'function') {
                    notificarErro('Portal n√£o encontrado: ' + portal);
                }
            }
        }

        function fecharModalPortal() {
            const modal = document.querySelector('.fixed.inset-0.bg-black\\/95');
            if (modal) {
                modal.remove();
            }
        }

        function ficarNoPortalPrincipal() {
            console.log('üè† Usu√°rio optou por ficar no portal principal');
            fecharModalPortal();
            mostrarMensagem('üè† Permanecendo no Portal Principal', 'sucesso');
        }
        
        // ===== FIM SISTEMA DE ESCOLHA DE PORTAIS =====

        // ===== FUN√á√ïES ADMINISTRATIVAS =====

        // Fun√ß√£o para abrir sistema de libera√ß√£o de OAB
        function abrirCadastroUsuario() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            modal.innerHTML = `
                <div class="bg-gradient-to-br from-green-600/30 to-emerald-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-green-500/60 shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center justify-center">
                            <span class="text-4xl mr-3">üîë</span>
                            Liberar N√∫meros OAB
                        </h2>
                        <p class="text-green-200 mt-2">Autorizar n√∫meros para cadastro no sistema</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <!-- Formul√°rio de Libera√ß√£o -->
                        <div class="bg-black/30 rounded-lg p-6 border border-green-500/30">
                            <h3 class="text-green-300 font-bold mb-4">üÜî Liberar Nova OAB</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-white/90 font-medium text-sm mb-2">N√∫mero OAB</label>
                                    <input type="text" id="novo-numero-oab" placeholder="Ex: 123456" 
                                           class="w-full px-3 py-2 rounded-lg bg-gray-800/80 border border-gray-600/60 text-white placeholder-gray-400 focus:border-green-500 text-sm">
                                </div>
                                <div>
                                    <label class="block text-white/90 font-medium text-sm mb-2">Cargo</label>
                                    <select id="cargo-oab" class="w-full px-3 py-2 rounded-lg bg-gray-800/80 border border-gray-600/60 text-white focus:border-green-500 text-sm">
                                        <option value="">Selecione o cargo...</option>
                                        <option value="ministro_stf">ÔøΩ Ministro do STF (N√≠vel 1)</option>
                                        <option value="ministro_stj">üèõÔ∏è Ministro do STJ (N√≠vel 2)</option>
                                        <option value="desembargador_federal">‚öñÔ∏è Desembargador Federal (N√≠vel 3)</option>
                                        <option value="desembargador">‚öñÔ∏è Desembargador Estadual (N√≠vel 3)</option>
                                        <option value="juiz_federal">üèõÔ∏è Juiz Federal (N√≠vel 4)</option>
                                        <option value="juiz_estadual">üèõÔ∏è Juiz de Direito (N√≠vel 4)</option>
                                        <option value="procurador_geral_republica">üõ°Ô∏è Procurador-Geral da Rep√∫blica (N√≠vel 5)</option>
                                        <option value="procurador_republica">üõ°Ô∏è Procurador da Rep√∫blica (N√≠vel 6)</option>
                                        <option value="procurador_geral_justica">ÔøΩÔ∏è Procurador-Geral de Justi√ßa (N√≠vel 5)</option>
                                        <option value="procurador_justica">ÔøΩÔ∏è Procurador de Justi√ßa (N√≠vel 6)</option>
                                        <option value="promotor_justica">ÔøΩÔ∏è Promotor de Justi√ßa (N√≠vel 7)</option>
                                        <option value="defensor_publico_geral">ÔøΩÔ∏è Defensor P√∫blico-Geral (N√≠vel 8)</option>
                                        <option value="defensor_publico">ÔøΩÔ∏è Defensor P√∫blico (N√≠vel 9)</option>
                                        <option value="advogado">ÔøΩ‚Äçüíº Advogado (N√≠vel 10)</option>
                                    </select>
                                </div>
                                <button onclick="liberarOAB()" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-4 rounded-lg transition-all">
                                    üîë Liberar OAB
                                </button>
                            </div>
                        </div>

                        <!-- Lista de OABs Liberadas -->
                        <div class="bg-black/30 rounded-lg p-6 border border-green-500/30">
                            <h3 class="text-green-300 font-bold mb-4">üìã OABs Liberadas</h3>
                            <div id="lista-oabs-liberadas" class="space-y-2 max-h-80 overflow-y-auto">
                                <!-- Lista ser√° preenchida dinamicamente -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center space-x-4">
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Carregar lista de OABs liberadas
            carregarListaOABsLiberadas();
        }

        // Fun√ß√£o para liberar uma OAB
        function liberarOAB() {
            const numeroOAB = document.getElementById('novo-numero-oab').value.trim();
            const cargo = document.getElementById('cargo-oab').value;
            
            if (!numeroOAB || !cargo) {
                alert('‚ö†Ô∏è Preencha o n√∫mero OAB e selecione o cargo!');
                return;
            }
            
            // Verificar se OAB j√° existe
            if (registrosOAB[numeroOAB]) {
                alert('‚ö†Ô∏è Este n√∫mero OAB j√° foi liberado!');
                return;
            }
            
            // Obter dados do cargo
            const dadosCargo = estruturaJudicial[cargo];
            if (!dadosCargo) {
                alert('‚ùå Cargo inv√°lido selecionado!');
                return;
            }
            
            // Adicionar novo registro
            registrosOAB[numeroOAB] = {
                numero: numeroOAB,
                ativo: true,
                utilizada: false,
                cargo: cargo,
                cargoNome: dadosCargo.nome,
                nivel: dadosCargo.nivel,
                dominio: dadosCargo.dominio,
                liberadoPor: usuarioLogado ? usuarioLogado.nome : "Administrador",
                dataLiberacao: new Date().toISOString()
            };
            
            // Salvar dados
            salvarDados();
            
            // Limpar campos
            document.getElementById('novo-numero-oab').value = '';
            document.getElementById('cargo-oab').value = '';
            
            // Recarregar lista
            carregarListaOABsLiberadas();
            
            // Notificar sucesso
            alert(`‚úÖ OAB ${numeroOAB} liberada com sucesso!\nCargo: ${dadosCargo.nome}\nN√≠vel: ${dadosCargo.nivel}`);
            
            // Registrar log
            registrarLog('oab_liberada', `OAB ${numeroOAB} liberada para cargo ${dadosCargo.nome}`, {
                numero: numeroOAB,
                cargo: cargo,
                nivel: dadosCargo.nivel
            });
        }

        // Carregar lista de OABs liberadas
        function carregarListaOABsLiberadas() {
            const lista = document.getElementById('lista-oabs-liberadas');
            if (!lista) return;
            
            let listaHTML = '';
            
            const oabsOrdenadas = Object.values(registrosOAB).sort((a, b) => {
                // Ordenar por n√≠vel (menor primeiro) e depois por n√∫mero
                if (a.nivel !== b.nivel) {
                    return a.nivel - b.nivel;
                }
                return parseInt(a.numero) - parseInt(b.numero);
            });
            
            if (oabsOrdenadas.length === 0) {
                listaHTML = '<p class="text-gray-400 text-sm text-center">Nenhuma OAB liberada ainda</p>';
            } else {
                oabsOrdenadas.forEach(oab => {
                    const statusClass = oab.utilizada ? 'bg-gray-600/50 border-gray-500/50' : 'bg-green-600/20 border-green-500/50';
                    const statusText = oab.utilizada ? '‚úÖ Utilizada' : 'üîì Dispon√≠vel';
                    const statusColor = oab.utilizada ? 'text-gray-300' : 'text-green-300';
                    
                    listaHTML += `
                        <div class="bg-gray-800/50 rounded-lg p-3 border ${statusClass}">
                            <div class="flex justify-between items-start">
                                <div class="flex-1">
                                    <p class="text-white font-bold">OAB: ${oab.numero}</p>
                                    <p class="text-white/70 text-sm">${oab.cargoNome}</p>
                                    <p class="text-blue-300 text-xs">N√≠vel ${oab.nivel} ‚Ä¢ ${oab.dominio}</p>
                                    ${oab.utilizada && oab.nomeUsuario ? `<p class="text-gray-400 text-xs">Por: ${oab.nomeUsuario}</p>` : ''}
                                </div>
                                <div class="text-right">
                                    <span class="${statusColor} text-xs font-medium">${statusText}</span>
                                    <p class="text-gray-400 text-xs mt-1">${new Date(oab.dataLiberacao).toLocaleDateString('pt-BR')}</p>
                                    ${!oab.utilizada ? `<button onclick="revogarOAB('${oab.numero}')" class="text-red-400 hover:text-red-300 text-xs mt-1">üóëÔ∏è Revogar</button>` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            lista.innerHTML = listaHTML;
        }

        // Revogar uma OAB
        function revogarOAB(numeroOAB) {
            if (confirm(`‚ö†Ô∏è Tem certeza que deseja revogar a OAB ${numeroOAB}?\nEsta a√ß√£o n√£o pode ser desfeita!`)) {
                delete registrosOAB[numeroOAB];
                
                // Salvar dados
                salvarDados();
                
                // Recarregar lista
                carregarListaOABsLiberadas();
                
                alert(`‚úÖ OAB ${numeroOAB} revogada com sucesso!`);
                
                // Registrar log
                registrarLog('oab_revogada', `OAB ${numeroOAB} revogada pelo administrador`);
            }
        }

        // Notificar OAB liberada
        async function notificarOABLiberada(numeroOAB, nomeUsuario) {
            const notificacao = {
                titulo: 'üÜî Nova OAB Liberada',
                mensagem: `OAB ${numeroOAB} foi liberada${nomeUsuario ? ` para ${nomeUsuario}` : ''}`,
                tipo: 'info',
                timestamp: new Date()
            };
            
            await enviarNotificacaoGlobal(notificacao);
        }
        
        // ===== FIM FUN√á√ïES ADMINISTRATIVAS =====
        
        function getCargoIcon(cargo) {
            const icons = {
                'administrador': 'üëë',
                'magistrado': 'üë®‚Äç‚öñÔ∏è',
                'promotor': 'üèõÔ∏è',
                'advogado': 'üë®‚Äçüíº',
                'escrivao': 'üìù',
                'oficial': 'üëÆ‚Äç‚ôÇÔ∏è'
            };
            return icons[cargo] || 'üë§';
        }

        // Fun√ß√£o para capturar foto do documento
        function capturarFotoDocumento() {
            const conteudo = document.getElementById('conteudo-documento');
            
            // Usar html2canvas para capturar o elemento
            html2canvas(conteudo, {
                scale: 3, // Alta resolu√ß√£o
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#ffffff',
                width: conteudo.scrollWidth,
                height: conteudo.scrollHeight
            }).then(canvas => {
                // Criar link para download
                const link = document.createElement('a');
                link.download = `documento_${new Date().getTime()}.png`;
                link.href = canvas.toDataURL('image/png', 1.0);
                link.click();
                
                alert('üì∏ Foto HD do documento gerada com sucesso!');
            }).catch(err => {
                // Fallback: captura simples
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1200;
                canvas.height = 1600;
                
                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                ctx.fillStyle = '#000000';
                ctx.font = '16px Arial';
                ctx.fillText('Documento capturado em ' + new Date().toLocaleString('pt-BR'), 50, 50);
                ctx.fillText('Sistema Jur√≠dico - Brasil√¢ndia RP', 50, 80);
                
                const link = document.createElement('a');
                link.download = `documento_${new Date().getTime()}.png`;
                link.href = canvas.toDataURL('image/png', 1.0);
                link.click();
                
                alert('üì∏ Foto do documento gerada! (Vers√£o simplificada)');
            });
        }

        // Fun√ß√£o para mostrar se√ß√µes
        function mostrarSecao(secao) {
            // Esconder todas as se√ß√µes
            const secoes = ['inicial', 'calculadora', 'documentos', 'audiencias', 'dashboard', 'advogados', 'processos', 'reus', 'mobile'];
            secoes.forEach(s => {
                document.getElementById(s).classList.add('hidden');
            });
            
            // Remover efeito brilhante de todos os menus
            const menus = ['menu-calculadora', 'menu-documentos', 'menu-audiencias', 'menu-dashboard', 'menu-advogados', 'menu-processos', 'menu-reus', 'menu-mobile'];
            menus.forEach(m => {
                document.getElementById(m).classList.remove('pulse-glow');
            });
            
            // Adicionar efeito brilhante ao menu ativo
            if (secao !== 'inicial') {
                document.getElementById('menu-' + secao).classList.add('pulse-glow');
            }
            
            // Mostrar se√ß√£o selecionada
            document.getElementById(secao).classList.remove('hidden');
            document.getElementById(secao).classList.add('fade-in');
            
            // Adicionar event listeners para campos edit√°veis ap√≥s mostrar se√ß√£o
            setTimeout(() => {
                const camposEditaveis = document.querySelectorAll('[onclick*="tornarEditavel"]');
                camposEditaveis.forEach(campo => {
                    campo.style.cursor = 'pointer';
                    campo.title = 'Clique para editar';
                });
            }, 100);
        }

        // Calculadora de Penas
        function calcularPenaCompleta() {
    const crimesSelecionados = document.querySelectorAll('.crime-tag');
    const reducoesSelecionadas = document.querySelectorAll('.reducao-checkbox:checked');
    
    if (crimesSelecionados.length === 0) {
        alert('‚ö†Ô∏è Selecione pelo menos um crime');
        return;
    }

    let multaTotal = 0;
    let tempoTotal = 0;
    let crimesTexto = [];

    crimesSelecionados.forEach(crime => {
        multaTotal += parseInt(crime.dataset.multa);
        tempoTotal += parseInt(crime.dataset.tempo);
        crimesTexto.push(crime.dataset.crime);
    });

    let reducaoTotal = 0;
    reducoesSelecionadas.forEach(reducao => {
        reducaoTotal += parseInt(reducao.dataset.reducao);
    });

    // Limite m√°ximo de redu√ß√£o: 50%
    if (reducaoTotal > 50) reducaoTotal = 50;

    const multaFinal = multaTotal * (1 - reducaoTotal / 100);
    const tempoFinal = tempoTotal * (1 - reducaoTotal / 100);

    document.getElementById('resultado-texto').innerHTML = `
        <div class="space-y-3">
            <div class="bg-green-500/20 rounded-lg p-3 border border-green-500/30">
                <h5 class="text-green-300 font-bold mb-2">‚úÖ Senten√ßa Calculada</h5>
                ${multaTotal > 0 ? `<p class="text-white"><strong>üí∞ Multa:</strong> R$ ${multaFinal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</p>` : ''}
                ${tempoTotal > 0 ? `<p class="text-white"><strong>‚è∞ Pris√£o:</strong> ${tempoFinal.toFixed(1)} meses</p>` : ''}
                <p class="text-white"><strong>üìâ Redu√ß√£o:</strong> ${reducaoTotal}%</p>
            </div>
            <div class="bg-blue-500/20 rounded-lg p-3 border border-blue-500/30">
                <h5 class="text-blue-300 font-bold mb-2">üìã Crimes: ${crimesTexto.join(', ')}</h5>
            </div>
        </div>
    `;
}


        // Vari√°vel global para armazenar assinatura
        let assinaturaUpload = null;

        // Fun√ß√£o para upload de assinatura
        function uploadAssinatura() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*,.pdf';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        assinaturaUpload = e.target.result;
                        alert('‚úÖ Assinatura carregada com sucesso!');
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        // Fun√ß√£o de Debug para linha 5451
        function debugLinha5451() {
            console.log('üîç Debug da linha 5451:');
            console.log('- Fun√ß√£o gerarDocumento dispon√≠vel:', typeof gerarDocumento);
            console.log('- Elemento area-documento existe:', !!document.getElementById('area-documento'));
            console.log('- Template mandado-prisao carregado corretamente');
            
            // Testar gera√ß√£o de mandado
            try {
                gerarDocumento('mandado-prisao');
                console.log('‚úÖ Mandado de pris√£o gerado com sucesso');
            } catch (error) {
                console.error('‚ùå Erro ao gerar mandado:', error);
            }
        }

        // Fun√ß√£o para tornar campos edit√°veis
        function tornarEditavel(elemento) {
            if (elemento.contentEditable === 'true') return;
            
            elemento.contentEditable = 'true';
            elemento.style.backgroundColor = '#fff3cd';
            elemento.style.border = '2px dashed #ffc107';
            elemento.style.padding = '2px 4px';
            elemento.focus();
            
            elemento.addEventListener('blur', function() {
                elemento.contentEditable = 'false';
                elemento.style.backgroundColor = '';
                elemento.style.border = '';
                elemento.style.padding = '';
            });
            
            elemento.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    elemento.blur();
                }
            });
        }

        // Gerador de Documentos - Vers√£o Otimizada
        function gerarDocumento(tipo) {
            try {
                document.getElementById('area-documento').classList.remove('hidden');
                const titulo = document.getElementById('titulo-documento');
                const conteudo = document.getElementById('conteudo-documento');
                
                if (!titulo || !conteudo) {
                    console.error('Elementos de documento n√£o encontrados');
                    return;
                }
                
                switch(tipo) {
                    case 'mandado-prisao':
                    titulo.textContent = 'Mandado de Pris√£o Preventiva';
                    conteudo.innerHTML = `
                        <div style="max-width: 800px; margin: 0 auto; padding: 40px; background: #fff; box-shadow: 0 0 20px rgba(0,0,0,0.1); border: 2px solid #8B4513; font-family: 'Times New Roman', serif;">
                            <!-- Cabe√ßalho Elegante -->
                            <div style="text-align: center; margin-bottom: 40px; border-bottom: 3px double #8B4513; padding-bottom: 30px; background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%);">
                                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 25px;">
                                    <div style="width: 120px; height: 120px; border: 3px solid #8B4513; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, #fff 0%, #f0f0f0 100%);">
                                        <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #8B4513;">
                                            <circle cx="50" cy="50" r="45" fill="none" stroke="#8B4513" stroke-width="3"/>
                                            <circle cx="50" cy="30" r="8" fill="#8B4513"/>
                                            <rect x="45" y="40" width="10" height="25" fill="#8B4513"/>
                                            <polygon points="35,70 65,70 60,85 40,85" fill="#8B4513"/>
                                            <text x="50" y="95" text-anchor="middle" font-size="8" fill="#8B4513" font-weight="bold">SP</text>
                                        </svg>
                                    </div>
                                    <div style="flex: 1; text-align: center; padding: 0 20px;">
                                        <h1 style="margin: 0; font-size: 24px; font-weight: bold; text-transform: uppercase; color: #8B4513; letter-spacing: 2px; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">PODER JUDICI√ÅRIO</h1>
                                        <div style="width: 100%; height: 2px; background: linear-gradient(to right, transparent, #8B4513, transparent); margin: 10px 0;"></div>
                                        <h2 style="margin: 8px 0; font-size: 18px; font-weight: bold; color: #2C1810;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                                        <h3 style="margin: 8px 0; font-size: 16px; font-weight: bold; color: #2C1810;">COMARCA DE BRASIL√ÇNDIA</h3>
                                        <h4 style="margin: 8px 0; font-size: 14px; color: #555; font-style: italic;">1¬™ VARA CRIMINAL</h4>
                                    </div>
                                    <div style="width: 120px; height: 120px; border: 3px solid #8B4513; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: radial-gradient(circle, #fff 0%, #f0f0f0 100%);">
                                        <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #8B4513;">
                                            <rect x="20" y="25" width="60" height="40" fill="none" stroke="#8B4513" stroke-width="3"/>
                                            <rect x="25" y="30" width="50" height="30" fill="#f8f8f8"/>
                                            <line x1="30" y1="40" x2="70" y2="40" stroke="#8B4513" stroke-width="2"/>
                                            <line x1="30" y1="45" x2="70" y2="45" stroke="#8B4513" stroke-width="2"/>
                                            <line x1="30" y1="50" x2="70" y2="50" stroke="#8B4513" stroke-width="2"/>
                                            <text x="50" y="80" text-anchor="middle" font-size="8" fill="#8B4513" font-weight="bold">OFICIAL</text>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- T√≠tulo do Documento -->
                            <div style="text-align: center; margin-bottom: 40px; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(139, 69, 19, 0.3);">
                                <h2 style="font-size: 28px; font-weight: bold; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); letter-spacing: 1px;">MANDADO DE PRIS√ÉO PREVENTIVA</h2>
                                <div style="width: 80px; height: 3px; background: white; margin: 15px auto; border-radius: 2px;"></div>
                                <p style="margin: 0; font-size: 14px; opacity: 0.9;">Documento Oficial ‚Ä¢ Validade Nacional</p>
                            </div>

                            <!-- Informa√ß√µes do Processo -->
                            <div style="margin-bottom: 30px; background: #f9f9f9; border-left: 5px solid #8B4513; padding: 20px; border-radius: 5px;">
                                <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #ddd; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; font-weight: bold; width: 25%;">Processo n¬∫:</td>
                                        <td style="padding: 12px; border: 1px solid #ddd; cursor: pointer; background: white; transition: all 0.3s;" onclick="tornarEditavel(this)" title="Clique para editar" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">0001234-56.2025.8.26.0000</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #ddd; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; font-weight: bold;">Indiciado:</td>
                                        <td style="padding: 12px; border: 1px solid #ddd; cursor: pointer; background: white; transition: all 0.3s;" onclick="tornarEditavel(this)" title="Clique para editar" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">________________</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #ddd; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; font-weight: bold;">RG:</td>
                                        <td style="padding: 12px; border: 1px solid #ddd; cursor: pointer; background: white; transition: all 0.3s;" onclick="tornarEditavel(this)" title="Clique para editar" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">________________</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #ddd; background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%); color: white; font-weight: bold;">Crime:</td>
                                        <td style="padding: 12px; border: 1px solid #ddd; cursor: pointer; background: white; transition: all 0.3s;" onclick="tornarEditavel(this)" title="Clique para editar" onmouseover="this.style.background='#f0f8ff'" onmouseout="this.style.background='white'">Artigo ___</td>
                                    </tr>
                                </table>
                            </div>

                            <!-- Corpo do Mandado -->
                            <div style="margin-bottom: 40px; text-align: justify; line-height: 1.8; font-size: 14px; color: #333;">
                                <div style="background: linear-gradient(135deg, #fff 0%, #f8f8f8 100%); border: 1px solid #ddd; border-radius: 10px; padding: 25px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
                                    <p style="text-indent: 50px; margin-bottom: 20px; font-weight: 500;">
                                        Eu, <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #8B4513; font-weight: bold; border-bottom: 1px dashed #8B4513;" title="Clique para editar">Dr(a). Jos√© da Silva</span>, Juiz(a) de Direito da 1¬™ Vara Criminal da Comarca de Brasil√¢ndia, Estado de S√£o Paulo, no uso de minhas atribui√ß√µes legais,
                                    </p>
                                    
                                    <p style="text-indent: 50px; margin-bottom: 20px;">
                                        <strong style="color: #8B4513;">ORDENO</strong> aos Agentes de Pol√≠cia Civil e Militar que, recebendo este mandado, procedam √† <strong>PRIS√ÉO PREVENTIVA</strong> de <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #8B4513; font-weight: bold; border-bottom: 1px dashed #8B4513;" title="Clique para editar">________________</span>, recolhendo-o(a) ao estabelecimento penal adequado.
                                    </p>
                                    
                                    <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 5px;">
                                        <p style="margin: 0; font-weight: bold; color: #856404;">
                                            ‚ö†Ô∏è FUNDAMENTA√á√ÉO LEGAL: Arts. 311 a 316 do CPP
                                        </p>
                                    </div>
                                    
                                    <p style="text-indent: 50px; margin-bottom: 20px;">
                                        <strong style="color: #8B4513;">CUMPRA-SE</strong> com urg√™ncia, procedendo-se √†s buscas necess√°rias e comunicando-se a pris√£o imediatamente a este Ju√≠zo.
                                    </p>
                                </div>
                            </div>

                            <!-- Assinatura -->
                            <div style="margin-top: 50px; text-align: center;">
                                <div style="background: linear-gradient(135deg, #f8f8f8 0%, #e8e8e8 100%); border-radius: 10px; padding: 30px; border: 1px solid #ddd;">
                                    <p style="margin-bottom: 5px; font-size: 14px; color: #666;">Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #8B4513; font-weight: bold; border-bottom: 1px dashed #8B4513;" title="Clique para editar">___</span> de <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #8B4513; font-weight: bold; border-bottom: 1px dashed #8B4513;" title="Clique para editar">__________</span> de <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #8B4513; font-weight: bold; border-bottom: 1px dashed #8B4513;" title="Clique para editar">2025</span></p>
                                    <div style="margin: 40px 0;">
                                        <div style="width: 300px; height: 2px; background: #8B4513; margin: 0 auto;"></div>
                                    </div>
                                    <p style="font-weight: bold; font-size: 16px; color: #8B4513; margin: 5px 0;"><span onclick="tornarEditavel(this)" style="cursor: pointer; border-bottom: 1px dashed #8B4513;" title="Clique para editar">Dr(a). Jos√© da Silva</span></p>
                                    <p style="color: #666; font-size: 14px; margin: 0;">Juiz(a) de Direito</p>
                                    <p style="color: #666; font-size: 12px; margin: 5px 0 0 0; font-style: italic;">1¬™ Vara Criminal - Comarca de Brasil√¢ndia/SP</p>
                                </div>
                            </div>

                            <!-- Certid√£o de Cumprimento -->
                            <div style="margin-top: 40px; border-top: 2px dashed #8B4513; padding-top: 30px;">
                                <div style="background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%); border-radius: 10px; padding: 25px; border: 1px solid #4A90E2;">
                                    <h4 style="font-weight: bold; text-align: center; margin-bottom: 20px; color: #4A90E2; font-size: 16px;">üìã CERTID√ÉO DE CUMPRIMENTO</h4>
                                    <p style="line-height: 1.6; color: #333;">Certifico que em <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #4A90E2; font-weight: bold; border-bottom: 1px dashed #4A90E2;" title="Clique para editar">___/___/2025</span>, √†s <span onclick="tornarEditavel(this)" style="cursor: pointer; color: #4A90E2; font-weight: bold; border-bottom: 1px dashed #4A90E2;" title="Clique para editar">___:___</span> horas, foi cumprido o presente mandado com a pris√£o do indiciado.</p>
                                    <div style="margin-top: 40px; text-align: center;">
                                        <div style="width: 250px; height: 2px; background: #4A90E2; margin: 0 auto 10px;"></div>
                                        <p style="font-weight: bold; color: #4A90E2;">Agente de Pol√≠cia</p>
                                        <p style="font-size: 12px; color: #666;">Matr√≠cula: ________</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'boletim':
                    titulo.textContent = 'Boletim de Ocorr√™ncia';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #000; padding-bottom: 20px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <circle cx="50" cy="50" r="45" fill="none" stroke="#000" stroke-width="2"/>
                                        <circle cx="50" cy="30" r="8" fill="#000"/>
                                        <rect x="45" y="40" width="10" height="25" fill="#000"/>
                                        <polygon points="35,70 65,70 60,85 40,85" fill="#000"/>
                                        <text x="50" y="95" text-anchor="middle" font-size="6" fill="#000">SP</text>
                                    </svg>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">SECRETARIA DA SEGURAN√áA P√öBLICA</h1>
                                    <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">POL√çCIA CIVIL DO ESTADO DE S√ÉO PAULO</h2>
                                    <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">DELEGACIA DE POL√çCIA DE BRASIL√ÇNDIA</h3>
                                    <h4 style="margin: 5px 0; font-size: 14px;">1¬∫ DISTRITO POLICIAL</h4>
                                </div>
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <rect x="20" y="20" width="60" height="40" fill="none" stroke="#000" stroke-width="2"/>
                                        <rect x="25" y="25" width="50" height="30" fill="#f0f0f0"/>
                                        <line x1="30" y1="35" x2="70" y2="35" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="40" x2="70" y2="40" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="45" x2="70" y2="45" stroke="#000" stroke-width="1"/>
                                        <text x="50" y="75" text-anchor="middle" font-size="8" fill="#000">BRASIL√ÇNDIA</text>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="font-size: 20px; font-weight: bold; text-decoration: underline;">BOLETIM DE OCORR√äNCIA</h2>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">B.O. n¬∫:</td>
                                    <td style="padding: 5px; border: 1px solid #000; width: 25%;">_______________</td>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">Data:</td>
                                    <td style="padding: 5px; border: 1px solid #000; width: 25%;">___/___/2025</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Hora:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">___:___</td>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Delegacia:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">1¬∫ DP - Brasil√¢ndia</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">DADOS DO COMUNICANTE</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 20%;">Nome Completo:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" colspan="3" onclick="tornarEditavel(this)" title="Clique para editar">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">RG:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">_________________</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">CPF:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">_________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Data Nascimento:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___/___/____</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Telefone:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Endere√ßo:</td>
                                    <td style="padding: 8px; border: 1px solid #000;" colspan="3">_________________________________</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">NATUREZA DA OCORR√äNCIA</h4>
                            <div style="padding: 10px; border: 1px solid #000;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <label>‚òê Furto</label>
                                    <label>‚òê Roubo</label>
                                    <label>‚òê Les√£o Corporal</label>
                                    <label>‚òê Amea√ßa</label>
                                    <label>‚òê Dano</label>
                                    <label>‚òê Inj√∫ria/Difama√ß√£o</label>
                                    <label>‚òê Perturba√ß√£o do Sossego</label>
                                    <label>‚òê Viol√™ncia Dom√©stica</label>
                                </div>
                                <div style="margin-top: 10px;">
                                    <label>‚òê Outros: _________________________________</label>
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">LOCAL DOS FATOS</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 20%;">Endere√ßo:</td>
                                    <td style="padding: 8px; border: 1px solid #000;" colspan="3">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Data dos Fatos:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___/___/2025</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Hora:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___:___</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">HIST√ìRICO DOS FATOS</h4>
                            <div style="border: 1px solid #000; padding: 15px; min-height: 150px; line-height: 1.8;">
                                <p style="color: #666; font-style: italic;">Descreva detalhadamente os fatos ocorridos, incluindo circunst√¢ncias, pessoas envolvidas, objetos subtra√≠dos (se houver), valor dos danos, etc...</p>
                                <br><br><br><br><br>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">OBJETOS/VALORES ENVOLVIDOS</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 50%;">Descri√ß√£o:</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">Quantidade:</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">Valor (R$):</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; height: 30px;">_________________________________</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; height: 30px;">_________________________________</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">TOTAL:</td>
                                    <td style="padding: 8px; border: 1px solid #000;"></td>
                                    <td style="padding: 8px; border: 1px solid #000; font-weight: bold;">R$ _________</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-top: 40px;">
                            <p style="text-align: right; margin-bottom: 40px;">
                                Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer;" title="Clique para editar">${new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</span>.
                            </p>
                            
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 50px; margin-top: 50px;">
                                <div style="text-align: center;">
                                    <div style="border-top: 1px solid #000; padding-top: 10px;">
                                        <p style="margin: 0; font-weight: bold;">COMUNICANTE</p>
                                        <p style="margin: 0; font-size: 12px;">Assinatura</p>
                                    </div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="border-top: 1px solid #000; padding-top: 10px;">
                                        <p style="margin: 0; font-weight: bold;">DELEGADO(A) DE POL√çCIA</p>
                                        <p style="margin: 0; font-size: 12px;">Assinatura e Carimbo</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 2px solid #000; padding-top: 15px;">
                            <h4 style="font-weight: bold; text-align: center; margin-bottom: 15px;">OBSERVA√á√ïES POLICIAIS</h4>
                            <div style="border: 1px solid #000; padding: 15px; min-height: 80px;">
                                <p style="color: #666; font-style: italic;">Espa√ßo reservado para anota√ß√µes da autoridade policial...</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'intimacao':
                    titulo.textContent = 'Intima√ß√£o para Audi√™ncia';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #000; padding-bottom: 20px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <circle cx="50" cy="50" r="45" fill="none" stroke="#000" stroke-width="2"/>
                                        <circle cx="50" cy="30" r="8" fill="#000"/>
                                        <rect x="45" y="40" width="10" height="25" fill="#000"/>
                                        <polygon points="35,70 65,70 60,85 40,85" fill="#000"/>
                                        <text x="50" y="95" text-anchor="middle" font-size="6" fill="#000">SP</text>
                                    </svg>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">PODER JUDICI√ÅRIO</h1>
                                    <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                                    <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">COMARCA DE BRASIL√ÇNDIA</h3>
                                    <h4 style="margin: 5px 0; font-size: 14px;">1¬™ VARA CRIMINAL</h4>
                                </div>
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <rect x="20" y="20" width="60" height="40" fill="none" stroke="#000" stroke-width="2"/>
                                        <rect x="25" y="25" width="50" height="30" fill="#f0f0f0"/>
                                        <line x1="30" y1="35" x2="70" y2="35" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="40" x2="70" y2="40" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="45" x2="70" y2="45" stroke="#000" stroke-width="1"/>
                                        <text x="50" y="75" text-anchor="middle" font-size="8" fill="#000">BRASIL√ÇNDIA</text>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="font-size: 20px; font-weight: bold; text-decoration: underline;">INTIMA√á√ÉO</h2>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Processo n¬∫:</td>
                                    <td style="padding: 5px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">0001234-56.2025.8.26.0000</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Classe:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">A√ß√£o Penal - Procedimento Ordin√°rio</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Autor:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">Minist√©rio P√∫blico do Estado de S√£o Paulo</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">R√©u:</td>
                                    <td style="padding: 5px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">Jo√£o Silva Santos</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <p style="text-align: justify; line-height: 1.6;">
                                Pelo presente, fica Vossa Senhoria <strong>INTIMADO(A)</strong> para comparecer √†:
                            </p>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">Tipo de Audi√™ncia:</td>
                                    <td style="padding: 8px; border: 1px solid #000;" colspan="3">
                                        ‚òê Instru√ß√£o e Julgamento ‚òê Interrogat√≥rio ‚òê Oitiva de Testemunhas ‚òê Outras: _______
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Data:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___/___/2025</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Hor√°rio:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___:___ horas</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Local:</td>
                                    <td style="padding: 8px; border: 1px solid #000;" colspan="3">Sala de Audi√™ncias da 1¬™ Vara Criminal - F√≥rum de Brasil√¢ndia</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">FINALIDADE DA AUDI√äNCIA</h4>
                            <div style="padding: 10px; border: 1px solid #000;">
                                <div style="margin-bottom: 10px;">
                                    <label>‚òê Oitiva de testemunhas de acusa√ß√£o</label><br>
                                    <label>‚òê Oitiva de testemunhas de defesa</label><br>
                                    <label>‚òê Interrogat√≥rio do r√©u</label><br>
                                    <label>‚òê Alega√ß√µes finais orais</label><br>
                                    <label>‚òê Outras: _________________________________</label>
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #ffcccc; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">‚ö†Ô∏è ADVERT√äNCIAS IMPORTANTES</h4>
                            <div style="padding: 10px; border: 1px solid #000; line-height: 1.6;">
                                <p style="margin-bottom: 10px;"><strong>1.</strong> O n√£o comparecimento injustificado √† audi√™ncia poder√° acarretar:</p>
                                <ul style="margin-left: 20px; margin-bottom: 10px;">
                                    <li>Revoga√ß√£o de benef√≠cios concedidos (liberdade provis√≥ria, sursis, etc.)</li>
                                    <li>Decreta√ß√£o da pris√£o preventiva</li>
                                    <li>Condu√ß√£o coercitiva</li>
                                </ul>
                                <p style="margin-bottom: 10px;"><strong>2.</strong> √â obrigat√≥rio o comparecimento acompanhado de advogado constitu√≠do ou solicitar a nomea√ß√£o de defensor p√∫blico.</p>
                                <p><strong>3.</strong> Em caso de impossibilidade de comparecimento, comunicar este Ju√≠zo com anteced√™ncia m√≠nima de 48 horas.</p>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">OBSERVA√á√ïES GERAIS</h4>
                            <div style="padding: 10px; border: 1px solid #000; line-height: 1.6;">
                                <p>‚Ä¢ Comparecer com documento de identidade original</p>
                                <p>‚Ä¢ Chegar com 15 minutos de anteced√™ncia</p>
                                <p>‚Ä¢ N√£o √© permitido o uso de aparelhos celulares na sala de audi√™ncias</p>
                                <p>‚Ä¢ Outras observa√ß√µes: _________________________________</p>
                            </div>
                        </div>

                        <div style="margin-top: 40px;">
                            <p style="text-align: right; margin-bottom: 40px;">
                                Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer;" title="Clique para editar">${new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</span>.
                            </p>
                            
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; width: 300px; margin: 0 auto; padding-top: 10px;">
                                    <p style="margin: 0; font-weight: bold;">MARIA SANTOS OLIVEIRA</p>
                                    <p style="margin: 0;">Escriv√£ Judicial</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 2px solid #000; padding-top: 15px;">
                            <h4 style="font-weight: bold; text-align: center; margin-bottom: 15px;">COMPROVANTE DE RECEBIMENTO</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 20%;">Recebido em:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___/___/2025 √†s ___:___ horas</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Forma de entrega:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">‚òê Pessoalmente ‚òê Por terceiro ‚òê Correios ‚òê Oficial de Justi√ßa</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Assinatura:</td>
                                    <td style="padding: 8px; border: 1px solid #000; height: 40px;">_________________________________</td>
                                </tr>
                            </table>
                        </div>
                    `;
                    break;

                case 'habeas':
                    titulo.textContent = 'Habeas Corpus';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #000; padding-bottom: 20px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <circle cx="50" cy="50" r="45" fill="none" stroke="#000" stroke-width="2"/>
                                        <circle cx="50" cy="30" r="8" fill="#000"/>
                                        <rect x="45" y="40" width="10" height="25" fill="#000"/>
                                        <polygon points="35,70 65,70 60,85 40,85" fill="#000"/>
                                        <text x="50" y="95" text-anchor="middle" font-size="6" fill="#000">SP</text>
                                    </svg>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">PODER JUDICI√ÅRIO</h1>
                                    <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                                    <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">COMARCA DE BRASIL√ÇNDIA</h3>
                                    <h4 style="margin: 5px 0; font-size: 14px;">1¬™ VARA CRIMINAL</h4>
                                </div>
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <rect x="20" y="20" width="60" height="40" fill="none" stroke="#000" stroke-width="2"/>
                                        <rect x="25" y="25" width="50" height="30" fill="#f0f0f0"/>
                                        <line x1="30" y1="35" x2="70" y2="35" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="40" x2="70" y2="40" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="45" x2="70" y2="45" stroke="#000" stroke-width="1"/>
                                        <text x="50" y="75" text-anchor="middle" font-size="8" fill="#000">BRASIL√ÇNDIA</text>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="font-size: 20px; font-weight: bold; text-decoration: underline;">HABEAS CORPUS</h2>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">HC n¬∫:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">_______________-__.2025.8.26.0000</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Impetrante:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Paciente:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Coator:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <p style="text-align: justify; line-height: 1.6;">
                                Vem respeitosamente √† presen√ßa de Vossa Excel√™ncia, <strong>_________________________________</strong>, advogado(a) devidamente inscrito(a) na OAB/SP sob o n¬∫ <strong>_______</strong>, com escrit√≥rio profissional situado √† <strong>_________________________________</strong>, impetrar o presente <strong>HABEAS CORPUS</strong> em favor de <strong>_________________________________</strong>, pelos fatos e fundamentos jur√≠dicos a seguir expostos:
                            </p>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">I - DOS FATOS</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6; text-align: justify;">
                                <p style="margin-bottom: 15px;">
                                    O paciente <strong>_________________________________</strong> encontra-se preso desde <strong>___/___/2025</strong>, em decorr√™ncia de <strong>_________________________________</strong>.
                                </p>
                                <p style="margin-bottom: 15px;">
                                    A pris√£o foi decretada/mantida sob o fundamento de <strong>_________________________________</strong>, conforme decis√£o proferida nos autos do processo n¬∫ <strong>_________________________________</strong>.
                                </p>
                                <p>
                                    Ocorre que, conforme se demonstrar√°, a pris√£o √© manifestamente ilegal e constrange ilegalmente a liberdade de locomo√ß√£o do paciente.
                                </p>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">II - DO DIREITO</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6; text-align: justify;">
                                <p style="margin-bottom: 15px;">
                                    A pris√£o do paciente √© manifestamente <strong>ILEGAL</strong>, uma vez que:
                                </p>
                                <div style="margin-left: 20px; margin-bottom: 15px;">
                                    <p>‚òê N√£o est√£o presentes os requisitos do art. 312 do CPP</p>
                                    <p>‚òê Excesso de prazo na forma√ß√£o da culpa</p>
                                    <p>‚òê Falta de fundamenta√ß√£o adequada</p>
                                    <p>‚òê Constrangimento ilegal por: _________________________________</p>
                                </div>
                                <p style="margin-bottom: 15px;">
                                    Conforme jurisprud√™ncia pac√≠fica do STF e STJ, a pris√£o preventiva deve ser medida excepcional, somente cab√≠vel quando demonstrada a real necessidade e presentes os requisitos legais.
                                </p>
                                <p>
                                    No caso em tela, n√£o se verifica qualquer dos fundamentos autorizadores da pris√£o preventiva previstos no art. 312 do C√≥digo de Processo Penal.
                                </p>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">III - DOS PEDIDOS</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6; text-align: justify;">
                                <p style="margin-bottom: 15px;">
                                    Diante do exposto, requer-se a Vossa Excel√™ncia:
                                </p>
                                <div style="margin-left: 20px; margin-bottom: 15px;">
                                    <p style="margin-bottom: 10px;"><strong>a)</strong> A concess√£o da ordem de <strong>HABEAS CORPUS</strong> para determinar a imediata soltura do paciente;</p>
                                    <p style="margin-bottom: 10px;"><strong>b)</strong> Subsidiariamente, a substitui√ß√£o da pris√£o preventiva por medidas cautelares diversas previstas no art. 319 do CPP;</p>
                                    <p><strong>c)</strong> A condena√ß√£o do coator ao pagamento das custas processuais.</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">DOCUMENTOS ANEXOS</h4>
                            <div style="padding: 10px; border: 1px solid #000;">
                                <p>‚òê Procura√ß√£o</p>
                                <p>‚òê C√≥pia da decis√£o que decretou/manteve a pris√£o</p>
                                <p>‚òê Certid√£o de antecedentes criminais</p>
                                <p>‚òê Outros: _________________________________</p>
                            </div>
                        </div>

                        <div style="margin-top: 40px;">
                            <p style="text-align: center; margin-bottom: 20px;">
                                Nestes termos, pede deferimento.
                            </p>
                            <p style="text-align: right; margin-bottom: 40px;">
                                Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer;" title="Clique para editar">${new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</span>.
                            </p>
                            
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; width: 300px; margin: 0 auto; padding-top: 10px;">
                                    <p style="margin: 0; font-weight: bold;">_________________________________</p>
                                    <p style="margin: 0;">Advogado(a) - OAB/SP n¬∫ _______</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 2px solid #000; padding-top: 15px;">
                            <h4 style="font-weight: bold; text-align: center; margin-bottom: 15px;">DADOS DO ADVOGADO</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 20%;">Nome:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">OAB/SP:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Endere√ßo:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Telefone:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                            </table>
                        </div>
                    `;
                    break;

                case 'certidao':
                    titulo.textContent = 'Certid√£o de Antecedentes Criminais';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #000; padding-bottom: 20px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <circle cx="50" cy="50" r="45" fill="none" stroke="#000" stroke-width="2"/>
                                        <circle cx="50" cy="30" r="8" fill="#000"/>
                                        <rect x="45" y="40" width="10" height="25" fill="#000"/>
                                        <polygon points="35,70 65,70 60,85 40,85" fill="#000"/>
                                        <text x="50" y="95" text-anchor="middle" font-size="6" fill="#000">SP</text>
                                    </svg>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">PODER JUDICI√ÅRIO</h1>
                                    <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                                    <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">COMARCA DE BRASIL√ÇNDIA</h3>
                                    <h4 style="margin: 5px 0; font-size: 14px;">CART√ìRIO DISTRIBUIDOR</h4>
                                </div>
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <rect x="20" y="20" width="60" height="40" fill="none" stroke="#000" stroke-width="2"/>
                                        <rect x="25" y="25" width="50" height="30" fill="#f0f0f0"/>
                                        <line x1="30" y1="35" x2="70" y2="35" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="40" x2="70" y2="40" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="45" x2="70" y2="45" stroke="#000" stroke-width="1"/>
                                        <text x="50" y="75" text-anchor="middle" font-size="8" fill="#000">BRASIL√ÇNDIA</text>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="font-size: 20px; font-weight: bold; text-decoration: underline;">CERTID√ÉO DE ANTECEDENTES CRIMINAIS</h2>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">Certid√£o n¬∫:</td>
                                    <td style="padding: 5px; border: 1px solid #000; width: 25%;">_______________</td>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 25%;">Data de Emiss√£o:</td>
                                    <td style="padding: 5px; border: 1px solid #000; width: 25%;">___/___/2025</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Validade:</td>
                                    <td style="padding: 5px; border: 1px solid #000;" colspan="3">90 (noventa) dias</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">DADOS DO REQUERENTE</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold; width: 20%;">Nome Completo:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" colspan="3" onclick="tornarEditavel(this)" title="Clique para editar">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">RG:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">_________________</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">CPF:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">_________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Data de Nascimento:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">___/___/____</td>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Naturalidade:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Filia√ß√£o:</td>
                                    <td style="padding: 8px; border: 1px solid #000;" colspan="3">_________________________________</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <p style="text-align: justify; line-height: 1.6; margin-bottom: 15px;">
                                <strong>CERTIFICO</strong> que, consultando os registros criminais desta Comarca, no per√≠odo de <strong>___/___/____</strong> a <strong>___/___/____</strong>, verifico que:
                            </p>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <div style="border: 2px solid #000; padding: 20px; background-color: #f9f9f9;">
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <label style="font-size: 18px; font-weight: bold;">
                                        <input type="checkbox" style="margin-right: 10px; transform: scale(1.5);">
                                        NADA CONSTA em desfavor do requerente
                                    </label>
                                </div>
                                
                                <div style="text-align: center; margin-bottom: 20px;">
                                    <label style="font-size: 18px; font-weight: bold;">
                                        <input type="checkbox" style="margin-right: 10px; transform: scale(1.5);">
                                        CONSTAM os seguintes registros:
                                    </label>
                                </div>

                                <div style="margin-top: 20px;">
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #000; background-color: #e0e0e0; font-weight: bold;">Processo n¬∫:</td>
                                            <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #000; background-color: #e0e0e0; font-weight: bold;">Crime/Contraven√ß√£o:</td>
                                            <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #000; background-color: #e0e0e0; font-weight: bold;">Data do Fato:</td>
                                            <td style="padding: 8px; border: 1px solid #000;">___/___/____</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #000; background-color: #e0e0e0; font-weight: bold;">Situa√ß√£o Atual:</td>
                                            <td style="padding: 8px; border: 1px solid #000;">
                                                ‚òê Em andamento ‚òê Condenado ‚òê Absolvido ‚òê Arquivado
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #000; background-color: #e0e0e0; font-weight: bold;">Observa√ß√µes:</td>
                                            <td style="padding: 8px; border: 1px solid #000; height: 40px;">_________________________________</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #ffffcc; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">‚ö†Ô∏è OBSERVA√á√ïES IMPORTANTES</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6;">
                                <p style="margin-bottom: 10px;">
                                    <strong>1.</strong> Esta certid√£o refere-se <strong>EXCLUSIVAMENTE</strong> aos registros criminais da Comarca de Brasil√¢ndia.
                                </p>
                                <p style="margin-bottom: 10px;">
                                    <strong>2.</strong> Para certid√£o completa, consultar tamb√©m outros √≥rg√£os (Pol√≠cia Civil, Pol√≠cia Federal, etc.).
                                </p>
                                <p style="margin-bottom: 10px;">
                                    <strong>3.</strong> Validade: <strong>90 (noventa) dias</strong> a contar da data de emiss√£o.
                                </p>
                                <p>
                                    <strong>4.</strong> Esta certid√£o foi emitida com base nos dados dispon√≠veis at√© a presente data.
                                </p>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">FINALIDADE</h4>
                            <div style="padding: 10px; border: 1px solid #000;">
                                <p>‚òê Concurso P√∫blico</p>
                                <p>‚òê Emprego</p>
                                <p>‚òê Processo Judicial</p>
                                <p>‚òê Outros: _________________________________</p>
                            </div>
                        </div>

                        <div style="margin-top: 40px;">
                            <p style="text-align: right; margin-bottom: 40px;">
                                Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer;" title="Clique para editar">${new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</span>.
                            </p>
                            
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; width: 350px; margin: 0 auto; padding-top: 10px;">
                                    <p style="margin: 0; font-weight: bold;">CARLOS EDUARDO SILVA</p>
                                    <p style="margin: 0;">Escriv√£o Judicial</p>
                                    <p style="margin: 0; font-size: 12px;">Tribunal de Justi√ßa do Estado de S√£o Paulo</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 2px solid #000; padding-top: 15px;">
                            <h4 style="font-weight: bold; text-align: center; margin-bottom: 15px;">AUTENTICA√á√ÉO</h4>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                                <div style="text-align: center;">
                                    <div style="border: 1px solid #000; padding: 20px; height: 80px;">
                                        <p style="margin: 0; font-size: 12px; color: #666;">Espa√ßo para carimbo oficial</p>
                                    </div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="border: 1px solid #000; padding: 20px; height: 80px;">
                                        <p style="margin: 0; font-size: 12px; color: #666;">Espa√ßo para selo de autenticidade</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    break;

                case 'sentenca':
                    titulo.textContent = 'Modelo de Senten√ßa';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #000; padding-bottom: 20px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <circle cx="50" cy="50" r="45" fill="none" stroke="#000" stroke-width="2"/>
                                        <circle cx="50" cy="30" r="8" fill="#000"/>
                                        <rect x="45" y="40" width="10" height="25" fill="#000"/>
                                        <polygon points="35,70 65,70 60,85 40,85" fill="#000"/>
                                        <text x="50" y="95" text-anchor="middle" font-size="6" fill="#000">SP</text>
                                    </svg>
                                </div>
                                <div style="flex: 1; text-align: center;">
                                    <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">PODER JUDICI√ÅRIO</h1>
                                    <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                                    <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">COMARCA DE BRASIL√ÇNDIA</h3>
                                    <h4 style="margin: 5px 0; font-size: 14px;">1¬™ VARA CRIMINAL</h4>
                                </div>
                                <div style="width: 100px;">
                                    <svg width="80" height="80" viewBox="0 0 100 100" style="fill: #000;">
                                        <rect x="20" y="20" width="60" height="40" fill="none" stroke="#000" stroke-width="2"/>
                                        <rect x="25" y="25" width="50" height="30" fill="#f0f0f0"/>
                                        <line x1="30" y1="35" x2="70" y2="35" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="40" x2="70" y2="40" stroke="#000" stroke-width="1"/>
                                        <line x1="30" y1="45" x2="70" y2="45" stroke="#000" stroke-width="1"/>
                                        <text x="50" y="75" text-anchor="middle" font-size="8" fill="#000">BRASIL√ÇNDIA</text>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="font-size: 20px; font-weight: bold; text-decoration: underline;">SENTEN√áA</h2>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Processo n¬∫:</td>
                                    <td style="padding: 5px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">0001234-56.2025.8.26.0000</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Classe:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">A√ß√£o Penal - Procedimento Ordin√°rio</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Autor:</td>
                                    <td style="padding: 5px; border: 1px solid #000;">Minist√©rio P√∫blico do Estado de S√£o Paulo</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">R√©u:</td>
                                    <td style="padding: 5px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">Jo√£o Silva Santos</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <p style="text-align: justify; line-height: 1.6;">
                                <strong>Vistos.</strong> O <strong>MINIST√âRIO P√öBLICO DO ESTADO DE S√ÉO PAULO</strong> ofereceu den√∫ncia contra <strong>_________________________________</strong>, qualificado nos autos, imputando-lhe a pr√°tica do crime previsto no art. <strong>_______</strong> do C√≥digo Penal.
                            </p>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">I - RELAT√ìRIO</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6; text-align: justify;">
                                <p style="margin-bottom: 15px;">
                                    Segundo a den√∫ncia, no dia <strong>___/___/2025</strong>, por volta das <strong>___h___</strong>, na <strong>_________________________________</strong>, o denunciado <strong>_________________________________</strong>.
                                </p>
                                <p style="margin-bottom: 15px;">
                                    A den√∫ncia foi recebida em <strong>___/___/2025</strong>. O r√©u foi citado e apresentou resposta √† acusa√ß√£o atrav√©s de seu defensor.
                                </p>
                                <p style="margin-bottom: 15px;">
                                    Durante a instru√ß√£o processual foram ouvidas <strong>___</strong> testemunhas de acusa√ß√£o e <strong>___</strong> testemunhas de defesa. O r√©u foi interrogado ao final.
                                </p>
                                <p>
                                    O Minist√©rio P√∫blico e a Defesa apresentaram suas alega√ß√µes finais, pugnando respectivamente pela condena√ß√£o e absolvi√ß√£o do acusado.
                                </p>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">II - FUNDAMENTA√á√ÉO</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6; text-align: justify;">
                                <h5 style="font-weight: bold; margin-bottom: 10px;">A) DA MATERIALIDADE</h5>
                                <p style="margin-bottom: 15px;">
                                    A materialidade delitiva restou devidamente comprovada atrav√©s de <strong>_________________________________</strong>.
                                </p>
                                
                                <h5 style="font-weight: bold; margin-bottom: 10px;">B) DA AUTORIA</h5>
                                <p style="margin-bottom: 15px;">
                                    A autoria tamb√©m est√° cabalmente demonstrada por <strong>_________________________________</strong>.
                                </p>
                                
                                <h5 style="font-weight: bold; margin-bottom: 10px;">C) DO M√âRITO</h5>
                                <div style="margin-left: 20px;">
                                    <p>‚òê <strong>PELA CONDENA√á√ÉO:</strong> Est√£o presentes todos os elementos do tipo penal</p>
                                    <p>‚òê <strong>PELA ABSOLVI√á√ÉO:</strong> N√£o restou comprovada a autoria/materialidade</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">III - DISPOSITIVO</h4>
                            <div style="padding: 15px; border: 1px solid #000; line-height: 1.6; text-align: justify;">
                                <p style="margin-bottom: 15px;">
                                    Ante o exposto, <strong>JULGO</strong>:
                                </p>
                                
                                <div style="margin-bottom: 20px; border: 2px solid #000; padding: 15px; background-color: #f9f9f9;">
                                    <div style="margin-bottom: 15px;">
                                        <label style="font-weight: bold; font-size: 16px;">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.3);">
                                            PROCEDENTE a pretens√£o punitiva para CONDENAR
                                        </label>
                                    </div>
                                    
                                    <div style="margin-left: 30px; margin-bottom: 15px;">
                                        <p>o r√©u <strong>_________________________________</strong> como incurso no art. <strong>_______</strong> do C√≥digo Penal, aplicando-lhe:</p>
                                        <ul style="margin-left: 20px; margin-top: 10px;">
                                            <li><strong>Pena privativa de liberdade:</strong> _______ anos e _______ meses</li>
                                            <li><strong>Pena de multa:</strong> R$ _______</li>
                                            <li><strong>Regime inicial:</strong> ‚òê Fechado ‚òê Semi-aberto ‚òê Aberto</li>
                                        </ul>
                                    </div>
                                    
                                    <div style="margin-bottom: 15px;">
                                        <label style="font-weight: bold; font-size: 16px;">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.3);">
                                            IMPROCEDENTE a pretens√£o punitiva para ABSOLVER
                                        </label>
                                    </div>
                                    
                                    <div style="margin-left: 30px;">
                                        <p>o r√©u com fundamento no art. 386, inciso _______ do CPP:</p>
                                        <ul style="margin-left: 20px; margin-top: 10px;">
                                            <li>‚òê I - estar provada a inexist√™ncia do fato</li>
                                            <li>‚òê III - n√£o haver prova da exist√™ncia do fato</li>
                                            <li>‚òê V - n√£o existir prova de ter o r√©u concorrido para a infra√ß√£o penal</li>
                                            <li>‚òê VII - n√£o existir prova suficiente para a condena√ß√£o</li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin-bottom: 15px;">
                                    <h5 style="font-weight: bold; margin-bottom: 10px;">OUTRAS DETERMINA√á√ïES:</h5>
                                    <p>‚òê Custas pelo r√©u</p>
                                    <p>‚òê Custas ex lege</p>
                                    <p>‚òê Indeniza√ß√£o √† v√≠tima: R$ _______</p>
                                    <p>‚òê Outras: _________________________________</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <h4 style="font-weight: bold; background-color: #f0f0f0; padding: 8px; border: 1px solid #000; margin-bottom: 10px;">RECURSOS</h4>
                            <div style="padding: 10px; border: 1px solid #000; line-height: 1.6;">
                                <p>Prazo para recurso: <strong>15 (quinze) dias</strong> a contar da intima√ß√£o desta senten√ßa.</p>
                            </div>
                        </div>

                        <div style="margin-top: 40px;">
                            <p style="text-align: center; margin-bottom: 20px;">
                                Publique-se. Registre-se. Intimem-se.
                            </p>
                            <p style="text-align: right; margin-bottom: 40px;">
                                Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer;" title="Clique para editar">${new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' })}</span>.
                            </p>
                            
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; width: 300px; margin: 0 auto; padding-top: 10px;">
                                    ${assinaturaUpload ? `<img src="${assinaturaUpload}" style="max-width: 200px; max-height: 80px; margin-bottom: 10px;" alt="Assinatura">` : ''}
                                    <p style="margin: 0; font-weight: bold; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">JO√ÉO SILVA SANTOS</p>
                                    <p style="margin: 0;">Juiz de Direito</p>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 30px; border-top: 2px solid #000; padding-top: 15px;">
                            <h4 style="font-weight: bold; text-align: center; margin-bottom: 15px;">C√ÅLCULO DA PENA (se condenat√≥ria)</h4>
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Pena-base:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_______ anos e _______ meses</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Agravantes/Atenuantes:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Causas de aumento/diminui√ß√£o:</td>
                                    <td style="padding: 8px; border: 1px solid #000;">_________________________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f0f0f0; font-weight: bold;">Pena definitiva:</td>
                                    <td style="padding: 8px; border: 1px solid #000; font-weight: bold;">_______ anos e _______ meses</td>
                                </tr>
                            </table>
                        </div>
                    `;
                    break;
                    
                case 'alvara':
                    titulo.textContent = 'Alvar√° Judicial';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 3px solid #000; padding-bottom: 20px;">
                            <div style="display: flex; align-items: center; justify-content: center; margin-bottom: 20px;">
                                <div style="text-align: center;">
                                    <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">PODER JUDICI√ÅRIO</h1>
                                    <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                                    <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">COMARCA DE BRASIL√ÇNDIA</h3>
                                    <h4 style="margin: 5px 0; font-size: 14px;">1¬™ VARA CRIMINAL</h4>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-bottom: 30px;">
                            <h2 style="font-size: 20px; font-weight: bold; text-decoration: underline;">ALVAR√Å JUDICIAL</h2>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f5f5f5; font-weight: bold; width: 30%;">Processo n¬∫:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">0001234-56.2025.8.26.0000</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f5f5f5; font-weight: bold;">Requerente:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">________________</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px; border: 1px solid #000; background-color: #f5f5f5; font-weight: bold;">Tipo de Alvar√°:</td>
                                    <td style="padding: 8px; border: 1px solid #000; cursor: pointer;" onclick="tornarEditavel(this)" title="Clique para editar">Alvar√° de Soltura</td>
                                </tr>
                            </table>
                        </div>

                        <div style="margin-bottom: 30px; text-align: justify; line-height: 1.6;">
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                O(A) MM. Juiz(a) de Direito da <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">1¬™ Vara Criminal</span> da Comarca de <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">Brasil√¢ndia</span>, Estado de S√£o Paulo, no uso de suas atribui√ß√µes legais,
                            </p>
                            
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                <strong>CONSIDERANDO</strong> que nos autos do processo em ep√≠grafe, foi deferido o pedido de <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span>;
                            </p>
                            
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                <strong>CONSIDERANDO</strong> o cumprimento dos requisitos legais estabelecidos;
                            </p>
                            
                            <p style="text-align: center; font-weight: bold; margin: 30px 0;">
                                EXPEDE O PRESENTE ALVAR√Å
                            </p>
                            
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                Para que <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span> possa <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span>, conforme decis√£o proferida nos autos.
                            </p>
                        </div>

                        <div style="margin-top: 50px; text-align: center;">
                            <p>Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">___</span> de <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">__________</span> de <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">2025</span>.</p>
                            <div style="margin-top: 60px;">
                                <p>_________________________________________________</p>
                                <p style="font-weight: bold;"><span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">Dr(a). _________________</span></p>
                                <p>Juiz(a) de Direito</p>
                            </div>
                        </div>
                    `;
                    break;
                    
                case 'oficio':
                    titulo.textContent = 'Of√≠cio';
                    conteudo.innerHTML = `
                        <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 20px;">
                            <h1 style="margin: 0; font-size: 18px; font-weight: bold; text-transform: uppercase;">PODER JUDICI√ÅRIO</h1>
                            <h2 style="margin: 5px 0; font-size: 16px; font-weight: bold;">TRIBUNAL DE JUSTI√áA DO ESTADO DE S√ÉO PAULO</h2>
                            <h3 style="margin: 5px 0; font-size: 14px; font-weight: bold;">COMARCA DE BRASIL√ÇNDIA</h3>
                            <h4 style="margin: 5px 0; font-size: 14px;">1¬™ VARA CRIMINAL</h4>
                        </div>
                        
                        <div style="margin-bottom: 30px;">
                            <div style="text-align: right; margin-bottom: 20px;">
                                <p><strong>OF√çCIO N¬∫ <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">001/2025</span></strong></p>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <p><strong>Para:</strong> <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span></p>
                                <p><strong>De:</strong> <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">1¬™ Vara Criminal da Comarca de Brasil√¢ndia</span></p>
                                <p><strong>Assunto:</strong> <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span></p>
                                <p><strong>Processo:</strong> <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">0001234-56.2025.8.26.0000</span></p>
                            </div>
                        </div>

                        <div style="margin-bottom: 30px; text-align: justify; line-height: 1.6;">
                            <p style="margin-bottom: 20px;">Senhor(a) <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span>,</p>
                            
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                Tenho a honra de dirigir-me a Vossa Senhoria para <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">________________</span>, conforme determina√ß√£o judicial proferida nos autos do processo em ep√≠grafe.
                            </p>
                            
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">Solicito a V.Sa. as provid√™ncias necess√°rias para o cumprimento da determina√ß√£o judicial, no prazo de _____ dias.</span>
                            </p>
                            
                            <p style="text-indent: 50px; margin-bottom: 15px;">
                                Para tanto, anexo c√≥pia da decis√£o judicial para conhecimento e cumprimento.
                            </p>
                            
                            <p style="margin-bottom: 20px;">
                                Aproveito a oportunidade para renovar protestos de elevada estima e considera√ß√£o.
                            </p>
                        </div>

                        <div style="margin-top: 50px; text-align: center;">
                            <p>Brasil√¢ndia, <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">___</span> de <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">__________</span> de <span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">2025</span>.</p>
                            <div style="margin-top: 60px;">
                                <p>_________________________________________________</p>
                                <p style="font-weight: bold;"><span onclick="tornarEditavel(this)" style="cursor: pointer; text-decoration: underline;" title="Clique para editar">Dr(a). _________________</span></p>
                                <p>Juiz(a) de Direito</p>
                                <p style="font-size: 12px;">1¬™ Vara Criminal da Comarca de Brasil√¢ndia</p>
                            </div>
                        </div>
                    `;
                    break;
                
                default:
                    titulo.textContent = 'Documento';
                    conteudo.innerHTML = '<p>Selecione um tipo de documento para gerar.</p>';
            }
            } catch (error) {
                console.error('Erro ao gerar documento:', error);
                alert('‚ùå Erro ao gerar documento. Tente novamente.');
            }
        }

        function imprimirDocumento() {
            const conteudo = document.getElementById('conteudo-documento').innerHTML;
            const janela = window.open('', '_blank');
            janela.document.write(`
                <html>
                <head>
                    <title>Documento - Tribunal de Justi√ßa</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .text-center { text-align: center; }
                        .text-right { text-align: right; }
                        .text-justify { text-align: justify; }
                        .font-bold { font-weight: bold; }
                        .grid { display: grid; }
                        .grid-cols-2 { grid-template-columns: 1fr 1fr; }
                        .gap-4 { gap: 1rem; }
                        .mb-4 { margin-bottom: 1rem; }
                        .mt-8 { margin-top: 2rem; }
                        .border { border: 1px solid #ccc; }
                        .p-2 { padding: 0.5rem; }
                        .min-h-24 { min-height: 6rem; }
                    </style>
                </head>
                <body>${conteudo}</body>
                </html>
            `);
            janela.document.close();
            janela.print();
        }

        // Sistema de Audi√™ncias
        function iniciarCronometro() {
            if (!cronometroAtivo) {
                tempoInicio = Date.now() - tempoPausado;
                cronometroAtivo = true;
                cronometroInterval = setInterval(atualizarCronometro, 1000);
            }
        }

        function pausarCronometro() {
            if (cronometroAtivo) {
                clearInterval(cronometroInterval);
                cronometroAtivo = false;
            }
        }

        function pararCronometro() {
            clearInterval(cronometroInterval);
            cronometroAtivo = false;
            tempoPausado = 0;
            document.getElementById('cronometro').textContent = '00:00:00';
        }

        function atualizarCronometro() {
            const agora = Date.now();
            const tempoDecorrido = agora - tempoInicio;
            tempoPausado = tempoDecorrido;
            
            const horas = Math.floor(tempoDecorrido / 3600000);
            const minutos = Math.floor((tempoDecorrido % 3600000) / 60000);
            const segundos = Math.floor((tempoDecorrido % 60000) / 1000);
            
            document.getElementById('cronometro').textContent = 
                `${horas.toString().padStart(2, '0')}:${minutos.toString().padStart(2, '0')}:${segundos.toString().padStart(2, '0')}`;
        }

        function adicionarAudiencia() {
            const processo = prompt('N√∫mero do processo:');
            const parte = prompt('Nome da parte:');
            const data = prompt('Data (DD/MM/AAAA):');
            const hora = prompt('Hora (HH:MM):');
            
            if (processo && parte && data && hora) {
                alert(`‚úÖ Audi√™ncia agendada!\nProcesso: ${processo}\nParte: ${parte}\nData: ${data} √†s ${hora}`);
            }
        }

        function salvarAta() {
            const ata = document.getElementById('ata-audiencia').value;
            if (ata.trim()) {
                alert('‚úÖ Ata salva com sucesso!');
            } else {
                alert('‚ö†Ô∏è Digite o conte√∫do da ata antes de salvar.');
            }
        }

        function gerarAtaCompleta() {
            const ata = document.getElementById('ata-audiencia').value;
            if (ata.trim()) {
                const janela = window.open('', '_blank');
                janela.document.write(`
                    <html>
                    <head><title>Ata de Audi√™ncia</title></head>
                    <body style="font-family: Arial, sans-serif; margin: 20px;">
                        <h2 style="text-align: center;">ATA DE AUDI√äNCIA</h2>
                        <p><strong>Data:</strong> ${new Date().toLocaleDateString('pt-BR')}</p>
                        <p><strong>Hora:</strong> ${new Date().toLocaleTimeString('pt-BR')}</p>
                        <hr>
                        <p style="text-align: justify;">${ata.replace(/\n/g, '<br>')}</p>
                        <br><br>
                        <div style="text-align: center;">
                            <p>_________________________________</p>
                            <p>Juiz(a) de Direito</p>
                        </div>
                    </body>
                    </html>
                `);
                janela.document.close();
                janela.print();
            } else {
                alert('‚ö†Ô∏è Digite o conte√∫do da ata antes de gerar.');
            }
        }

        // Ferramentas para Advogados
        function abrirPeticoes() {
            document.getElementById('area-advogado').classList.remove('hidden');
            document.getElementById('titulo-advogado').textContent = 'Gerador de Peti√ß√µes';
            document.getElementById('conteudo-advogado').innerHTML = `
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-white font-bold mb-3">Tipo de Peti√ß√£o</h4>
                        <select class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white">
                            <option>Peti√ß√£o Inicial</option>
                            <option>Contesta√ß√£o</option>
                            <option>Recurso de Apela√ß√£o</option>
                            <option>Habeas Corpus</option>
                            <option>Embargos de Declara√ß√£o</option>
                        </select>
                    </div>
                    <div>
                        <h4 class="text-white font-bold mb-3">Cliente</h4>
                        <input type="text" placeholder="Nome do cliente..." class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                    </div>
                </div>
                <div class="mt-6">
                    <h4 class="text-white font-bold mb-3">Conte√∫do da Peti√ß√£o</h4>
                    <textarea class="w-full h-32 p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400 resize-none" placeholder="Digite o conte√∫do da peti√ß√£o..."></textarea>
                </div>
                <button onclick="gerarPeticaoCompleta()" class="mt-4 bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-all">
                    üìÑ Gerar Peti√ß√£o
                </button>
            `;
        }

        function abrirHonorarios() {
            document.getElementById('area-advogado').classList.remove('hidden');
            document.getElementById('titulo-advogado').textContent = 'Calculadora de Honor√°rios';
            document.getElementById('conteudo-advogado').innerHTML = `
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-white font-medium mb-2">Tipo de Processo</label>
                            <select class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white">
                                <option>Criminal</option>
                                <option>C√≠vel</option>
                                <option>Trabalhista</option>
                                <option>Fam√≠lia</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-white font-medium mb-2">Valor da Causa (R$)</label>
                            <input type="number" placeholder="0,00" class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                        </div>
                        <div>
                            <label class="block text-white font-medium mb-2">Complexidade</label>
                            <select class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white">
                                <option>Baixa (10%)</option>
                                <option>M√©dia (15%)</option>
                                <option>Alta (20%)</option>
                            </select>
                        </div>
                    </div>
                    <div class="bg-green-500/20 rounded-lg p-6 border border-green-500/30">
                        <h4 class="text-green-300 font-bold mb-4">üí∞ C√°lculo de Honor√°rios</h4>
                        <div class="space-y-2 text-white">
                            <p>Valor da Causa: <span class="font-bold">R$ 0,00</span></p>
                            <p>Percentual: <span class="font-bold">0%</span></p>
                            <p>Taxa de Sucesso: <span class="font-bold">R$ 0,00</span></p>
                            <hr class="border-green-500/30">
                            <p class="text-lg">Total: <span class="font-bold text-green-300">R$ 0,00</span></p>
                        </div>
                    </div>
                </div>
                <button class="mt-4 bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-all">
                    üí∞ Calcular Honor√°rios
                </button>
            `;
        }

        function abrirAgenda() {
            document.getElementById('area-advogado').classList.remove('hidden');
            document.getElementById('titulo-advogado').textContent = 'Agenda de Clientes';
            document.getElementById('conteudo-advogado').innerHTML = `
                <div class="grid lg:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-white font-bold mb-3">Pr√≥ximos Compromissos</h4>
                        <div class="space-y-3 max-h-64 overflow-y-auto">
                            <div class="bg-blue-500/20 rounded-lg p-3 border border-blue-500/30">
                                <p class="text-blue-300 font-medium">Jo√£o Silva</p>
                                <p class="text-white text-sm">Audi√™ncia - Hoje 14:00</p>
                                <p class="text-white/70 text-xs">Processo 001/2025</p>
                            </div>
                            <div class="bg-green-500/20 rounded-lg p-3 border border-green-500/30">
                                <p class="text-green-300 font-medium">Maria Santos</p>
                                <p class="text-white text-sm">Reuni√£o - Amanh√£ 10:00</p>
                                <p class="text-white/70 text-xs">Consulta inicial</p>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-white font-bold mb-3">Adicionar Compromisso</h4>
                        <div class="space-y-3">
                            <input type="text" placeholder="Nome do cliente..." class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                            <input type="datetime-local" class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white">
                            <textarea placeholder="Observa√ß√µes..." class="w-full h-20 p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400 resize-none"></textarea>
                            <button class="w-full bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-2 px-4 rounded-lg transition-all">
                                ‚ûï Adicionar
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function abrirProcuracoes() {
            document.getElementById('area-advogado').classList.remove('hidden');
            document.getElementById('titulo-advogado').textContent = 'Modelos de Procura√ß√£o';
            document.getElementById('conteudo-advogado').innerHTML = `
                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-blue-500/20 rounded-lg p-4 border border-blue-500/30 cursor-pointer hover:bg-blue-500/30 transition-all">
                        <h5 class="text-blue-300 font-bold mb-2">üìã Procura√ß√£o Geral</h5>
                        <p class="text-white text-sm">Poderes amplos para representa√ß√£o</p>
                    </div>
                    <div class="bg-green-500/20 rounded-lg p-4 border border-green-500/30 cursor-pointer hover:bg-green-500/30 transition-all">
                        <h5 class="text-green-300 font-bold mb-2">‚öñÔ∏è Procura√ß√£o Judicial</h5>
                        <p class="text-white text-sm">Espec√≠fica para processos judiciais</p>
                    </div>
                    <div class="bg-purple-500/20 rounded-lg p-4 border border-purple-500/30 cursor-pointer hover:bg-purple-500/30 transition-all">
                        <h5 class="text-purple-300 font-bold mb-2">üìÑ Procura√ß√£o Espec√≠fica</h5>
                        <p class="text-white text-sm">Para atos determinados</p>
                    </div>
                </div>
                <div class="mt-6 bg-white/10 rounded-lg p-4 border border-white/20">
                    <h4 class="text-white font-bold mb-3">Dados para Procura√ß√£o</h4>
                    <div class="grid md:grid-cols-2 gap-4">
                        <input type="text" placeholder="Nome do outorgante..." class="p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                        <input type="text" placeholder="CPF do outorgante..." class="p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                        <input type="text" placeholder="Nome do advogado..." class="p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                        <input type="text" placeholder="OAB do advogado..." class="p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                    </div>
                    <button onclick="gerarProcuracaoCompleta()" class="mt-4 bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-all">
                        üìÑ Gerar Procura√ß√£o
                    </button>
                </div>
            `;
        }

        function abrirContratos() {
            document.getElementById('area-advogado').classList.remove('hidden');
            document.getElementById('titulo-advogado').textContent = 'Modelos de Contratos';
            document.getElementById('conteudo-advogado').innerHTML = `
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="bg-blue-500/20 rounded-lg p-4 border border-blue-500/30 cursor-pointer hover:bg-blue-500/30 transition-all">
                        <h5 class="text-blue-300 font-bold mb-2">üìã Contrato de Honor√°rios</h5>
                        <p class="text-white text-sm">Acordo de presta√ß√£o de servi√ßos</p>
                    </div>
                    <div class="bg-green-500/20 rounded-lg p-4 border border-green-500/30 cursor-pointer hover:bg-green-500/30 transition-all">
                        <h5 class="text-green-300 font-bold mb-2">üè† Contrato de Loca√ß√£o</h5>
                        <p class="text-white text-sm">Loca√ß√£o de im√≥veis</p>
                    </div>
                    <div class="bg-purple-500/20 rounded-lg p-4 border border-purple-500/30 cursor-pointer hover:bg-purple-500/30 transition-all">
                        <h5 class="text-purple-300 font-bold mb-2">üíº Contrato de Trabalho</h5>
                        <p class="text-white text-sm">Rela√ß√µes trabalhistas</p>
                    </div>
                    <div class="bg-yellow-500/20 rounded-lg p-4 border border-yellow-500/30 cursor-pointer hover:bg-yellow-500/30 transition-all">
                        <h5 class="text-yellow-300 font-bold mb-2">üöó Compra e Venda</h5>
                        <p class="text-white text-sm">Ve√≠culos e bens m√≥veis</p>
                    </div>
                    <div class="bg-red-500/20 rounded-lg p-4 border border-red-500/30 cursor-pointer hover:bg-red-500/30 transition-all">
                        <h5 class="text-red-300 font-bold mb-2">üí∞ Empr√©stimo</h5>
                        <p class="text-white text-sm">Contratos de m√∫tuo</p>
                    </div>
                    <div class="bg-indigo-500/20 rounded-lg p-4 border border-indigo-500/30 cursor-pointer hover:bg-indigo-500/30 transition-all">
                        <h5 class="text-indigo-300 font-bold mb-2">ü§ù Sociedade</h5>
                        <p class="text-white text-sm">Contratos societ√°rios</p>
                    </div>
                </div>
                <div class="mt-6 text-center">
                    <button onclick="gerarContratoCompleto()" class="bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-all">
                        üìÑ Personalizar Contrato
                    </button>
                </div>
            `;
        }

        function abrirJurisprudencia() {
            document.getElementById('area-advogado').classList.remove('hidden');
            document.getElementById('titulo-advogado').textContent = 'Banco de Jurisprud√™ncia';
            document.getElementById('conteudo-advogado').innerHTML = `
                <div class="mb-6">
                    <input type="text" placeholder="Buscar jurisprud√™ncia..." class="w-full p-3 rounded-lg bg-gray-900 border border-yellow-500/50 text-white placeholder-gray-400">
                </div>
                <div class="space-y-4 max-h-96 overflow-y-auto">
                    <div class="bg-blue-500/20 rounded-lg p-4 border border-blue-500/30">
                        <h5 class="text-blue-300 font-bold mb-2">STJ - Recurso Especial n¬∫ 1.234.567</h5>
                        <p class="text-white text-sm mb-2"><strong>Ementa:</strong> Furto qualificado. Reincid√™ncia. Aplica√ß√£o da pena...</p>
                        <p class="text-white/70 text-xs">Relator: Min. Jo√£o Silva | Data: 15/12/2024</p>
                    </div>
                    <div class="bg-green-500/20 rounded-lg p-4 border border-green-500/30">
                        <h5 class="text-green-300 font-bold mb-2">TJSP - Apela√ß√£o n¬∫ 9.876.543</h5>
                        <p class="text-white text-sm mb-2"><strong>Ementa:</strong> Les√£o corporal. Leg√≠tima defesa. Absolvi√ß√£o...</p>
                        <p class="text-white/70 text-xs">Relator: Des. Maria Santos | Data: 10/12/2024</p>
                    </div>
                    <div class="bg-purple-500/20 rounded-lg p-4 border border-purple-500/30">
                        <h5 class="text-purple-300 font-bold mb-2">STF - HC n¬∫ 567.890</h5>
                        <p class="text-white text-sm mb-2"><strong>Ementa:</strong> Habeas corpus. Pris√£o preventiva. Excesso de prazo...</p>
                        <p class="text-white/70 text-xs">Relator: Min. Carlos Oliveira | Data: 05/12/2024</p>
                    </div>
                </div>
            `;
        }

        // Sistema de Gest√£o de Processos 24/7 - Brasil√¢ndia RP
        let processos = [];
        let proximoNumeroProcesso = 1;
        
        // Inicializar sistema de processos
        function inicializarSistemaProcessos() {
            console.log('üèõÔ∏è Iniciando Sistema Jur√≠dico 24/7 - Brasil√¢ndia RP');
            adicionarLog('Sistema jur√≠dico iniciado - Brasil√¢ndia RP');
            
            // Carregar processos do Firebase se dispon√≠vel
            if (window.firebaseDB) {
                carregarProcessosFirebase();
            }
            
            // Atualizar interface a cada 5 segundos
            setInterval(atualizarInterface, 5000);
        }

        // Criar novo processo
        function criarNovoProcesso() {
            const nomeReu = document.getElementById('nome-reu-novo').value.trim();
            const crime = document.getElementById('crime-novo').value.trim();
            const advogado = document.getElementById('advogado-processo').value;
            
            if (!nomeReu || !crime) {
                alert('‚ö†Ô∏è Preencha nome do r√©u e crime!');
                return;
            }
            
            const numeroProcesso = String(proximoNumeroProcesso).padStart(3, '0') + '/2025';
            proximoNumeroProcesso++;
            
            const novoProcesso = {
                id: `proc_${Date.now()}`,
                numero: numeroProcesso,
                reu: nomeReu,
                crime: crime,
                advogado: advogado || 'N√£o designado',
                status: 'Aguardando Juiz',
                juiz: null,
                dataAbertura: new Date().toLocaleString('pt-BR'),
                intimacoes: [],
                sentenca: null,
                timestamp: Date.now()
            };
            
            processos.push(novoProcesso);
            salvarProcessoFirebase(novoProcesso);
            
            adicionarLog(`üìã Processo ${numeroProcesso} aberto - R√©u: ${nomeReu}`);
            
            // Notificar todos os usu√°rios
            if (window.firebaseDB) {
                const notificacao = {
                    titulo: 'üìã Novo Processo Aberto',
                    mensagem: `Processo ${numeroProcesso} - ${nomeReu} (${crime})`,
                    tipo: 'processo',
                    dados: novoProcesso,
                    timestamp: { toDate: () => new Date() }
                };
                enviarNotificacaoGlobal(notificacao);
            }
            
            // Limpar campos
            document.getElementById('nome-reu-novo').value = '';
            document.getElementById('crime-novo').value = '';
            document.getElementById('advogado-processo').value = '';
            
            atualizarListaProcessos();
            
            alert(`‚úÖ Processo ${numeroProcesso} criado com sucesso!\nüë®‚Äç‚öñÔ∏è Aguardando designa√ß√£o de juiz.`);
        }

        // Assumir processo como juiz
        function assumirProcesso() {
            const processoId = document.getElementById('processo-assumir').value;
            const nomeJuiz = document.getElementById('juiz-nome').value.trim();
            
            if (!processoId || !nomeJuiz) {
                alert('‚ö†Ô∏è Selecione um processo e informe o nome do juiz!');
                return;
            }
            
            const processo = processos.find(p => p.id === processoId);
            if (!processo) {
                alert('‚ùå Processo n√£o encontrado!');
                return;
            }
            
            processo.juiz = nomeJuiz;
            processo.status = 'Em Andamento';
            atualizarProcessoFirebase(processo);
            
            adicionarLog(`üë®‚Äç‚öñÔ∏è Juiz ${nomeJuiz} assumiu processo ${processo.numero}`);
            
            // Notificar todas as partes
            if (window.firebaseDB) {
                const notificacao = {
                    titulo: 'üë®‚Äç‚öñÔ∏è Juiz Designado',
                    mensagem: `${nomeJuiz} assumiu o processo ${processo.numero}`,
                    tipo: 'designacao',
                    dados: processo,
                    timestamp: { toDate: () => new Date() }
                };
                enviarNotificacaoGlobal(notificacao);
            }
            
            // Limpar campos
            document.getElementById('juiz-nome').value = '';
            atualizarListaProcessos();
            
            alert(`‚úÖ Processo ${processo.numero} assumido pelo Juiz ${nomeJuiz}!`);
        }

        // Enviar intima√ß√£o
        function enviarIntimacao() {
            const processoId = document.getElementById('processo-intimar').value;
            const nomeIntimado = document.getElementById('intimado-nome').value.trim();
            const motivo = document.getElementById('intimacao-motivo').value.trim();
            
            if (!processoId || !nomeIntimado || !motivo) {
                alert('‚ö†Ô∏è Preencha todos os campos da intima√ß√£o!');
                return;
            }
            
            const processo = processos.find(p => p.id === processoId);
            if (!processo) {
                alert('‚ùå Processo n√£o encontrado!');
                return;
            }
            
            const intimacao = {
                id: `int_${Date.now()}`,
                intimado: nomeIntimado,
                motivo: motivo,
                data: new Date().toLocaleString('pt-BR'),
                status: 'Enviada'
            };
            
            processo.intimacoes.push(intimacao);
            atualizarProcessoFirebase(processo);
            
            adicionarLog(`üì® Intima√ß√£o enviada - ${nomeIntimado} (${processo.numero})`);
            
            // Notificar o intimado
            if (window.firebaseDB) {
                const notificacao = {
                    titulo: 'üì® Intima√ß√£o Recebida',
                    mensagem: `${nomeIntimado}: ${motivo} - Processo ${processo.numero}`,
                    tipo: 'intimacao',
                    dados: { processo, intimacao },
                    timestamp: { toDate: () => new Date() }
                };
                enviarNotificacaoGlobal(notificacao);
            }
            
            // Limpar campos
            document.getElementById('intimado-nome').value = '';
            document.getElementById('intimacao-motivo').value = '';
            
            alert(`‚úÖ Intima√ß√£o enviada para ${nomeIntimado}!\nüìã Processo: ${processo.numero}\nüìù Motivo: ${motivo}`);
        }

        // Sentenciar processo
        function sentenciarProcesso() {
            const processoId = document.getElementById('processo-sentenciar').value;
            const tipoSentenca = document.getElementById('tipo-sentenca').value;
            const valorMulta = document.getElementById('valor-multa').value.trim();
            
            if (!processoId || !tipoSentenca) {
                alert('‚ö†Ô∏è Selecione um processo e tipo de senten√ßa!');
                return;
            }
            
            const processo = processos.find(p => p.id === processoId);
            if (!processo) {
                alert('‚ùå Processo n√£o encontrado!');
                return;
            }
            
            let descricaoSentenca = '';
            switch(tipoSentenca) {
                case 'condenacao':
                    descricaoSentenca = `Condena√ß√£o${valorMulta ? ` - Multa: R$ ${valorMulta}` : ''}`;
                    break;
                case 'absolvicao':
                    descricaoSentenca = 'Absolvi√ß√£o';
                    break;
                case 'arquivamento':
                    descricaoSentenca = 'Arquivamento';
                    break;
            }
            
            processo.sentenca = {
                tipo: tipoSentenca,
                descricao: descricaoSentenca,
                multa: valorMulta || null,
                data: new Date().toLocaleString('pt-BR'),
                juiz: processo.juiz
            };
            processo.status = 'Sentenciado';
            
            atualizarProcessoFirebase(processo);
            
            adicionarLog(`‚öñÔ∏è Processo ${processo.numero} sentenciado - ${descricaoSentenca}`);
            
            // Notificar todas as partes
            if (window.firebaseDB) {
                const notificacao = {
                    titulo: '‚öñÔ∏è Processo Sentenciado',
                    mensagem: `${processo.numero}: ${descricaoSentenca}`,
                    tipo: 'sentenca',
                    dados: processo,
                    timestamp: { toDate: () => new Date() }
                };
                enviarNotificacaoGlobal(notificacao);
            }
            
            // Limpar campos
            document.getElementById('valor-multa').value = '';
            atualizarListaProcessos();
            
            alert(`‚úÖ Processo ${processo.numero} sentenciado!\n‚öñÔ∏è ${descricaoSentenca}\nüë®‚Äç‚öñÔ∏è Juiz: ${processo.juiz}`);
        }

        // Fun√ß√µes auxiliares
        function adicionarLog(mensagem) {
            const log = document.getElementById('log-atividades');
            if (log) {
                const agora = new Date().toLocaleString('pt-BR');
                const novaLinha = document.createElement('div');
                novaLinha.className = 'text-green-400';
                novaLinha.textContent = `[${agora}] ${mensagem}`;
                log.appendChild(novaLinha);
                log.scrollTop = log.scrollHeight;
                
                // Manter apenas √∫ltimas 50 linhas
                while (log.children.length > 50) {
                    log.removeChild(log.firstChild);
                }
            }
        }

        function atualizarListaProcessos() {
            // Atualizar selects
            const selects = ['processo-assumir', 'processo-intimar', 'processo-sentenciar'];
            selects.forEach(selectId => {
                const select = document.getElementById(selectId);
                if (select) {
                    select.innerHTML = '<option value="">Selecionar Processo</option>';
                    processos.forEach(proc => {
                        if ((selectId === 'processo-assumir' && proc.status === 'Aguardando Juiz') ||
                            (selectId === 'processo-intimar' && proc.status === 'Em Andamento') ||
                            (selectId === 'processo-sentenciar' && proc.status === 'Em Andamento')) {
                            const option = document.createElement('option');
                            option.value = proc.id;
                            option.textContent = `${proc.numero} - ${proc.reu} (${proc.crime})`;
                            select.appendChild(option);
                        }
                    });
                }
            });
        }

        function atualizarInterface() {
            // Atualizar status do sistema
            const statusElement = document.getElementById('status-sistema');
            if (statusElement && window.firebaseDB) {
                statusElement.className = 'w-3 h-3 bg-green-500 rounded-full animate-pulse';
            } else if (statusElement) {
                statusElement.className = 'w-3 h-3 bg-red-500 rounded-full';
            }
        }

        // Fun√ß√µes Firebase
        function salvarProcessoFirebase(processo) {
            if (!window.firebaseDB) return;
            
            try {
                const { addDoc, collection } = window.firebaseModules;
                addDoc(collection(window.firebaseDB, 'processos'), processo);
                console.log('‚úÖ Processo salvo no Firebase:', processo.numero);
            } catch (error) {
                console.error('‚ùå Erro ao salvar processo:', error);
            }
        }

        function atualizarProcessoFirebase(processo) {
            if (!window.firebaseDB) return;
            
            try {
                const { doc, updateDoc } = window.firebaseModules;
                // Em uma implementa√ß√£o real, voc√™ salvaria o ID do documento
                console.log('‚úÖ Processo atualizado no Firebase:', processo.numero);
            } catch (error) {
                console.error('‚ùå Erro ao atualizar processo:', error);
            }
        }

        function carregarProcessosFirebase() {
            if (!window.firebaseDB) return;
            
            try {
                const { collection, onSnapshot } = window.firebaseModules;
                const processosRef = collection(window.firebaseDB, 'processos');
                
                onSnapshot(processosRef, (snapshot) => {
                    const processosCarregados = [];
                    snapshot.forEach((doc) => {
                        processosCarregados.push({ ...doc.data(), firebaseId: doc.id });
                    });
                    
                    // Sincronizar com array local
                    processos = processosCarregados;
                    atualizarListaProcessos();
                    
                    console.log(`üîÑ ${processosCarregados.length} processos sincronizados do Firebase`);
                });
            } catch (error) {
                console.error('‚ùå Erro ao carregar processos:', error);
            }
        }

        // Outras fun√ß√µes (compatibilidade)
        function novoProcesso() {
            alert('üìã Use o painel "Sistema 24/7" acima para criar novos processos!');
        }

        function adicionarPrazo() {
            alert('‚è∞ Funcionalidade de adicionar prazo em desenvolvimento!');
        }

        function buscarReu() {
            const busca = document.getElementById('busca-reu').value;
            if (busca.trim()) {
                alert(`üîç Buscando por: ${busca}`);
            } else {
                alert('‚ö†Ô∏è Digite um nome ou CPF para buscar.');
            }
        }

        function novoReu() {
            alert('üë§ Funcionalidade de cadastro de r√©u em desenvolvimento!');
        }

        function gerarRelatorio() {
            alert('üìä Gerando relat√≥rio completo...');
        }

        function gerarQRCode() {
            alert('üì± Novo QR Code gerado com sucesso!');
        }

        // Fun√ß√µes dos geradores
        function gerarPeticaoCompleta() {
            if (!usuarioLogado) {
                alert('‚ö†Ô∏è Fa√ßa login para usar esta funcionalidade!');
                return;
            }

            const tipoPeticao = document.querySelector('#conteudo-advogado select').value;
            const cliente = document.querySelector('#conteudo-advogado input[type="text"]').value;
            const conteudo = document.querySelector('#conteudo-advogado textarea').value;

            if (!cliente || !conteudo) {
                alert('‚ö†Ô∏è Preencha todos os campos!');
                return;
            }

            const dataAtual = new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });
            
            const peticaoHTML = `
                <div style="font-family: Arial, sans-serif; padding: 20px; background: white; color: black;">
                    <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 20px;">
                        <h1 style="font-size: 18px; font-weight: bold;">EXCELENT√çSSIMO SENHOR DOUTOR JUIZ DE DIREITO</h1>
                        <h2 style="font-size: 16px;">DA 1¬™ VARA CRIMINAL DA COMARCA DE BRASIL√ÇNDIA/SP</h2>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h2 style="text-align: center; font-size: 20px; font-weight: bold; text-decoration: underline;">${tipoPeticao.toUpperCase()}</h2>
                    </div>

                    <div style="margin-bottom: 20px; text-align: justify; line-height: 1.6;">
                        <p><strong>${usuarioLogado.nome}</strong>, advogado(a) devidamente inscrito(a) na OAB/SP, com escrit√≥rio profissional situado em Brasil√¢ndia/SP, vem respeitosamente √† presen√ßa de Vossa Excel√™ncia, em favor de <strong>${cliente}</strong>, pelos fatos e fundamentos jur√≠dicos a seguir expostos:</p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">DOS FATOS</h3>
                        <div style="text-align: justify; line-height: 1.6; padding: 15px; border: 1px solid #ccc;">
                            ${conteudo.replace(/\n/g, '<br>')}
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">DO DIREITO</h3>
                        <div style="text-align: justify; line-height: 1.6; padding: 15px; border: 1px solid #ccc;">
                            <p>Conforme jurisprud√™ncia pac√≠fica dos Tribunais Superiores e doutrina majorit√°ria, os fatos narrados encontram amparo legal e merecem o deferimento do pedido.</p>
                        </div>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">DOS PEDIDOS</h3>
                        <div style="text-align: justify; line-height: 1.6; padding: 15px; border: 1px solid #ccc;">
                            <p>Diante do exposto, requer-se a Vossa Excel√™ncia:</p>
                            <p>a) O deferimento do pedido;</p>
                            <p>b) A cita√ß√£o da parte contr√°ria;</p>
                            <p>c) A proced√™ncia da a√ß√£o.</p>
                        </div>
                    </div>

                    <div style="margin-top: 40px;">
                        <p style="text-align: center; margin-bottom: 20px;">Nestes termos, pede deferimento.</p>
                        <p style="text-align: right; margin-bottom: 40px;">Brasil√¢ndia, ${dataAtual}.</p>
                        
                        <div style="text-align: center;">
                            <div style="border-top: 1px solid #000; width: 300px; margin: 0 auto; padding-top: 10px;">
                                <p style="margin: 0; font-weight: bold;">${usuarioLogado.nome}</p>
                                <p style="margin: 0;">Advogado(a) - OAB/SP</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Abrir em nova janela
            const janela = window.open('', '_blank');
            janela.document.write(`
                <html>
                <head><title>${tipoPeticao} - ${cliente}</title></head>
                <body>${peticaoHTML}</body>
                </html>
            `);
            janela.document.close();
            
            alert('üìÑ Peti√ß√£o gerada com sucesso!');
        }

        function gerarProcuracaoCompleta() {
            if (!usuarioLogado) {
                alert('‚ö†Ô∏è Fa√ßa login para usar esta funcionalidade!');
                return;
            }

            const dataAtual = new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });
            
            const procuracaoHTML = `
                <div style="font-family: Arial, sans-serif; padding: 20px; background: white; color: black;">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h1 style="font-size: 20px; font-weight: bold; text-decoration: underline;">PROCURA√á√ÉO</h1>
                    </div>
                    
                    <div style="margin-bottom: 20px; text-align: justify; line-height: 1.6;">
                        <p><strong>OUTORGANTE:</strong> <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">Nome do Cliente</span>, brasileiro(a), <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">estado civil</span>, <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">profiss√£o</span>, portador(a) do RG n¬∫ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">00.000.000-0</span> e CPF n¬∫ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">000.000.000-00</span>, residente e domiciliado(a) √† <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">endere√ßo completo</span>.</p>
                    </div>

                    <div style="margin-bottom: 20px; text-align: justify; line-height: 1.6;">
                        <p><strong>OUTORGADO:</strong> <strong>${usuarioLogado.nome}</strong>, advogado(a) devidamente inscrito(a) na OAB/SP, com escrit√≥rio profissional situado em Brasil√¢ndia/SP.</p>
                    </div>

                    <div style="margin-bottom: 20px; text-align: justify; line-height: 1.6;">
                        <p>Pelo presente instrumento particular, o(a) OUTORGANTE confere ao(√†) OUTORGADO(A) os mais amplos poderes para:</p>
                        
                        <ul style="margin-left: 30px; line-height: 1.8;">
                            <li>Represent√°-lo(a) perante qualquer Ju√≠zo, Inst√¢ncia ou Tribunal;</li>
                            <li>Propor e acompanhar a√ß√µes de qualquer natureza;</li>
                            <li>Contestar, reconvir, transigir, desistir, renunciar ao direito em que se funda a a√ß√£o;</li>
                            <li>Receber cita√ß√µes, intima√ß√µes e notifica√ß√µes;</li>
                            <li>Prestar depoimento pessoal e confiss√£o;</li>
                            <li>Firmar compromissos e acordos;</li>
                            <li>Substabelecer esta procura√ß√£o, com ou sem reservas;</li>
                            <li>Praticar todos os atos necess√°rios ao bom e fiel desempenho do mandato.</li>
                        </ul>
                    </div>

                    <div style="margin-top: 40px;">
                        <p style="text-align: right; margin-bottom: 60px;">Brasil√¢ndia, ${dataAtual}.</p>
                        
                        <div style="text-align: center;">
                            <div style="border-top: 1px solid #000; width: 300px; margin: 0 auto; padding-top: 10px;">
                                <p style="margin: 0; font-weight: bold;">OUTORGANTE</p>
                                <p style="margin: 0; font-size: 12px;">Assinatura</p>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 40px; border-top: 2px solid #000; padding-top: 20px;">
                        <h3 style="text-align: center; font-weight: bold; margin-bottom: 20px;">RECONHECIMENTO DE FIRMA</h3>
                        <div style="border: 1px solid #000; padding: 20px; min-height: 100px;">
                            <p style="color: #666; font-style: italic;">Espa√ßo reservado para reconhecimento de firma em cart√≥rio...</p>
                        </div>
                    </div>
                </div>
            `;

            // Abrir em nova janela
            const janela = window.open('', '_blank');
            janela.document.write(`
                <html>
                <head><title>Procura√ß√£o - ${usuarioLogado.nome}</title></head>
                <body>${procuracaoHTML}</body>
                </html>
            `);
            janela.document.close();
            
            alert('üìÑ Procura√ß√£o gerada com sucesso!');
        }

        function gerarContratoCompleto() {
            if (!usuarioLogado) {
                alert('‚ö†Ô∏è Fa√ßa login para usar esta funcionalidade!');
                return;
            }

            const dataAtual = new Date().toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });
            
            const contratoHTML = `
                <div style="font-family: Arial, sans-serif; padding: 20px; background: white; color: black;">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h1 style="font-size: 20px; font-weight: bold; text-decoration: underline;">CONTRATO DE PRESTA√á√ÉO DE SERVI√áOS ADVOCAT√çCIOS</h1>
                    </div>
                    
                    <div style="margin-bottom: 20px; text-align: justify; line-height: 1.6;">
                        <p><strong>CONTRATANTE:</strong> <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">Nome do Cliente</span>, brasileiro(a), <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">estado civil</span>, <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">profiss√£o</span>, portador(a) do RG n¬∫ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">00.000.000-0</span> e CPF n¬∫ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">000.000.000-00</span>, residente e domiciliado(a) √† <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">endere√ßo completo</span>.</p>
                    </div>

                    <div style="margin-bottom: 20px; text-align: justify; line-height: 1.6;">
                        <p><strong>CONTRATADO:</strong> <strong>${usuarioLogado.nome}</strong>, advogado(a) devidamente inscrito(a) na OAB/SP, com escrit√≥rio profissional situado em Brasil√¢ndia/SP.</p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">CL√ÅUSULA 1¬™ - DO OBJETO</h3>
                        <p style="text-align: justify; line-height: 1.6;">O presente contrato tem por objeto a presta√ß√£o de servi√ßos advocat√≠cios pelo CONTRATADO ao CONTRATANTE, consistente em <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">descrever os servi√ßos</span>.</p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">CL√ÅUSULA 2¬™ - DOS HONOR√ÅRIOS</h3>
                        <p style="text-align: justify; line-height: 1.6;">Pelos servi√ßos prestados, o CONTRATANTE pagar√° ao CONTRATADO a quantia de R$ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">0,00</span> (<span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">valor por extenso</span>), a ser paga da seguinte forma:</p>
                        <ul style="margin-left: 30px; line-height: 1.8;">
                            <li>R$ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">0,00</span> na assinatura do contrato;</li>
                            <li>R$ <span style="cursor: pointer; background: #fff3cd;" onclick="tornarEditavel(this)" title="Clique para editar">0,00</span> em caso de √™xito;</li>
                        </ul>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">CL√ÅUSULA 3¬™ - DAS OBRIGA√á√ïES</h3>
                        <p style="text-align: justify; line-height: 1.6;"><strong>3.1.</strong> O CONTRATADO obriga-se a prestar os servi√ßos com zelo e dilig√™ncia profissional.</p>
                        <p style="text-align: justify; line-height: 1.6;"><strong>3.2.</strong> O CONTRATANTE obriga-se a fornecer todas as informa√ß√µes e documentos necess√°rios.</p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h3 style="font-weight: bold; margin-bottom: 10px;">CL√ÅUSULA 4¬™ - DO FORO</h3>
                        <p style="text-align: justify; line-height: 1.6;">Fica eleito o foro da Comarca de Brasil√¢ndia/SP para dirimir quaisquer quest√µes oriundas do presente contrato.</p>
                    </div>

                    <div style="margin-top: 40px;">
                        <p style="text-align: right; margin-bottom: 60px;">Brasil√¢ndia, ${dataAtual}.</p>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 50px; margin-top: 50px;">
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; padding-top: 10px;">
                                    <p style="margin: 0; font-weight: bold;">CONTRATANTE</p>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; padding-top: 10px;">
                                    <p style="margin: 0; font-weight: bold;">CONTRATADO</p>
                                    <p style="margin: 0; font-size: 12px;">${usuarioLogado.nome}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 40px; border-top: 2px solid #000; padding-top: 20px;">
                        <h3 style="text-align: center; font-weight: bold; margin-bottom: 20px;">TESTEMUNHAS</h3>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 50px;">
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; padding-top: 10px; margin-top: 40px;">
                                    <p style="margin: 0;">Nome: _________________________</p>
                                    <p style="margin: 0;">CPF: _________________________</p>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="border-top: 1px solid #000; padding-top: 10px; margin-top: 40px;">
                                    <p style="margin: 0;">Nome: _________________________</p>
                                    <p style="margin: 0;">CPF: _________________________</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Abrir em nova janela
            const janela = window.open('', '_blank');
            janela.document.write(`
                <html>
                <head><title>Contrato de Honor√°rios - ${usuarioLogado.nome}</title></head>
                <body>${contratoHTML}</body>
                </html>
            `);
            janela.document.close();
            
            alert('üìÑ Contrato gerado com sucesso!');
        }

        // Fun√ß√£o para mostrar backups dispon√≠veis
        function mostrarBackups() {
            const backups = JSON.parse(localStorage.getItem('backupsAutomaticos')) || [];
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/95 backdrop-blur-xl z-50 flex items-center justify-center overflow-y-auto';
            
            let backupsHTML = '';
            if (backups.length === 0) {
                backupsHTML = '<p class="text-white text-center">Nenhum backup dispon√≠vel ainda.</p>';
            } else {
                backups.reverse().forEach((backup, index) => {
                    const realIndex = backups.length - 1 - index;
                    backupsHTML += `
                        <div class="bg-gradient-to-r from-blue-600/20 to-indigo-600/20 rounded-lg p-4 border border-blue-500/50 mb-3">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="text-white font-bold">Backup #${realIndex + 1}</h4>
                                    <p class="text-blue-300 text-sm">${new Date(backup.timestamp).toLocaleString('pt-BR')}</p>
                                    <p class="text-blue-200 text-xs">Vers√£o: ${backup.version}</p>
                                    <p class="text-blue-200 text-xs">Usu√°rios: ${Object.keys(backup.usuarios).length}</p>
                                </div>
                                <button onclick="restaurarBackup(${realIndex})" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition-all">
                                    üîÑ Restaurar
                                </button>
                            </div>
                        </div>
                    `;
                });
            }

            modal.innerHTML = `
                <div class="bg-gradient-to-br from-blue-600/30 to-indigo-600/30 backdrop-blur-xl rounded-3xl p-8 border-2 border-blue-500/60 shadow-2xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                    <div class="text-center mb-6">
                        <h2 class="text-3xl font-bold text-white flex items-center justify-center">
                            <span class="text-4xl mr-3">üíæ</span>
                            Gerenciar Backups
                        </h2>
                        <p class="text-blue-200 mt-2">Backups autom√°ticos do sistema</p>
                    </div>
                    
                    <div class="mb-6">
                        ${backupsHTML}
                    </div>
                    
                    <div class="text-center space-x-4">
                        <button onclick="criarBackupAutomatico(); alert('‚úÖ Backup manual criado!'); this.closest('.fixed').remove();" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            üíæ Criar Backup Manual
                        </button>
                        <button onclick="this.closest('.fixed').remove()" class="bg-gray-600 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg transition-all">
                            ‚ùå Fechar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Sistema de Notifica√ß√µes
        function criarNotificacaoNomeacao(nomeUsuario, cargo, icon) {
            const notificacao = document.createElement('div');
            notificacao.className = 'fixed top-4 right-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-xl shadow-2xl z-50 animate-slide-in max-w-sm';
            notificacao.innerHTML = `
                <div class="flex items-start space-x-4">
                    <div class="text-3xl">${icon}</div>
                    <div class="flex-1">
                        <h4 class="font-bold text-lg mb-1">üéâ Nova Nomea√ß√£o!</h4>
                        <p class="text-sm opacity-90 mb-2">
                            <strong>${nomeUsuario}</strong> foi nomeado(a) para:
                        </p>
                        <p class="font-bold text-yellow-300">${cargo}</p>
                        <p class="text-xs opacity-75 mt-2">
                            ${new Date().toLocaleString('pt-BR')}
                        </p>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" class="text-white/70 hover:text-white transition-colors">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                    </button>
                </div>
            `;
            
            document.body.appendChild(notificacao);
            
            // Remover automaticamente ap√≥s 8 segundos
            setTimeout(() => {
                if (notificacao.parentElement) {
                    notificacao.remove();
                }
            }, 8000);

            // Efeito sonoro (opcional)
            try {
                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT');
                audio.volume = 0.3;
                audio.play().catch(() => {}); // Ignorar erro se n√£o conseguir tocar
            } catch (e) {}
        }

        // Inicializa√ß√£o do sistema quando carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üèõÔ∏è Sistema Jur√≠dico Completo carregado com sucesso!');
            
            // Adicionar biblioteca html2canvas para captura de tela
            const script = document.createElement('script');
            script.src = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
            document.head.appendChild(script);

            // Inicializar sistema de conectividade Firebase
            setTimeout(() => {
                if (window.firebaseConnectivity) {
                    window.firebaseConnectivity.inicializar();
                    // For√ßar primeira verifica√ß√£o
                    window.firebaseConnectivity.verificarConexao();
                }
            }, 2000);
        });
       document.querySelectorAll('.crime-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        this.classList.toggle('bg-gradient-to-r');
        this.classList.toggle('from-green-600');
        this.classList.toggle('to-green-400');
        this.classList.toggle('text-black');
        this.classList.toggle('font-bold');
        this.classList.toggle('shadow-xl');
        this.classList.toggle('border-2');
        this.classList.toggle('border-green-500');
        // Adiciona ou remove da lista de selecionados
        const lista = document.getElementById('lista-crimes');
        if (this.classList.contains('bg-gradient-to-r')) {
            const crimeTag = document.createElement('span');
            crimeTag.className = 'bg-green-600 text-white px-2 py-1 rounded font-bold text-xs crime-tag';
            crimeTag.textContent = this.textContent;
            crimeTag.dataset.crime = this.dataset.crime;
            crimeTag.dataset.multa = this.dataset.multa;
            crimeTag.dataset.tempo = this.dataset.tempo;
            lista.appendChild(crimeTag);
        } else {
            [...lista.children].forEach(tag => {
                if (tag.dataset.crime === this.dataset.crime) tag.remove();
            });
        }
    });
});

// Busca r√°pida de crimes
function filtrarCrimes() {
    const termo = document.getElementById('busca-crime').value.toLowerCase();
    document.querySelectorAll('.crime-btn').forEach(btn => {
        if (btn.textContent.toLowerCase().includes(termo)) {
            btn.style.display = '';
        } else {
            btn.style.display = 'none';
        }
    });
}

// ===== FUN√á√ïES DE CONTROLE DE CONECTIVIDADE =====

// Mostrar status detalhado do Firebase
function mostrarStatusDetalhado() {
    const status = window.firebaseConnectivity?.status || { isOnline: false };
    const uptime = status.lastConnect ? 
        Math.floor((new Date() - status.lastConnect) / 1000) : 'N/A';
    
    const statusHTML = `
        <div class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
            <div class="bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-600">
                <h3 class="text-white text-lg font-bold mb-4">üî• Status Firebase Detalhado</h3>
                <div class="space-y-3 text-sm">
                    <div class="flex justify-between">
                        <span class="text-gray-300">Status:</span>
                        <span class="${status.isOnline ? 'text-green-400' : 'text-red-400'}">
                            ${status.isOnline ? '‚úÖ Online' : '‚ùå Offline'}
                        </span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">√öltima Conex√£o:</span>
                        <span class="text-blue-400">${status.lastConnect ? status.lastConnect.toLocaleString() : 'Nunca'}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">Tentativas Reconex√£o:</span>
                        <span class="text-yellow-400">${status.reconnectAttempts}/${status.maxReconnectAttempts}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">Pr√≥xima Tentativa:</span>
                        <span class="text-purple-400">${status.reconnectDelay}ms</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">Internet:</span>
                        <span class="${navigator.onLine ? 'text-green-400' : 'text-red-400'}">
                            ${navigator.onLine ? 'üåê Online' : 'üì¥ Offline'}
                        </span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">Auth Ativo:</span>
                        <span class="${window.firebaseAuth ? 'text-green-400' : 'text-red-400'}">
                            ${window.firebaseAuth?.currentUser ? 'üë§ Logado' : 'üë§ N√£o logado'}
                        </span>
                    </div>
                </div>
                <div class="mt-6 flex space-x-3">
                    <button onclick="window.firebaseConnectivity.forcarReconexao(); this.closest('.fixed').remove();" 
                            class="bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded text-sm">
                        üîÑ Reconectar
                    </button>
                    <button onclick="window.firebaseConnectivity.verificarConexao(); this.closest('.fixed').remove();" 
                            class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm">
                        üîç Testar
                    </button>
                    <button onclick="this.closest('.fixed').remove();" 
                            class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-2 rounded text-sm">
                        ‚úñÔ∏è Fechar
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.insertAdjacentHTML('beforeend', statusHTML);
}

// Inicializar sistema de conectividade quando p√°gina carrega
document.addEventListener('DOMContentLoaded', function() {
    // Aguardar Firebase inicializar
    setTimeout(() => {
        if (window.firebaseConnectivity) {
            window.firebaseConnectivity.inicializar();
        }
    }, 3000);
});
    </script>
    
    <!-- Status do Firebase - Melhorado -->
    <div id="firebase-status" class="firebase-status desconectado">
        <div class="w-2 h-2 bg-yellow-500 rounded-full animate-pulse"></div>
        <span class="text-white text-xs">üî• Inicializando...</span>
    </div>
    
    <!-- Bot√µes de controle Firebase -->
    <button onclick="window.firebaseConnectivity.forcarReconexao()" class="btn-teste-notif" style="bottom: 230px; background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);" title="For√ßar reconex√£o Firebase">
        üî• Reconectar
    </button>
    <button onclick="mostrarStatusDetalhado()" class="btn-teste-notif" style="bottom: 255px; background: linear-gradient(135deg, #059669 0%, #047857 100%);" title="Status detalhado do Firebase">
        üìä Status
    </button>
    
    <!-- Bot√µes de teste de notifica√ß√£o (apenas para desenvolvimento) -->
    <button onclick="testeNotificacaoSimples('info')" class="btn-teste-notif" style="bottom: 205px;" title="Teste notifica√ß√£o local">
        üì¢ Local Info
    </button>
    <button onclick="testeNotificacaoSimples('sucesso')" class="btn-teste-notif" style="bottom: 180px;" title="Teste notifica√ß√£o local">
        ‚úÖ Local Sucesso
    </button>
    <button onclick="testeNotificacaoSimples('urgente')" class="btn-teste-notif" style="bottom: 155px;" title="Teste notifica√ß√£o local">
        üö® Local Urgente
    </button>
    <button onclick="notificarDocumentoSalvo('Peti√ß√£o', 'Apela√ß√£o Criminal #123')" class="btn-teste-notif" style="bottom: 130px;" title="Teste documento salvo">
        üìÑ Doc Salvo
    </button>
    <button onclick="notificarOABLiberada('123456', 'Jo√£o Silva')" class="btn-teste-notif" style="bottom: 105px;" title="Teste OAB liberada">
        üÜî OAB Liberada
    </button>
    <button onclick="notificarBackup()" class="btn-teste-notif" style="bottom: 80px;" title="Teste backup">
        ÔøΩ Backup
    </button>
    <button onclick="explicarNotificacoes()" class="btn-teste-notif" style="bottom: 55px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" title="Como funcionam as notifica√ß√µes">
        ‚ùì Como Funciona
    </button>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96ab8181102a27f1',t:'MTc1NDQ1MTU1My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
